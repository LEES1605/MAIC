{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "MAIC Prompt Schema (minimal)",
  "type": "object",
  "required": ["version", "modes"],
  "properties": {
    "version": { "type": ["string", "number"] },
    "modes": {
      "type": "object",
      "required": ["grammar", "sentence", "passage"],
      "properties": {
        "grammar": { "$ref": "#/$defs/mode" },
        "sentence": { "$ref": "#/$defs/mode" },
        "passage": { "$ref": "#/$defs/mode" }
      },
      "additionalProperties": false
    }
  },
  "$defs": {
    "mode": {
      "type": "object",
      "required": ["persona", "system_instructions", "citations_policy", "routing_hints"],
      "properties": {
        "persona": { "type": "string" },
        "system_instructions": { "type": ["string", "array"] },
        "guardrails": { "type": ["object", "null"] },
        "examples": { "type": ["array", "null"] },
        "citations_policy": { "type": "string" },
        "routing_hints": {
          "type": "object",
          "properties": {
            "model": { "type": "string" },
            "max_tokens": { "type": ["number", "integer"] },
            "temperature": { "type": ["number", "integer"] }
          },
          "required": ["model"]
        }
      },
      "additionalProperties": true
    }
  }
}
