# UI 코드 통합 마스터플랜

## 📋 개요
현재 여러 파일에 흩어져 있는 UI 관련 코드를 체계적으로 통합하여 유지보수성과 재사용성을 향상시키는 프로젝트입니다.

## 🎯 목표
- **유지보수성 향상**: 스타일 변경 시 한 곳에서만 수정
- **재사용성 증대**: 컴포넌트별 독립적 사용 가능
- **성능 최적화**: 필요한 스타일만 로드
- **개발 효율성**: UI 개발자와 백엔드 개발자 분업 가능
- **일관성 보장**: 통일된 디자인 시스템

## 📊 현재 상황 분석

### 🔍 UI 코드 분산 현황
1. **`app.py`**: 600+ 줄의 CSS 스타일이 하드코딩됨
   - 채팅 영역 스타일 (`.chatpane-messages`, `.chatpane-input`)
   - 버블/칩 스타일 (`.bubble`, `.chip`)
   - 모바일 반응형 스타일
   - 프롬프트 에디터 스타일

2. **`src/ui/header.py`**: 헤더 관련 스타일과 로직
   - 관리자 네비게이션바
   - 준비 상태 표시기
   - 펄스 애니메이션

3. **`src/ui/components/`**: Linear 컴포넌트들
   - `linear_components.py`: 기본 컴포넌트
   - `linear_theme.py`: 테마 시스템
   - `linear_layout_components.py`: 레이아웃 컴포넌트

4. **`src/ui/utils/sider.py`**: 사이드바 숨김 스타일
   - Streamlit 기본 네비게이션 숨김

5. **`src/ui/admin_prompt.py`**: 관리자 UI 스타일
   - 상태 버튼 스타일
   - 관리자 전용 UI

## 🏗️ 새로운 구조 설계

### 📁 폴더 구조
```
src/ui/
├── styles/
│   ├── __init__.py
│   ├── base.py          # 기본 스타일 (Streamlit 숨김, 기본 레이아웃)
│   ├── chat.py          # 채팅 관련 스타일
│   ├── header.py        # 헤더/네비게이션 스타일
│   ├── admin.py         # 관리자 UI 스타일
│   ├── components.py    # Linear 컴포넌트 스타일
│   └── responsive.py    # 모바일/태블릿 반응형 스타일
├── layouts/
│   ├── __init__.py
│   ├── main.py          # 메인 레이아웃
│   ├── admin.py         # 관리자 레이아웃
│   └── chat.py          # 채팅 레이아웃
└── utils/
    ├── __init__.py
    ├── style_injector.py # 스타일 주입 유틸리티
    └── theme_manager.py  # 테마 관리
```

### 🎨 스타일 분류

#### 1. **base.py** - 기본 스타일
- Streamlit 기본 UI 숨김
- 기본 레이아웃 설정
- 공통 변수 및 믹스인

#### 2. **chat.py** - 채팅 관련
- `.chatpane-messages`, `.chatpane-input`
- `.bubble`, `.chip` 스타일
- 채팅 입력 폼 스타일

#### 3. **header.py** - 헤더/네비게이션
- 관리자 네비게이션바
- 준비 상태 표시기
- 펄스 애니메이션

#### 4. **admin.py** - 관리자 UI
- 관리자 전용 스타일
- 상태 버튼 스타일
- 관리자 레이아웃

#### 5. **components.py** - Linear 컴포넌트
- 기존 Linear 컴포넌트 스타일 통합
- 버튼, 카드, 알림 등

#### 6. **responsive.py** - 반응형
- 모바일/태블릿 미디어 쿼리
- 반응형 레이아웃

## 🚀 실행 계획

### 1단계: 현재 UI 코드 전수 조사 (30분)
- [ ] `app.py`의 모든 CSS 스타일 추출
- [ ] `src/ui/` 폴더의 모든 UI 코드 분석
- [ ] 스타일 의존성 및 중복 코드 식별
- [ ] 우선순위 및 분류 기준 설정

### 2단계: 새로운 폴더 구조 생성 (15분)
- [ ] `src/ui/styles/` 폴더 생성
- [ ] `src/ui/layouts/` 폴더 생성
- [ ] `src/ui/utils/` 폴더 생성
- [ ] 각 폴더에 `__init__.py` 파일 생성

### 3단계: 스타일 모듈 생성 (2시간)
- [ ] `base.py` - 기본 스타일 모듈
- [ ] `chat.py` - 채팅 스타일 모듈
- [ ] `header.py` - 헤더 스타일 모듈
- [ ] `admin.py` - 관리자 스타일 모듈
- [ ] `components.py` - 컴포넌트 스타일 모듈
- [ ] `responsive.py` - 반응형 스타일 모듈

### 4단계: 스타일 주입 시스템 구축 (1시간)
- [ ] `style_injector.py` - 스타일 주입 유틸리티
- [ ] `theme_manager.py` - 테마 관리 시스템
- [ ] 세션 상태 기반 스타일 로딩

### 5단계: 기존 코드 리팩토링 (1시간)
- [ ] `app.py`의 CSS 코드를 새 모듈로 대체
- [ ] `src/ui/header.py` 리팩토링
- [ ] `src/ui/admin_prompt.py` 리팩토링
- [ ] `src/ui/utils/sider.py` 리팩토링

### 6단계: 테스트 및 검증 (30분)
- [ ] UI 렌더링 테스트
- [ ] 스타일 적용 확인
- [ ] 반응형 동작 확인
- [ ] 성능 테스트

## 📈 예상 효과

### ✅ 장점
1. **유지보수성 향상**: 스타일 변경 시 한 곳에서만 수정
2. **재사용성 증대**: 컴포넌트별 독립적 사용 가능
3. **성능 최적화**: 필요한 스타일만 로드
4. **개발 효율성**: UI 개발자와 백엔드 개발자 분업 가능
5. **일관성 보장**: 통일된 디자인 시스템

### ⚠️ 고려사항
1. **초기 작업량**: 기존 코드 리팩토링 필요
2. **의존성 관리**: 스타일 간 의존성 정리
3. **테스트 필요**: UI 변경에 따른 기능 테스트

## 🎯 성공 기준
- [ ] 모든 UI 스타일이 새로운 모듈 구조로 이동
- [ ] 기존 기능이 정상적으로 작동
- [ ] 코드 중복이 50% 이상 감소
- [ ] 새로운 UI 컴포넌트 추가가 용이해짐
- [ ] 스타일 변경 시 한 곳에서만 수정 가능

## 📅 일정
- **총 예상 시간**: 5시간
- **1단계**: 30분 (현재 UI 코드 전수 조사)
- **2단계**: 15분 (새로운 폴더 구조 생성)
- **3단계**: 2시간 (스타일 모듈 생성)
- **4단계**: 1시간 (스타일 주입 시스템 구축)
- **5단계**: 1시간 (기존 코드 리팩토링)
- **6단계**: 30분 (테스트 및 검증)

## 🔄 롤백 계획
각 단계별로 Git 커밋을 생성하여 문제 발생 시 이전 상태로 롤백 가능하도록 합니다.

---
**작성일**: 2025-10-06  
**작성자**: AI Assistant  
**상태**: 계획 수립 완료, 실행 대기
