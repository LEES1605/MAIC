# 중복 방지 규칙 (Duplication Prevention Rules)

## 🚫 중복 금지 원칙

### 1. 파일 중복
- **금지**: 동일한 기능의 파일을 여러 개 생성
- **금지**: 유사한 목적의 파일을 여러 개 생성
- **예시**: `user_service.py`, `user_management.py`, `user_handler.py` (동일 기능)
- **해결**: 하나의 파일로 통합하거나 명확한 역할 분리

### 2. 함수 중복
- **금지**: 동일한 로직의 함수를 여러 곳에 작성
- **금지**: 유사한 기능의 함수를 여러 개 생성
- **예시**: `get_user()`, `fetch_user()`, `retrieve_user()` (동일 기능)
- **해결**: 공통 함수로 추출하여 재사용

### 3. 클래스 중복
- **금지**: 동일한 역할의 클래스를 여러 개 생성
- **금지**: 유사한 구조의 클래스를 여러 개 생성
- **예시**: `UserManager`, `UserService`, `UserHandler` (동일 역할)
- **해결**: 하나의 클래스로 통합하거나 명확한 역할 분리

## 🔍 중복 검증 기준

### 1. 파일명 유사성 검증
- **기준**: 파일명이 80% 이상 유사한 경우
- **예외**: 명확한 역할 구분이 있는 경우
- **검사**: `user_service.py` vs `user_management.py`

### 2. 함수명 유사성 검증
- **기준**: 함수명이 80% 이상 유사한 경우
- **예외**: 매개변수나 반환값이 다른 경우
- **검사**: `get_user()` vs `get_user_data()`

### 3. 클래스명 유사성 검증
- **기준**: 클래스명이 80% 이상 유사한 경우
- **예외**: 상속 관계나 명확한 역할 구분이 있는 경우
- **검사**: `UserService` vs `UserManager`

## 📋 중복 검사 프로세스

### 1. 새 파일 생성 전 검사
```
1. 동일한 기능의 기존 파일 존재 여부 확인
2. 유사한 파일명의 기존 파일 존재 여부 확인
3. 중복 발견 시 기존 파일 활용 또는 명확한 구분점 제시
```

### 2. 새 함수 생성 전 검사
```
1. 동일한 기능의 기존 함수 존재 여부 확인
2. 유사한 함수명의 기존 함수 존재 여부 확인
3. 중복 발견 시 기존 함수 재사용 또는 매개변수 확장
```

### 3. 새 클래스 생성 전 검사
```
1. 동일한 역할의 기존 클래스 존재 여부 확인
2. 유사한 클래스명의 기존 클래스 존재 여부 확인
3. 중복 발견 시 기존 클래스 확장 또는 상속 구조 검토
```

## 🛠️ 중복 해결 방법

### 1. 파일 통합
- **방법**: 중복 파일들을 하나로 통합
- **조건**: 기능이 동일하거나 유사한 경우
- **절차**: 
  1. 기존 파일들의 기능 분석
  2. 통합 파일 구조 설계
  3. 기능 통합 및 테스트
  4. 기존 파일 삭제

### 2. 함수 추출
- **방법**: 중복 로직을 공통 함수로 추출
- **조건**: 로직이 동일하거나 유사한 경우
- **절차**:
  1. 중복 로직 식별
  2. 공통 함수로 추출
  3. 기존 코드에서 공통 함수 호출
  4. 테스트 및 검증

### 3. 클래스 리팩토링
- **방법**: 중복 클래스들을 상속 구조로 재구성
- **조건**: 역할이 유사하지만 세부 기능이 다른 경우
- **절차**:
  1. 공통 기능 추출하여 기본 클래스 생성
  2. 차이점을 서브클래스로 분리
  3. 기존 코드를 새로운 구조로 마이그레이션
  4. 테스트 및 검증

## ✅ 중복 방지 체크리스트

### 1. 코드 작성 전
- [ ] 기존 동일 기능 파일 존재 여부 확인
- [ ] 기존 유사 기능 파일 존재 여부 확인
- [ ] 기존 파일 재사용 가능성 검토
- [ ] 새 파일의 고유성 확인

### 2. 코드 작성 중
- [ ] 기존 코드와의 중복 여부 확인
- [ ] 공통 로직 추출 가능성 검토
- [ ] 함수/클래스의 단일 책임 원칙 준수
- [ ] 코드 재사용성 고려

### 3. 코드 작성 후
- [ ] 전체 코드베이스와의 중복 여부 검사
- [ ] 유사한 기능의 코드 존재 여부 확인
- [ ] 리팩토링 가능성 검토
- [ ] 문서화 및 테스트 코드 작성

## 🚨 중복 위반 시 조치

### 1. 자동 차단
- **조치**: 중복 발견 시 코드 생성 자동 차단
- **메시지**: "중복 파일/함수/클래스가 발견되었습니다"
- **해결**: 기존 코드 활용 또는 명확한 구분점 제시

### 2. 해결 방안 제시
- **제시**: 구체적인 해결 방안 제시
- **옵션**: 
  1. 기존 코드 재사용
  2. 기존 코드 확장
  3. 명확한 역할 구분점 제시
  4. 리팩토링 방안 제시

### 3. 사용자 승인
- **절차**: 해결 방안 확인 후 사용자 승인
- **조건**: 사용자 승인 후에만 코드 생성 진행
- **목적**: 의도치 않은 중복 코드 생성 방지
