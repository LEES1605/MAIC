# 아키텍처 규칙 (Architecture Rules)

## 🏗️ 프로젝트 구조

### 1. 최적화된 디렉토리 구조
```
src/
├── application/     # 애플리케이션 계층
├── domain/         # 도메인 계층
├── infrastructure/ # 인프라 계층
├── services/       # 서비스 계층
├── shared/         # 공유 유틸리티
└── ui/            # UI 컴포넌트
```

### 2. 파일 배치 규칙
- **기능 코드**: `src/` 디렉토리 내에만 배치
- **UI 코드**: `src/ui/` 디렉토리에 배치
- **테스트 코드**: `tests/` 디렉토리에 배치
- **설정 파일**: 루트 또는 `config/` 디렉토리에 배치

## 📁 디렉토리별 역할

### src/application/
- **역할**: 애플리케이션 서비스, 유스케이스
- **예시**: `user_service.py`, `auth_service.py`
- **금지**: 도메인 로직, 인프라 의존성

### src/domain/
- **역할**: 비즈니스 로직, 도메인 모델
- **예시**: `user.py`, `product.py`
- **금지**: 외부 의존성, 프레임워크 코드

### src/infrastructure/
- **역할**: 외부 시스템 연동, 데이터 액세스
- **예시**: `database.py`, `api_client.py`
- **금지**: 비즈니스 로직

### src/services/
- **역할**: 공통 서비스, 헬퍼 함수
- **예시**: `email_service.py`, `file_service.py`
- **금지**: UI 로직, 도메인 로직

### src/shared/
- **역할**: 공유 유틸리티, 상수, 타입
- **예시**: `utils.py`, `constants.py`, `types.py`
- **금지**: 비즈니스 로직

### src/ui/
- **역할**: UI 컴포넌트, 프레젠테이션 로직
- **예시**: `components/`, `pages/`, `layouts/`
- **금지**: 비즈니스 로직, 데이터 액세스

## 🚫 아키텍처 위반 사항

### 1. 잘못된 파일 배치
- **위반**: `src/` 외부에 기능 코드 배치
- **위반**: `src/ui/` 외부에 UI 코드 배치
- **위반**: `tests/` 외부에 테스트 코드 배치

### 2. 계층 간 의존성 위반
- **위반**: 도메인 계층이 인프라 계층에 의존
- **위반**: 인프라 계층이 애플리케이션 계층에 의존
- **위반**: 공유 모듈이 특정 계층에 의존

### 3. 단일 책임 원칙 위반
- **위반**: 하나의 파일에 여러 책임 포함
- **위반**: 하나의 클래스에 여러 역할 부여
- **위반**: 하나의 함수에 여러 작업 수행

## ✅ 아키텍처 준수 사항

### 1. 계층별 분리
- **애플리케이션 계층**: 유스케이스, 서비스 조합
- **도메인 계층**: 비즈니스 로직, 도메인 모델
- **인프라 계층**: 외부 시스템, 데이터 액세스
- **UI 계층**: 프레젠테이션, 사용자 인터랙션

### 2. 의존성 방향
- **원칙**: 의존성은 항상 내부 계층으로만 향함
- **UI → Application → Domain ← Infrastructure**
- **공유 모듈은 모든 계층에서 사용 가능**

### 3. 모듈화
- **원칙**: 각 모듈은 단일 책임을 가짐
- **원칙**: 모듈 간 느슨한 결합 유지
- **원칙**: 인터페이스를 통한 의존성 주입

## 🔍 검증 기준

### 1. 파일 위치 검증
- [ ] 모든 기능 파일이 `src/` 내부에 위치
- [ ] UI 파일이 `src/ui/` 내부에 위치
- [ ] 테스트 파일이 `tests/` 내부에 위치
- [ ] 설정 파일이 적절한 위치에 위치

### 2. 의존성 검증
- [ ] 계층 간 의존성 방향이 올바름
- [ ] 순환 의존성이 없음
- [ ] 외부 의존성이 적절히 격리됨

### 3. 모듈화 검증
- [ ] 각 모듈이 단일 책임을 가짐
- [ ] 모듈 간 인터페이스가 명확함
- [ ] 코드 재사용성이 높음
