<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>라이크이스턴 영어전문학원</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #3a3d5c, #4a4d6c, #5a5d7c);
            color: #c1c3e0;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        .header {
            text-align: center;
            margin-top: 4rem;
            margin-bottom: 3rem;
        }
        
        .title {
            font-size: 3rem;
            font-weight: 700;
            color: #e0e0e0;
            margin-bottom: 0.5rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #8b9cf7 0%, #9d7bf0 50%, #f5a5fc 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 30px rgba(139, 156, 247, 0.4);
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #c1c3e0;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }
        
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 3rem 0;
        }
        
        .card {
            background: rgba(44, 47, 72, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 
                8px 8px 16px rgba(0, 0, 0, 0.3),
                -8px -8px 16px rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 
                12px 12px 24px rgba(0, 0, 0, 0.4),
                -12px -12px 24px rgba(255, 255, 255, 0.15);
        }
        
        .card h3 {
            font-size: 1.5rem;
            font-weight: 600;
            color: #e0e0e0;
            margin-bottom: 1rem;
        }
        
        .card p {
            color: #b0b0b0;
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }
        
        .card-button {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            border: none;
            border-radius: 15px;
            color: white;
            padding: 12px 24px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Poppins', sans-serif;
            box-shadow: 
                4px 4px 8px rgba(0, 0, 0, 0.3),
                -4px -4px 8px rgba(255, 255, 255, 0.1);
        }
        
        .card-button:hover {
            transform: translateY(-2px);
            box-shadow: 
                6px 6px 12px rgba(0, 0, 0, 0.4),
                -6px -6px 12px rgba(255, 255, 255, 0.15);
        }
        
        .input-section {
            background: rgba(58, 61, 92, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 1rem;
            margin: 1rem 0;
            box-shadow: 
                8px 8px 16px rgba(0, 0, 0, 0.3),
                -8px -8px 16px rgba(255, 255, 255, 0.1);
        }
        
        .input-section-fixed {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            background: rgba(58, 61, 92, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 1rem;
            box-shadow: 
                8px 8px 16px rgba(0, 0, 0, 0.3),
                -8px -8px 16px rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.1);
            max-width: 600px;
            width: 90%;
        }
        
        .input-group {
            display: flex;
            position: relative;
            align-items: center;
        }
        
        .question-input {
            flex: 1;
            background: rgba(44, 47, 72, 0.6);
            border: none;
            border-radius: 15px;
            padding: 15px 60px 15px 20px;
            color: #c1c3e0;
            font-size: 1rem;
            font-family: 'Poppins', sans-serif;
            box-shadow: 
                inset 4px 4px 8px rgba(0, 0, 0, 0.3),
                inset -4px -4px 8px rgba(255, 255, 255, 0.1);
        }
        
        .question-input::placeholder {
            color: white;
        }
        
        .ask-button {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            border: none;
            border-radius: 10px;
            color: white;
            padding: 8px 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Poppins', sans-serif;
            font-size: 1rem;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 
                2px 2px 4px rgba(0, 0, 0, 0.3),
                -2px -2px 4px rgba(255, 255, 255, 0.1);
        }
        
        .ask-button:hover {
            transform: translateY(-50%) scale(1.05);
            box-shadow: 
                3px 3px 6px rgba(0, 0, 0, 0.4),
                -3px -3px 6px rgba(255, 255, 255, 0.15);
        }
        
        .response-area {
            background: rgba(58, 61, 92, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 1.5rem;
            margin: 2rem 0;
            box-shadow: 
                inset 8px 8px 16px rgba(0, 0, 0, 0.3),
                inset -8px -8px 16px rgba(255, 255, 255, 0.1);
            min-height: 300px;
            max-height: calc(100dvh - 400px);
            overflow-y: auto;
            font-size: 1rem;
        }
        
        /* 커스텀 스크롤바 스타일 */
        .response-area::-webkit-scrollbar {
            width: 8px;
        }
        
        .response-area::-webkit-scrollbar-track {
            background: rgba(44, 47, 72, 0.3);
            border-radius: 10px;
        }
        
        .response-area::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .response-area::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #818cf8, #a78bfa);
        }
        
        /* Firefox용 스크롤바 스타일 */
        .response-area {
            scrollbar-width: thin;
            scrollbar-color: #6366f1 rgba(44, 47, 72, 0.3);
        }
        
        /* 관리자 모드에서 응답 영역 높이 조정 */
        .admin-mode .response-area {
            max-height: calc(100dvh - 200px);
            min-height: calc(100dvh - 250px);
        }
        
        .chat-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .chat-message {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            animation: fadeInUp 0.3s ease-out;
        }
        
        .chat-message.user {
            justify-content: flex-end;
        }
        
        .chat-message.ai {
            justify-content: flex-start;
        }
        
        .message-bubble {
            max-width: 85%;
            padding: 12px 16px;
            border-radius: 18px;
            font-size: 0.95rem;
            line-height: 1.6;
            word-wrap: break-word;
        }
        
        .message-bubble.user {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-bottom-right-radius: 4px;
        }
        
        .message-bubble.ai {
            background: linear-gradient(135deg, #ffffff, #f3f4f6);
            color: #1f2937;
            border: 1px solid rgba(209, 213, 219, 0.3);
            border-bottom-left-radius: 4px;
        }
        
        .message-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            flex-shrink: 0;
        }
        
        .message-avatar.user {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
        
        .message-avatar.ai {
            background: linear-gradient(135deg, #ffffff, #f3f4f6);
            color: #1f2937;
        }
        
        .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            text-align: center;
            font-size: 1.1rem;
            color: #c1c3e0;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        
        .status-indicator-floating {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(58, 61, 92, 0.9);
            padding: 8px 16px;
            border-radius: 20px;
            box-shadow: 
                8px 8px 16px rgba(0, 0, 0, 0.3),
                -8px -8px 16px rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .floating-login-buttons {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .pulse-dot {
            width: 10px;
            height: 10px;
            background: #ffffff;
            border-radius: 50%;
            animation: pulse 1.5s infinite;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.8), 0 0 30px rgba(255, 255, 255, 0.4);
        }
        
        .status-text {
            color: #e2e8f0;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        
        .student-login-btn {
            background: linear-gradient(135deg, #10b981, #059669);
            border: none;
            border-radius: 25px;
            color: white;
            padding: 12px 24px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Poppins', sans-serif;
            font-size: 0.9rem;
            box-shadow: 
                8px 8px 16px rgba(0, 0, 0, 0.3),
                -8px -8px 16px rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .student-login-btn:hover {
            transform: translateY(-3px);
            box-shadow: 
                12px 12px 24px rgba(0, 0, 0, 0.4),
                -12px -12px 24px rgba(255, 255, 255, 0.15),
                0 0 20px rgba(16, 185, 129, 0.3);
        }
        
        .admin-login-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            color: white;
            padding: 8px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(20px);
            box-shadow: 
                8px 8px 16px rgba(0, 0, 0, 0.3),
                -8px -8px 16px rgba(255, 255, 255, 0.1);
        }
        
        .admin-login-btn:hover {
            transform: translateY(-3px);
            background: rgba(255, 255, 255, 0.2);
            box-shadow: 
                12px 12px 24px rgba(0, 0, 0, 0.4),
                -12px -12px 24px rgba(255, 255, 255, 0.15),
                0 0 20px rgba(255, 255, 255, 0.2);
        }
        
        .mode-selector {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 5px 0;
            flex-wrap: wrap;
        }
        
        .mode-btn {
            background: rgba(58, 61, 92, 0.8);
            border: none;
            border-radius: 20px;
            color: #c1c3e0;
            padding: 8px 24px;
            box-shadow: 
                8px 8px 16px rgba(0, 0, 0, 0.3), 
                -8px -8px 16px rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
            font-weight: 500;
            font-size: 1.1rem;
        }
        
        .mode-btn:hover {
            transform: translateY(-2px);
            box-shadow: 
                12px 12px 24px rgba(0, 0, 0, 0.4), 
                -12px -12px 24px rgba(255, 255, 255, 0.15);
        }
        
        .mode-btn.active {
            background: rgba(58, 61, 92, 0.8);
            color: transparent;
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-image: linear-gradient(135deg, #8b9cf7 0%, #9d7bf0 50%, #f5a5fc 100%);
            box-shadow: 
                inset 8px 8px 16px rgba(0, 0, 0, 0.3),
                inset -8px -8px 16px rgba(255, 255, 255, 0.1);
            transform: translateY(2px);
        }
        
        .mode-btn.active:hover {
            transform: translateY(2px);
            box-shadow: 
                inset 8px 8px 16px rgba(0, 0, 0, 0.3),
                inset -8px -8px 16px rgba(255, 255, 255, 0.1);
        }
        
        @keyframes pulse {
            0% { 
                opacity: 1; 
                transform: scale(1);
                box-shadow: 0 0 15px rgba(255, 255, 255, 0.8), 0 0 30px rgba(255, 255, 255, 0.4);
            }
            50% { 
                opacity: 0.3; 
                transform: scale(1.2);
                box-shadow: 0 0 25px rgba(255, 255, 255, 1), 0 0 50px rgba(255, 255, 255, 0.6);
            }
            100% { 
                opacity: 1; 
                transform: scale(1);
                box-shadow: 0 0 15px rgba(255, 255, 255, 0.8), 0 0 30px rgba(255, 255, 255, 0.4);
            }
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
        }
        
        .modal-content {
            background: rgba(44, 47, 72, 0.95);
            backdrop-filter: blur(20px);
            margin: 15% auto;
            padding: 30px;
            border-radius: 20px;
            width: 400px;
            box-shadow: 
                8px 8px 16px rgba(0, 0, 0, 0.3),
                -8px -8px 16px rgba(255, 255, 255, 0.1);
        }
        
        .modal-title {
            color: #c1c3e0;
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .modal-input {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 15px;
            background: rgba(44, 47, 72, 0.6);
            color: #c1c3e0;
            font-size: 1rem;
            margin-bottom: 20px;
            box-shadow: 
                inset 4px 4px 8px rgba(0, 0, 0, 0.3),
                inset -4px -4px 8px rgba(255, 255, 255, 0.1);
        }
        
        .modal-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
        }
        
        .modal-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Poppins', sans-serif;
        }
        
        .modal-btn-primary {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: white;
        }
        
        .modal-btn-secondary {
            background: rgba(44, 47, 72, 0.8);
            color: #c1c3e0;
        }
        
        .modal-btn:hover {
            transform: translateY(-2px);
        }
        /* 관리자 모드 버튼 스타일 */
        .admin-mode-btn {
            background: rgba(58, 61, 92, 0.8);
            border: none;
            border-radius: 15px;
            color: #c1c3e0;
            padding: 6px 16px;
            box-shadow: 
                8px 8px 16px rgba(0, 0, 0, 0.3), 
                -8px -8px 16px rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
            font-weight: 500;
            font-size: 0.9rem;
            min-width: 70px;
        }
        
        .admin-mode-btn:hover {
            transform: translateY(-2px);
            box-shadow: 
                12px 12px 24px rgba(0, 0, 0, 0.4), 
                -12px -12px 24px rgba(255, 255, 255, 0.15);
        }
        
        .admin-mode-btn:active {
            transform: translateY(2px);
            box-shadow: 
                inset 4px 4px 8px rgba(0, 0, 0, 0.3),
                inset -4px -4px 8px rgba(255, 255, 255, 0.1);
        }
        
        .admin-mode-btn.active {
            background-image: linear-gradient(135deg, #818cf8, #a78bfa);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            box-shadow: 
                inset 4px 4px 8px rgba(0, 0, 0, 0.3),
                inset -4px -4px 8px rgba(255, 255, 255, 0.1);
            transform: translateY(2px);
        }
        
        /* 관리자 대시보드 스타일 */
        .admin-dashboard {
            padding: 2rem;
            max-width: 100%;
        }
        
        .dashboard-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .dashboard-header h2 {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }
        
        .dashboard-header p {
            color: #666;
            font-size: 1.1rem;
        }
        
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .kpi-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 20px;
            padding: 1.5rem;
            box-shadow: 
                20px 20px 60px #bebebe,
                -20px -20px 60px #ffffff;
            display: flex;
            align-items: center;
            gap: 1rem;
            transition: transform 0.3s ease;
        }
        
        .kpi-card:hover {
            transform: translateY(-5px);
        }
        
        .kpi-icon {
            font-size: 2.5rem;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            box-shadow: 
                8px 8px 16px #bebebe,
                -8px -8px 16px #ffffff;
        }
        
        .kpi-content h3 {
            margin: 0 0 0.5rem 0;
            color: #333;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .kpi-value {
            font-size: 2rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 0.25rem;
        }
        
        .kpi-subtitle {
            color: #666;
            font-size: 0.8rem;
        }
        
        .indexing-progress {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 
                20px 20px 60px #bebebe,
                -20px -20px 60px #ffffff;
        }
        
        .indexing-progress h3 {
            text-align: center;
            margin-bottom: 1.5rem;
            color: #333;
            font-size: 1.3rem;
        }
        
        .progress-steps {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .progress-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
            min-width: 120px;
        }
        
        .step-circle {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            box-shadow: 
                8px 8px 16px #bebebe,
                -8px -8px 16px #ffffff;
        }
        
        .progress-step.completed .step-circle {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
        }
        
        .step-info {
            text-align: center;
        }
        
        .step-name {
            font-weight: 500;
            color: #333;
            margin-bottom: 0.25rem;
        }
        
        .step-status {
            font-size: 0.8rem;
            color: #666;
        }
        
        /* 회원 관리 스타일 */
        .user-management {
            padding: 2rem;
        }
        
        .management-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .management-header h2 {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }
        
        .management-tools {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }
        
        .search-bar {
            display: flex;
            flex: 1;
            min-width: 300px;
        }
        
        .search-input {
            flex: 1;
            padding: 0.75rem 1rem;
            border: none;
            border-radius: 15px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            box-shadow: 
                inset 8px 8px 16px #bebebe,
                inset -8px -8px 16px #ffffff;
            font-size: 1rem;
        }
        
        .search-btn {
            padding: 0.75rem 1rem;
            border: none;
            border-radius: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            cursor: pointer;
            box-shadow: 
                8px 8px 16px #bebebe,
                -8px -8px 16px #ffffff;
        }
        
        .filter-options {
            display: flex;
            gap: 0.5rem;
        }
        
        .filter-select {
            padding: 0.75rem 1rem;
            border: none;
            border-radius: 15px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            box-shadow: 
                8px 8px 16px #bebebe,
                -8px -8px 16px #ffffff;
        }
        
        .export-btn {
            padding: 0.75rem 1rem;
            border: none;
            border-radius: 15px;
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            cursor: pointer;
            box-shadow: 
                8px 8px 16px #bebebe,
                -8px -8px 16px #ffffff;
        }
        
        .user-table {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 20px;
            padding: 1.5rem;
            box-shadow: 
                20px 20px 60px #bebebe,
                -20px -20px 60px #ffffff;
        }
        
        .table-header {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr 1fr;
            gap: 1rem;
            padding: 1rem 0;
            border-bottom: 2px solid #e0e0e0;
            font-weight: bold;
            color: #333;
        }
        
        .table-row {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr 1fr;
            gap: 1rem;
            padding: 1rem 0;
            border-bottom: 1px solid #e0e0e0;
            align-items: center;
        }
        
        .table-row:last-child {
            border-bottom: none;
        }
        
        .status-active {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.8rem;
        }
        
        .status-dormant {
            background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.8rem;
        }
        
        .action-btn {
            padding: 0.5rem;
            border: none;
            border-radius: 10px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            cursor: pointer;
            box-shadow: 
                4px 4px 8px #bebebe,
                -4px -4px 8px #ffffff;
            margin: 0 0.25rem;
        }
        
        .action-btn:hover {
            transform: translateY(-2px);
        }
        
        /* 콘텐츠 & 시스템 관리 스타일 */
        .content-system {
            padding: 2rem;
        }
        
        .system-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .system-header h2 {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }
        
        .system-sections {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        
        .system-section {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 
                20px 20px 60px #bebebe,
                -20px -20px 60px #ffffff;
        }
        
        .system-section h3 {
            margin-bottom: 1.5rem;
            color: #333;
            font-size: 1.3rem;
        }
        
        .prompt-tools, .system-tools, .data-tools {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .system-btn {
            padding: 1rem 1.5rem;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-weight: 500;
            transition: transform 0.3s ease;
            box-shadow: 
                8px 8px 16px #bebebe,
                -8px -8px 16px #ffffff;
        }
        
        .system-btn:hover {
            transform: translateY(-3px);
        }
        
        .system-btn.primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .system-btn.secondary {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
        }
        
        .system-btn.warning {
            background: linear-gradient(135deg, #ff5722 0%, #d32f2f 100%);
            color: white;
        }
        
        /* 메인 대시보드 스타일 */
        .dashboard-container {
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .dashboard-container h1 {
            text-align: center;
            margin-bottom: 1.5rem;
            font-size: 2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 700;
        }
        
        /* 시스템 모니터링 창 스타일 */
        .system-monitoring-container {
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .system-monitoring-container h1 {
            text-align: center;
            margin-bottom: 2rem;
            font-size: 2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 700;
        }
        
        .monitoring-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .monitoring-header {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        
        .monitoring-header h2 {
            margin: 0;
            font-size: 1.5rem;
            color: #333;
        }
        
        .monitoring-update-time {
            text-align: center;
            font-size: 0.9rem;
            color: white;
            margin-bottom: 1.5rem;
            opacity: 0.8;
        }
        
        .monitoring-item {
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 0.8rem;
            padding: 0.8rem 1.2rem;
            background: rgba(58, 61, 92, 0.9);
            border-radius: 20px;
            box-shadow: 
                4px 4px 8px rgba(0,0,0,0.1),
                -4px -4px 8px rgba(255,255,255,0.1);
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .monitoring-item:hover {
            transform: translateY(-2px);
            box-shadow: 
                6px 6px 12px rgba(0,0,0,0.15),
                -6px -6px 12px rgba(255,255,255,0.15);
        }
        
        .monitor-title {
            font-size: 1.1rem;
            color: #333;
            font-weight: 600;
            text-align: center;
        }
        
        .monitor-small-btn {
            background: transparent;
            border: none;
            border-radius: 10px;
            padding: 0.4rem 0.8rem;
            font-size: 0.9rem;
            color: #e2e8f0;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            flex: 1;
        }
        
        .monitor-small-btn:hover {
            color: white;
        }
        
        .monitor-small-btn:active,
        .monitor-small-btn.active {
            color: white;
            transform: translateY(1px);
        }
        
        .monitor-content {
            display: flex;
            flex-direction: column;
            gap: 0.3rem;
            flex: 1;
        }
        
        .monitor-time-display {
            font-size: 0.8rem;
            color: white;
            text-align: center;
            margin-top: 0.2rem;
        }
        
        
        .monitor-status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            position: relative;
            animation: pulse 1.5s infinite;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.8), 0 0 30px rgba(255, 255, 255, 0.4);
        }
        
        .monitor-status-dot.status-ready {
            background: #4CAF50; /* 녹색 - 정상 */
        }
        
        .monitor-status-dot.status-warning {
            background: #FFC107; /* 노란색 - 진행중 */
        }
        
        .monitor-status-dot.status-error {
            background: #F44336; /* 빨간색 - 비정상 */
        }
        
        .monitor-status-dot.status-update {
            background: #2196F3; /* 파란색 - 업데이트 필요 */
        }
        
        @keyframes pulse {
            0% { 
                opacity: 1; 
                transform: scale(1);
                box-shadow: 0 0 15px rgba(255, 255, 255, 0.8), 0 0 30px rgba(255, 255, 255, 0.4);
            }
            50% { 
                opacity: 0.3; 
                transform: scale(1.2);
                box-shadow: 0 0 25px rgba(255, 255, 255, 1), 0 0 50px rgba(255, 255, 255, 0.6);
            }
            100% { 
                opacity: 1; 
                transform: scale(1);
                box-shadow: 0 0 15px rgba(255, 255, 255, 0.8), 0 0 30px rgba(255, 255, 255, 0.4);
            }
        }
        
        .monitor-action-btn {
            background: linear-gradient(145deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 10px;
            padding: 0.6rem 1.2rem;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 
                5px 5px 10px rgba(0,0,0,0.1),
                -5px -5px 10px rgba(255,255,255,0.8);
            transition: all 0.3s ease;
        }
        
        .monitor-action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 
                7px 7px 14px rgba(0,0,0,0.15),
                -7px -7px 14px rgba(255,255,255,0.9);
        }
        
        .monitor-action-btn:active {
            transform: translateY(0);
            box-shadow: 
                inset 3px 3px 6px rgba(102, 126, 234, 0.3),
                inset -3px -3px 6px rgba(118, 75, 162, 0.3);
        }
        
        .monitor-time-display {
            font-size: 0.9rem;
            font-weight: 600;
            color: #666;
            text-align: center;
        }
        
        .progress-area {
            background: linear-gradient(145deg, #f8f8f8, #e8e8e8);
            border-radius: 20px;
            padding: 1.5rem;
            margin-top: 2rem;
            box-shadow: 
                8px 8px 16px rgba(0,0,0,0.1),
                -8px -8px 16px rgba(255,255,255,0.8);
        }
        
        .progress-area h3 {
            text-align: center;
            margin: 0 0 1rem 0;
            color: #333;
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        
        .system-monitoring-section {
            margin-bottom: 3rem;
        }
        
        .system-monitoring-section h2 {
            text-align: center;
            margin-bottom: 2rem;
            font-size: 1.8rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 700;
        }
        
        .analytics-section {
            margin-bottom: 2rem;
        }
        
        .analytics-section h2 {
            text-align: center;
            margin-bottom: 2rem;
            font-size: 1.8rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 700;
        }
        
        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .analytics-card {
            background: linear-gradient(145deg, #f8f8f8, #e8e8e8);
            border-radius: 20px;
            padding: 1.5rem;
            box-shadow: 
                4px 4px 8px rgba(0,0,0,0.05),
                -4px -4px 8px rgba(255,255,255,0.6);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .analytics-card:hover {
            transform: translateY(-1px);
            box-shadow: 
                6px 6px 12px rgba(0,0,0,0.08),
                -6px -6px 12px rgba(255,255,255,0.7);
        }
        
        .analytics-card h3 {
            margin: 0 0 1rem 0;
            color: #333;
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        /* 새로운 관리 페이지 스타일 */
        .admin-prompt-management,
        .admin-system-management,
        .admin-data-logs {
            padding: 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .admin-prompt-management h1,
        .admin-system-management h1,
        .admin-data-logs h1 {
            text-align: center;
            margin-bottom: 2rem;
            font-size: 2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 700;
        }
        
        .prompt-management-grid,
        .system-management-grid,
        .data-logs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        
        .prompt-card,
        .system-card,
        .data-card {
            background: linear-gradient(145deg, #f8f8f8, #e8e8e8);
            border-radius: 20px;
            padding: 1.5rem;
            box-shadow: 
                4px 4px 8px rgba(0,0,0,0.05),
                -4px -4px 8px rgba(255,255,255,0.6);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .prompt-card:hover,
        .system-card:hover,
        .data-card:hover {
            transform: translateY(-2px);
            box-shadow: 
                6px 6px 12px rgba(0,0,0,0.08),
                -6px -6px 12px rgba(255,255,255,0.7);
        }
        
        .prompt-card h2,
        .system-card h2,
        .data-card h2 {
            margin: 0 0 1rem 0;
            color: #333;
            font-size: 1.3rem;
            font-weight: 600;
        }
        
        .prompt-card p,
        .system-card p,
        .data-card p {
            margin: 0.5rem 0;
            color: #666;
            font-size: 0.95rem;
            line-height: 1.4;
        }
        
        /* 자동 복원 진행 바 스타일 */
        .auto-restore-container {
            padding: 2rem;
            max-width: 1000px;
            margin: 0 auto;
            text-align: center;
        }
        
        .auto-restore-container h2 {
            margin-bottom: 1rem;
            font-size: 2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 700;
        }
        
        .auto-restore-container p {
            margin-bottom: 2rem;
            color: #666;
            font-size: 1.1rem;
        }
        
        .restore-progress-bar {
            background: linear-gradient(145deg, #f8f8f8, #e8e8e8);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 
                4px 4px 8px rgba(0,0,0,0.05),
                -4px -4px 8px rgba(255,255,255,0.6);
        }
        
        .progress-steps-horizontal {
            display: flex;
            justify-content: space-between;
            margin-bottom: 2rem;
            position: relative;
        }
        
        .progress-steps-horizontal::before {
            content: '';
            position: absolute;
            top: 20px;
            left: 10%;
            right: 10%;
            height: 2px;
            background: #e0e0e0;
            z-index: 1;
        }
        
        .progress-step-horizontal {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
            flex: 1;
        }
        
        .step-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #e0e0e0;
            color: #666;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            margin-bottom: 0.5rem;
            transition: all 0.3s ease;
        }
        
        .step-label {
            font-size: 0.9rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 0.3rem;
        }
        
        .step-status {
            font-size: 0.8rem;
            color: #666;
        }
        
        .progress-step-horizontal.running .step-number {
            background: linear-gradient(145deg, #2196F3, #1565C0);
            color: white;
            animation: pulse 1.5s infinite;
        }
        
        .progress-step-horizontal.completed .step-number {
            background: linear-gradient(145deg, #4CAF50, #2E7D32);
            color: white;
        }
        
        .progress-step-horizontal.error .step-number {
            background: linear-gradient(145deg, #F44336, #C62828);
            color: white;
        }
        
        .progress-bar-container {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 1rem;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 4px;
            transition: width 0.3s ease;
            width: 0%;
        }
        
        .restore-status {
            font-size: 1.1rem;
            font-weight: 600;
            color: #333;
        }
        
        /* 복원 상태 섹션 스타일 (대시보드 내부) */
        .restore-status-section {
            background: linear-gradient(145deg, #f8f8f8, #e8e8e8);
            border-radius: 20px;
            padding: 1.5rem;
            margin: 1rem 0;
            box-shadow: 
                8px 8px 16px rgba(0,0,0,0.1),
                -8px -8px 16px rgba(255,255,255,0.7);
        }
        
        .restore-status-section h2 {
            color: #333;
            margin-bottom: 1rem;
            font-size: 1.3rem;
            font-weight: 600;
        }
        
        .restore-progress-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .restore-completed-status,
        .restore-waiting-status {
            padding: 1rem;
            background: linear-gradient(145deg, #ffffff, #f0f0f0);
            border-radius: 15px;
            box-shadow: 
                inset 2px 2px 4px rgba(0,0,0,0.1),
                inset -2px -2px 4px rgba(255,255,255,0.8);
        }
        
        .restore-status-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }
        
        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            flex-shrink: 0;
        }
        
        .status-dot.success {
            background: #4CAF50; /* 녹색 - 정상 */
            box-shadow: 0 0 10px rgba(76, 175, 80, 0.5);
        }
        
        .status-dot.waiting {
            background: #FFC107; /* 노란색 - 진행중 */
            box-shadow: 0 0 10px rgba(255, 193, 7, 0.5);
        }
        
        .restore-completion-time,
        .restore-waiting-message {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }
        
        .restore-steps-summary {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        
        .restore-step-item {
            display: flex;
            align-items: center;
            gap: 0.3rem;
            padding: 0.3rem 0.6rem;
            background: linear-gradient(145deg, #f8f8f8, #e8e8e8);
            border-radius: 8px;
            font-size: 0.8rem;
        }
        
        .step-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }
        
        .step-dot.success {
            background: #4CAF50; /* 녹색 - 정상 */
        }
        
        /* 인덱스 관리 스타일 */
        .admin-index-management {
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .index-status-section {
            margin-bottom: 2rem;
        }
        
        .index-status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1rem;
        }
        
        .status-item {
            background: linear-gradient(145deg, #f8f8f8, #e8e8e8);
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 
                4px 4px 8px rgba(0,0,0,0.05),
                -4px -4px 8px rgba(255,255,255,0.6);
        }
        
        .status-label {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 0.5rem;
        }
        
        .status-value {
            font-size: 1.5rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 0.3rem;
        }
        
        .status-detail {
            font-size: 0.8rem;
            color: #888;
        }
        
        .index-control-section {
            margin-bottom: 2rem;
        }
        
        .control-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }
        
        .admin-mode-btn.primary {
            background: linear-gradient(145deg, #4CAF50, #2E7D32);
            color: white;
        }
        
        .admin-mode-btn.secondary {
            background: linear-gradient(145deg, #2196F3, #1565C0);
            color: white;
        }
        
        .indexing-progress-area {
            margin-top: 2rem;
        }
        
        /* 인덱스 상태 정보 스타일 */
        .index-status-info {
            background: linear-gradient(145deg, #f0f0f0, #e0e0e0);
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 1rem;
            box-shadow: 
                inset 2px 2px 4px rgba(0,0,0,0.1),
                inset -2px -2px 4px rgba(255,255,255,0.5);
        }
        
        .status-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        
        .status-row:last-child {
            margin-bottom: 0;
        }
        
        .status-label {
            font-size: 0.9rem;
            color: #666;
            font-weight: 500;
        }
        
        .status-value {
            font-size: 0.9rem;
            color: #333;
            font-weight: 600;
            background: linear-gradient(145deg, #4CAF50, #2E7D32);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        /* 인덱스 컨트롤 버튼 스타일 */
        .index-control-buttons {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        /* 시스템 설정 스타일 */
        .system-settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-top: 1rem;
        }
        
        .settings-section {
            background: linear-gradient(145deg, #f5f5f5, #e5e5e5);
            border-radius: 12px;
            padding: 1.2rem;
            box-shadow: 
                3px 3px 6px rgba(0,0,0,0.1),
                -3px -3px 6px rgba(255,255,255,0.7);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .settings-section:hover {
            transform: translateY(-2px);
            box-shadow: 
                4px 4px 8px rgba(0,0,0,0.15),
                -4px -4px 8px rgba(255,255,255,0.8);
        }
        
        .settings-section h3 {
            margin: 0 0 0.5rem 0;
            color: #333;
            font-size: 1.1rem;
            font-weight: 600;
        }
        
        .settings-section p {
            margin: 0 0 1rem 0;
            color: #666;
            font-size: 0.9rem;
        }
        
        .settings-section .admin-mode-btn {
            width: 100%;
            margin: 0;
        }
        
        /* 환경 변수 관리 스타일 */
        .admin-environment-settings {
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .admin-environment-settings h1 {
            text-align: center;
            margin-bottom: 2.5rem;
        }
        
        .env-settings-container {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }
        
        .env-section {
            background: linear-gradient(145deg, #f8f8f8, #e8e8e8);
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 
                4px 4px 8px rgba(0,0,0,0.05),
                -4px -4px 8px rgba(255,255,255,0.6);
        }
        
        .env-section h2 {
            margin: 0 0 1rem 0;
            color: #333;
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        .env-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
        }
        
        .env-item {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .env-item label {
            font-size: 0.9rem;
            color: #666;
            font-weight: 500;
        }
        
        .env-input-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .env-input {
            flex: 1;
            padding: 0.7rem;
            border: none;
            border-radius: 8px;
            background: linear-gradient(145deg, #f0f0f0, #e0e0e0);
            box-shadow: 
                inset 2px 2px 4px rgba(0,0,0,0.1),
                inset -2px -2px 4px rgba(255,255,255,0.5);
            font-size: 0.9rem;
            color: #333;
        }
        
        .env-input:focus {
            outline: none;
            box-shadow: 
                inset 2px 2px 4px rgba(0,0,0,0.1),
                inset -2px -2px 4px rgba(255,255,255,0.5),
                0 0 0 2px rgba(74, 144, 226, 0.3);
        }
        
        .env-status {
            padding: 0.3rem 0.8rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
            white-space: nowrap;
        }
        
        .env-status:contains("설정됨") {
            background: linear-gradient(145deg, #4CAF50, #2E7D32);
            color: white;
        }
        
        .env-status:contains("미설정") {
            background: linear-gradient(145deg, #FFC107, #FF9800);
            color: white;
        }
        
        .env-btn {
            padding: 0.7rem 1rem;
            border: none;
            border-radius: 8px;
            background: linear-gradient(145deg, #2196F3, #1565C0);
            color: white;
            font-size: 0.8rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .env-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(33, 150, 243, 0.3);
        }
        
        .env-toggle-group {
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }
        
        .env-toggle {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        
        .env-toggle input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .env-toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(145deg, #ccc, #999);
            transition: 0.3s;
            border-radius: 24px;
        }
        
        .env-toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background: white;
            transition: 0.3s;
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .env-toggle input:checked + .env-toggle-slider {
            background: linear-gradient(145deg, #4CAF50, #2E7D32);
        }
        
        .env-toggle input:checked + .env-toggle-slider:before {
            transform: translateX(26px);
        }
        
        .env-toggle-label {
            font-size: 0.9rem;
            color: #666;
        }
        
        .env-actions {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 2rem;
            flex-wrap: wrap;
        }
        
        /* 보안 설정 스타일 */
        .admin-security-settings {
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .admin-security-settings h1 {
            text-align: center;
            margin-bottom: 2.5rem;
        }
        
        .security-settings-container {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }
        
        .security-section {
            background: linear-gradient(145deg, #f8f8f8, #e8e8e8);
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 
                4px 4px 8px rgba(0,0,0,0.05),
                -4px -4px 8px rgba(255,255,255,0.6);
        }
        
        .security-section h2 {
            margin: 0 0 1rem 0;
            color: #333;
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        .security-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
        }
        
        .security-item {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .security-item label {
            font-size: 0.9rem;
            color: #666;
            font-weight: 500;
        }
        
        .security-input-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .security-input {
            flex: 1;
            padding: 0.7rem;
            border: none;
            border-radius: 8px;
            background: linear-gradient(145deg, #f0f0f0, #e0e0e0);
            box-shadow: 
                inset 2px 2px 4px rgba(0,0,0,0.1),
                inset -2px -2px 4px rgba(255,255,255,0.5);
            font-size: 0.9rem;
            color: #333;
        }
        
        .security-input:focus {
            outline: none;
            box-shadow: 
                inset 2px 2px 4px rgba(0,0,0,0.1),
                inset -2px -2px 4px rgba(255,255,255,0.5),
                0 0 0 2px rgba(244, 67, 54, 0.3);
        }
        
        .security-unit {
            font-size: 0.8rem;
            color: #666;
            font-weight: 500;
            min-width: 30px;
        }
        
        .security-btn {
            padding: 0.7rem 1rem;
            border: none;
            border-radius: 8px;
            background: linear-gradient(145deg, #f44336, #d32f2f);
            color: white;
            font-size: 0.8rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .security-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(244, 67, 54, 0.3);
        }
        
        .security-toggle-group {
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }
        
        .security-toggle {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        
        .security-toggle input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .security-toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(145deg, #ccc, #999);
            transition: 0.3s;
            border-radius: 24px;
        }
        
        .security-toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background: white;
            transition: 0.3s;
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .security-toggle input:checked + .security-toggle-slider {
            background: linear-gradient(145deg, #f44336, #d32f2f);
        }
        
        .security-toggle input:checked + .security-toggle-slider:before {
            transform: translateX(26px);
        }
        
        .security-toggle-label {
            font-size: 0.9rem;
            color: #666;
        }
        
        .security-actions {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 2rem;
            flex-wrap: wrap;
        }
        
        /* 성능 관리 스타일 */
        .admin-performance-settings {
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .admin-performance-settings h1 {
            text-align: center;
            margin-bottom: 2.5rem;
        }
        
        .performance-settings-container {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }
        
        .performance-section {
            background: linear-gradient(145deg, #f8f8f8, #e8e8e8);
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 
                4px 4px 8px rgba(0,0,0,0.05),
                -4px -4px 8px rgba(255,255,255,0.6);
        }
        
        .performance-section h2 {
            margin: 0 0 1rem 0;
            color: #333;
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        .performance-monitoring-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }
        
        .monitoring-card {
            background: linear-gradient(145deg, #ffffff, #f0f0f0);
            border-radius: 12px;
            padding: 1rem;
            box-shadow: 
                3px 3px 6px rgba(0,0,0,0.1),
                -3px -3px 6px rgba(255,255,255,0.7);
        }
        
        .monitoring-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.8rem;
        }
        
        .monitoring-header h3 {
            margin: 0;
            font-size: 0.9rem;
            color: #666;
            font-weight: 500;
        }
        
        .monitoring-value {
            font-size: 1.1rem;
            font-weight: 600;
            color: #333;
        }
        
        .monitoring-bar {
            width: 100%;
            height: 8px;
            background: linear-gradient(145deg, #e0e0e0, #c0c0c0);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .monitoring-progress {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #2E7D32);
            border-radius: 4px;
            transition: width 0.3s ease;
        }
        
        .performance-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
        }
        
        .performance-item {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .performance-item label {
            font-size: 0.9rem;
            color: #666;
            font-weight: 500;
        }
        
        .performance-input-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .performance-input {
            flex: 1;
            padding: 0.7rem;
            border: none;
            border-radius: 8px;
            background: linear-gradient(145deg, #f0f0f0, #e0e0e0);
            box-shadow: 
                inset 2px 2px 4px rgba(0,0,0,0.1),
                inset -2px -2px 4px rgba(255,255,255,0.5);
            font-size: 0.9rem;
            color: #333;
        }
        
        .performance-input:focus {
            outline: none;
            box-shadow: 
                inset 2px 2px 4px rgba(0,0,0,0.1),
                inset -2px -2px 4px rgba(255,255,255,0.5),
                0 0 0 2px rgba(33, 150, 243, 0.3);
        }
        
        .performance-unit {
            font-size: 0.8rem;
            color: #666;
            font-weight: 500;
            min-width: 40px;
        }
        
        .performance-toggle-group {
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }
        
        .performance-toggle {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        
        .performance-toggle input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .performance-toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(145deg, #ccc, #999);
            transition: 0.3s;
            border-radius: 24px;
        }
        
        .performance-toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background: white;
            transition: 0.3s;
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .performance-toggle input:checked + .performance-toggle-slider {
            background: linear-gradient(145deg, #2196F3, #1565C0);
        }
        
        .performance-toggle input:checked + .performance-toggle-slider:before {
            transform: translateX(26px);
        }
        
        .performance-toggle-label {
            font-size: 0.9rem;
            color: #666;
        }
        
        .performance-actions {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 2rem;
            flex-wrap: wrap;
        }
        
        /* 뒤로가기 버튼 스타일 */
        .back-button {
            position: absolute;
            top: 1rem;
            left: 1rem;
            width: 50px;
            height: 50px;
            border: none;
            border-radius: 50%;
            background: linear-gradient(145deg, #f0f0f0, #e0e0e0);
            color: #666;
            font-size: 1.5rem;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 
                3px 3px 6px rgba(0,0,0,0.1),
                -3px -3px 6px rgba(255,255,255,0.7);
            transition: all 0.2s ease;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .back-button:hover {
            transform: translateY(-1px);
            box-shadow: 
                4px 4px 8px rgba(0,0,0,0.15),
                -4px -4px 8px rgba(255,255,255,0.8);
        }
        
        .back-button:active {
            transform: translateY(0);
            box-shadow: 
                inset 2px 2px 4px rgba(0,0,0,0.1),
                inset -2px -2px 4px rgba(255,255,255,0.5);
        }
        
        /* 프롬프트 관리 스타일 */
        .admin-prompt-management {
            padding: 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .admin-prompt-management h1 {
            text-align: center;
            margin-bottom: 2.5rem;
        }
        
        .prompt-version-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            gap: 1rem;
        }
        
        .version-card {
            background: linear-gradient(145deg, #f8f8f8, #e8e8e8);
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 
                3px 3px 6px rgba(0,0,0,0.1),
                -3px -3px 6px rgba(255,255,255,0.7);
            flex: 1;
        }
        
        .version-card h3 {
            margin: 0 0 1rem 0;
            color: #333;
            font-size: 1.1rem;
        }
        
        .version-details {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        .version-number {
            font-weight: 600;
            color: #4CAF50;
            font-size: 1rem;
        }
        
        .version-date {
            color: #666;
            font-size: 0.9rem;
        }
        
        .version-status {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .version-status.active {
            background: rgba(76, 175, 80, 0.1);
            color: #4CAF50;
            border: 1px solid rgba(76, 175, 80, 0.2);
        }
        
        .version-file-info {
            margin: 1rem 0;
            padding: 1rem;
            background: linear-gradient(145deg, #ffffff, #f0f0f0);
            border-radius: 8px;
            box-shadow: 
                inset 2px 2px 4px rgba(0,0,0,0.1),
                inset -2px -2px 4px rgba(255,255,255,0.5);
        }
        
        .file-status {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 0.5rem;
        }
        
        .file-status:last-child {
            margin-bottom: 0;
        }
        
        .file-label {
            font-size: 0.9rem;
            color: #666;
            font-weight: 500;
            min-width: 100px;
        }
        
        .file-name {
            font-size: 0.9rem;
            color: #333;
            font-weight: 600;
            flex: 1;
        }
        
        .pulse-dot.green {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #4CAF50;
            box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.8);
            animation: pulseGreen 2s infinite;
        }
        
        @keyframes pulseGreen {
            0%, 100% {
                box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.8);
                transform: scale(1);
            }
            50% {
                box-shadow: 0 0 0 8px rgba(76, 175, 80, 0.2);
                transform: scale(1.02);
            }
        }
        
        .version-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }
        
        .prompt-editor-container {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }
        
        .prompt-section {
            background: linear-gradient(145deg, #f8f8f8, #e8e8e8);
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 
                4px 4px 8px rgba(0,0,0,0.1),
                -4px -4px 8px rgba(255,255,255,0.7);
        }
        
        .prompt-section h3 {
            margin: 0 0 1rem 0;
            color: #333;
            font-size: 1.3rem;
            font-weight: 600;
        }
        
        .section-description {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 1.5rem;
            line-height: 1.4;
        }
        
        .prompt-textarea {
            width: 100%;
            border: none;
            border-radius: 12px;
            padding: 1rem;
            font-family: inherit;
            font-size: 0.95rem;
            line-height: 1.5;
            background: linear-gradient(145deg, #ffffff, #f0f0f0);
            box-shadow: 
                inset 2px 2px 4px rgba(0,0,0,0.1),
                inset -2px -2px 4px rgba(255,255,255,0.5);
            resize: none;
            min-height: 100px;
            overflow: hidden;
        }
        
        .prompt-textarea.large {
            min-height: 200px;
            font-size: 1rem;
            line-height: 1.6;
        }
        
        .prompt-textarea:focus {
            outline: none;
            box-shadow: 
                inset 2px 2px 4px rgba(0,0,0,0.1),
                inset -2px -2px 4px rgba(255,255,255,0.5),
                0 0 0 3px rgba(76, 175, 80, 0.2);
        }
        
        .input-stats {
            text-align: right;
            margin-top: 0.5rem;
            font-size: 0.8rem;
            color: #666;
        }
        
        .prompt-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            border-bottom: 2px solid #e0e0e0;
        }
        
        .prompt-tab {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px 8px 0 0;
            background: transparent;
            color: #666;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .prompt-tab:hover {
            background: rgba(76, 175, 80, 0.1);
            color: #4CAF50;
        }
        
        .prompt-tab.active {
            background: linear-gradient(145deg, #4CAF50, #45a049);
            color: white;
            box-shadow: 
                2px 2px 4px rgba(0,0,0,0.2),
                -2px -2px 4px rgba(255,255,255,0.3);
        }
        
        .prompt-content {
            display: none;
        }
        
        .prompt-content.active {
            display: block;
        }
        
        .prompt-content h4 {
            margin: 0 0 0.5rem 0;
            color: #333;
            font-size: 1.1rem;
        }
        
        .mode-description {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }
        
        .preview-container {
            background: linear-gradient(145deg, #ffffff, #f5f5f5);
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 
                inset 2px 2px 4px rgba(0,0,0,0.1),
                inset -2px -2px 4px rgba(255,255,255,0.5);
        }
        
        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .preview-label {
            font-weight: 600;
            color: #333;
        }
        
        .preview-content {
            min-height: 200px;
            padding: 1rem;
            background: linear-gradient(145deg, #f8f8f8, #e8e8e8);
            border-radius: 8px;
            box-shadow: 
                inset 2px 2px 4px rgba(0,0,0,0.1),
                inset -2px -2px 4px rgba(255,255,255,0.5);
        }
        
        .preview-placeholder {
            color: #999;
            font-style: italic;
            text-align: center;
            margin: 2rem 0;
        }
        
        .preview-loading {
            text-align: center;
            padding: 2rem;
        }
        
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #4CAF50;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .preview-result {
            line-height: 1.6;
        }
        
        .preview-question {
            margin-bottom: 1rem;
            padding: 0.75rem;
            background: rgba(76, 175, 80, 0.1);
            border-radius: 8px;
            border-left: 4px solid #4CAF50;
        }
        
        .preview-answer {
            padding: 0.75rem;
            background: rgba(33, 150, 243, 0.1);
            border-radius: 8px;
            border-left: 4px solid #2196F3;
        }
        
        .answer-content {
            margin-top: 0.5rem;
        }
        
        .save-deploy-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 2rem;
        }
        
        .save-actions {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        .admin-mode-btn.primary {
            background: linear-gradient(145deg, #4CAF50, #45a049);
            color: white;
            box-shadow: 
                3px 3px 6px rgba(0,0,0,0.2),
                -3px -3px 6px rgba(255,255,255,0.3);
        }
        
        .admin-mode-btn.primary:hover {
            background: linear-gradient(145deg, #45a049, #3d8b40);
            transform: translateY(-1px);
        }
        
        .btn-icon {
            margin-right: 0.5rem;
        }
        
        /* 검증 버튼 펄스 효과 */
        .admin-mode-btn.validating {
            position: relative;
            overflow: hidden;
        }
        
        .admin-mode-btn.validating::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: validateShimmer 1.5s infinite;
        }
        
        @keyframes validateShimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .section-header-with-status {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .section-header-with-status h3 {
            margin: 0;
        }
        
        .save-status-inline {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: linear-gradient(145deg, #ffffff, #f0f0f0);
            border-radius: 20px;
            box-shadow: 
                inset 2px 2px 4px rgba(0,0,0,0.1),
                inset -2px -2px 4px rgba(255,255,255,0.5);
        }
        
        .save-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 1rem;
            padding: 1rem;
            background: linear-gradient(145deg, #ffffff, #f0f0f0);
            border-radius: 12px;
            box-shadow: 
                inset 2px 2px 4px rgba(0,0,0,0.1),
                inset -2px -2px 4px rgba(255,255,255,0.5);
        }
        
        .status-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #ccc;
            transition: all 0.3s ease;
        }
        
        .status-dot.saving {
            background: #ff9800;
            animation: pulseOrange 1.5s infinite;
        }
        
        .status-dot.uploading {
            background: #2196F3;
            animation: pulseBlue 1.5s infinite;
        }
        
        .status-dot.completed {
            background: #4CAF50;
            animation: pulseGreen 1.5s infinite;
        }
        
        @keyframes pulseOrange {
            0%, 100% {
                box-shadow: 0 0 0 0 rgba(255, 152, 0, 0.8);
                transform: scale(1);
            }
            50% {
                box-shadow: 0 0 0 8px rgba(255, 152, 0, 0.2);
                transform: scale(1.02);
            }
        }
        
        @keyframes pulseBlue {
            0%, 100% {
                box-shadow: 0 0 0 0 rgba(33, 150, 243, 0.8);
                transform: scale(1);
            }
            50% {
                box-shadow: 0 0 0 8px rgba(33, 150, 243, 0.2);
                transform: scale(1.02);
            }
        }
        
        @keyframes pulseGreen {
            0%, 100% {
                box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.8);
                transform: scale(1);
            }
            50% {
                box-shadow: 0 0 0 8px rgba(76, 175, 80, 0.2);
                transform: scale(1.02);
            }
        }
        
        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #ccc;
            transition: all 0.3s ease;
        }
        
        .status-dot.saving {
            background: #ffa726;
            animation: pulse 1.5s infinite;
        }
        
        .status-dot.uploading {
            background: #2196F3;
            animation: pulse 1.5s infinite;
        }
        
        .status-dot.success {
            background: #4CAF50;
        }
        
        .status-text {
            font-size: 0.9rem;
            color: #666;
            font-weight: 500;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        /* 데이터 & 로그 스타일 */
        .admin-data-logs {
            padding: 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .admin-data-logs h1 {
            text-align: center;
            margin-bottom: 2.5rem;
        }
        
        .data-logs-container {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }
        
        .logs-filter {
            display: flex;
            justify-content: center;
            gap: 2rem;
            padding: 1.5rem;
            background: linear-gradient(145deg, #f8f8f8, #e8e8e8);
            border-radius: 15px;
            box-shadow: 
                4px 4px 8px rgba(0,0,0,0.05),
                -4px -4px 8px rgba(255,255,255,0.6);
            flex-wrap: wrap;
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            min-width: 150px;
        }
        
        .filter-group label {
            font-size: 0.9rem;
            color: #666;
            font-weight: 500;
        }
        
        .filter-group select {
            padding: 0.7rem;
            border: none;
            border-radius: 8px;
            background: linear-gradient(145deg, #f0f0f0, #e0e0e0);
            box-shadow: 
                inset 2px 2px 4px rgba(0,0,0,0.1),
                inset -2px -2px 4px rgba(255,255,255,0.5);
            font-size: 0.9rem;
            color: #333;
        }
        
        .logs-section {
            background: linear-gradient(145deg, #f8f8f8, #e8e8e8);
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 
                4px 4px 8px rgba(0,0,0,0.05),
                -4px -4px 8px rgba(255,255,255,0.6);
        }
        
        .logs-section h2 {
            margin: 0 0 1rem 0;
            color: #333;
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        .log-stream-container {
            background: linear-gradient(145deg, #ffffff, #f0f0f0);
            border-radius: 12px;
            padding: 1rem;
            box-shadow: 
                3px 3px 6px rgba(0,0,0,0.1),
                -3px -3px 6px rgba(255,255,255,0.7);
        }
        
        .log-stream-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .log-stream-header span {
            font-size: 0.9rem;
            color: #666;
            font-weight: 500;
        }
        
        .stream-toggle {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 8px;
            background: linear-gradient(145deg, #2196F3, #1565C0);
            color: white;
            font-size: 0.8rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .stream-toggle:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(33, 150, 243, 0.3);
        }
        
        .log-stream {
            height: 300px;
            overflow-y: auto;
            background: #1a1a1a;
            border-radius: 8px;
            padding: 1rem;
            font-family: 'Courier New', monospace;
            font-size: 0.8rem;
            line-height: 1.4;
        }
        
        .log-entry {
            margin-bottom: 0.5rem;
            padding: 0.3rem 0;
            border-bottom: 1px solid #333;
        }
        
        .log-entry.info {
            color: #4CAF50;
        }
        
        .log-entry.warn {
            color: #FF9800;
        }
        
        .log-entry.error {
            color: #f44336;
        }
        
        .log-entry.critical {
            color: #E91E63;
            font-weight: bold;
        }
        
        .logs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
        }
        
        .log-card {
            background: linear-gradient(145deg, #ffffff, #f0f0f0);
            border-radius: 12px;
            padding: 1.2rem;
            box-shadow: 
                3px 3px 6px rgba(0,0,0,0.1),
                -3px -3px 6px rgba(255,255,255,0.7);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .log-card:hover {
            transform: translateY(-2px);
            box-shadow: 
                4px 4px 8px rgba(0,0,0,0.15),
                -4px -4px 8px rgba(255,255,255,0.8);
        }
        
        .log-card.error {
            border-left: 4px solid #f44336;
        }
        
        .log-card.warning {
            border-left: 4px solid #FF9800;
        }
        
        .log-card.info {
            border-left: 4px solid #2196F3;
        }
        
        .log-card h3 {
            margin: 0 0 1rem 0;
            color: #333;
            font-size: 1.1rem;
            font-weight: 600;
        }
        
        .log-content {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .log-content p {
            margin: 0;
            font-size: 0.9rem;
            color: #666;
        }
        
        .status-success {
            color: #4CAF50;
            font-weight: 600;
        }
        
        .status-resolved {
            color: #2196F3;
            font-weight: 600;
        }
        
        .status-monitoring {
            color: #FF9800;
            font-weight: 600;
        }
        
        .logs-actions {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 2rem;
            flex-wrap: wrap;
        }
        
        /* 질문모드 관리 스타일 */
        .admin-question-mode {
            padding: 1.5rem;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .admin-question-mode h1 {
            color: #333;
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 700;
            text-align: center;
        }
        
        .question-mode-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .question-mode-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            background: linear-gradient(145deg, #f8f8f8, #e8e8e8);
            border-radius: 15px;
            padding: 1rem 1.5rem;
            box-shadow: 
                4px 4px 8px rgba(0,0,0,0.1),
                -4px -4px 8px rgba(255,255,255,0.7);
        }
        
        .question-mode-title {
            flex: 1;
            font-size: 1.1rem;
            font-weight: 600;
            color: #333;
        }
        
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 28px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
            box-shadow: inset 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
            box-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        input:checked + .toggle-slider {
            background-color: #667eea;
        }
        
        input:checked + .toggle-slider:before {
            transform: translateX(22px);
        }
        
        .toggle-label {
            font-weight: 600;
            color: #333;
            font-size: 0.9rem;
            min-width: 50px;
            text-align: right;
        }
        
        
        /* 비활성화된 모드 버튼 스타일 */
        .mode-btn.disabled {
            background: linear-gradient(145deg, #d1d5db, #9ca3af) !important;
            color: #6b7280 !important;
            cursor: not-allowed !important;
            opacity: 0.5 !important;
            pointer-events: none !important;
            box-shadow: 
                inset 2px 2px 4px rgba(0,0,0,0.1),
                inset -2px -2px 4px rgba(255,255,255,0.1) !important;
        }
        
        .mode-btn.disabled:hover {
            transform: none !important;
            background: linear-gradient(145deg, #d1d5db, #9ca3af) !important;
            color: #6b7280 !important;
            box-shadow: 
                inset 2px 2px 4px rgba(0,0,0,0.1),
                inset -2px -2px 4px rgba(255,255,255,0.1) !important;
        }
        
        .mode-btn.disabled:active {
            transform: none !important;
            background: linear-gradient(145deg, #d1d5db, #9ca3af) !important;
            color: #6b7280 !important;
            box-shadow: 
                inset 2px 2px 4px rgba(0,0,0,0.1),
                inset -2px -2px 4px rgba(255,255,255,0.1) !important;
        }
        
        /* 복원 옵션 스타일 */
        .restore-options-container {
            padding: 2rem;
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }
        
        /* 복원 결과 섹션 스타일 */
        .restore-result-section {
            background: linear-gradient(145deg, #f8f8f8, #e8e8e8);
            border-radius: 20px;
            padding: 1.5rem;
            margin: 1rem 0;
            box-shadow: 
                8px 8px 16px rgba(0,0,0,0.1),
                -8px -8px 16px rgba(255,255,255,0.7);
        }
        
        .restore-result-section h2 {
            color: #333;
            margin-bottom: 1rem;
            font-size: 1.3rem;
            font-weight: 600;
        }
        
        .restore-result-container {
            display: flex;
            flex-direction: row;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        .restore-result-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.8rem 1.2rem;
            background: linear-gradient(145deg, #ffffff, #f0f0f0);
            border-radius: 12px;
            box-shadow: 
                inset 2px 2px 4px rgba(0,0,0,0.1),
                inset -2px -2px 4px rgba(255,255,255,0.8);
            min-width: 120px;
        }
        
        .restore-result-status {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            flex-shrink: 0;
        }
        
        .restore-result-status.success {
            background: #10b981;
            box-shadow: 0 0 10px rgba(16, 185, 129, 0.5);
        }
        
        .restore-result-status.error {
            background: #ef4444;
            box-shadow: 0 0 10px rgba(239, 68, 68, 0.5);
        }
        
        .restore-result-status.warning {
            background: #f59e0b;
            box-shadow: 0 0 10px rgba(245, 158, 11, 0.5);
        }
        
        .restore-result-text {
            flex: 1;
            color: #333;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .restore-result-time {
            color: #666;
            font-size: 0.75rem;
        }
        
        .restore-options-container h2 {
            margin-bottom: 1rem;
            font-size: 2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 700;
        }
        
        .restore-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }
        
        .restore-option-card {
            background: linear-gradient(145deg, #f8f8f8, #e8e8e8);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 
                4px 4px 8px rgba(0,0,0,0.05),
                -4px -4px 8px rgba(255,255,255,0.6);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }
        
        .restore-option-card:hover {
            transform: translateY(-3px);
            box-shadow: 
                6px 6px 12px rgba(0,0,0,0.08),
                -6px -6px 12px rgba(255,255,255,0.7);
        }
        
        .option-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }
        
        .restore-option-card h3 {
            margin: 0 0 1rem 0;
            color: #333;
            font-size: 1.3rem;
            font-weight: 600;
        }
        
        .restore-option-card p {
            margin: 0 0 1rem 0;
            color: #666;
            font-size: 0.95rem;
            line-height: 1.4;
        }
        
        .option-status {
            font-size: 0.9rem;
            color: #888;
            font-style: italic;
        }
        
        .progress-steps {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .progress-step {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: linear-gradient(145deg, #ffffff, #f0f0f0);
            border-radius: 15px;
            box-shadow: 
                inset 3px 3px 6px rgba(0,0,0,0.1),
                inset -3px -3px 6px rgba(255,255,255,0.8);
        }
        
        .step-dot {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            position: relative;
        }
        
        .step-dot.pending {
            background: #e0e0e0;
            box-shadow: inset 2px 2px 4px #d0d0d0, inset -2px -2px 4px #f0f0f0;
        }
        
        .step-dot.running {
            background: #FFC107; /* 노란색 - 진행중 */
            animation: pulse 1.5s infinite;
            box-shadow: 
                0 0 8px rgba(255, 193, 7, 0.5),
                0 0 16px rgba(255, 193, 7, 0.3);
        }
        
        .step-dot.completed {
            background: #4CAF50; /* 녹색 - 정상 */
            box-shadow: 
                0 0 8px rgba(76, 175, 80, 0.5),
                0 0 16px rgba(76, 175, 80, 0.3);
        }
        
        .step-dot.error {
            background: #F44336; /* 빨간색 - 비정상 */
            box-shadow: 
                0 0 8px rgba(244, 67, 54, 0.5),
                0 0 16px rgba(244, 67, 54, 0.3);
        }
        
        .step-info {
            flex: 1;
        }
        
        .step-name {
            font-size: 1rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 0.2rem;
        }
        
        .step-status {
            font-size: 0.9rem;
            color: #666;
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        .dashboard-column {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .dashboard-card {
            background: linear-gradient(145deg, #f8f8f8, #e8e8e8);
            border-radius: 20px;
            padding: 1.5rem;
            box-shadow: 
                4px 4px 8px rgba(0,0,0,0.05),
                -4px -4px 8px rgba(255,255,255,0.6);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .dashboard-card:hover {
            transform: translateY(-1px);
            box-shadow: 
                6px 6px 12px rgba(0,0,0,0.08),
                -6px -6px 12px rgba(255,255,255,0.7);
        }
        
        .dashboard-card h2 {
            margin: 0 0 1rem 0;
            color: #333;
            font-size: 1.2rem;
            font-weight: 600;
            text-align: center;
        }
        
        .chart-container {
            width: 100%;
            height: 250px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(145deg, #ffffff, #e6e6e6);
            border-radius: 15px;
            box-shadow: inset 8px 8px 16px #d1d1d1, inset -8px -8px 16px #ffffff;
            margin-top: 1rem;
        }
        
        .chart-placeholder {
            text-align: center;
            color: #666;
            font-size: 1rem;
        }
        
        .chart-placeholder .chart-icon {
            font-size: 3rem;
            margin-bottom: 0.5rem;
            display: block;
        }
        
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .kpi-card {
            background: linear-gradient(145deg, #ffffff, #e6e6e6);
            border-radius: 15px;
            padding: 1rem;
            text-align: center;
            box-shadow: inset 5px 5px 10px #d1d1d1, inset -5px -5px 10px #ffffff;
        }
        
        .kpi-value {
            font-size: 2rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 0.5rem;
        }
        
        .kpi-label {
            font-size: 0.9rem;
            color: #666;
            font-weight: 500;
        }
        
        /* 차트 시각화 스타일 */
        .chart-visual {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
        }
        
        .pie-chart {
            position: relative;
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: conic-gradient(
                #4CAF50 0deg 162deg,
                #2196F3 162deg 270deg,
                #FF9800 270deg 360deg
            );
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .pie-chart::before {
            content: '';
            position: absolute;
            width: 60px;
            height: 60px;
            background: linear-gradient(145deg, #ffffff, #e6e6e6);
            border-radius: 50%;
            box-shadow: inset 3px 3px 6px #d1d1d1, inset -3px -3px 6px #ffffff;
        }
        
        .pie-chart-center {
            position: relative;
            z-index: 1;
            font-size: 0.8rem;
            font-weight: 600;
            color: #333;
            text-align: center;
        }
        
        .chart-legend {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            font-size: 0.9rem;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        
        .legend-color.grammar { background: #4CAF50; }
        .legend-color.reading { background: #2196F3; }
        .legend-color.writing { background: #FF9800; }
        
        .progress-ring {
            position: relative;
            width: 100px;
            height: 100px;
        }
        
        .progress-ring svg {
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }
        
        .progress-ring circle {
            fill: none;
            stroke-width: 8;
        }
        
        .progress-ring .background {
            stroke: #e0e0e0;
        }
        
        .progress-ring .progress {
            stroke: #4CAF50;
            stroke-linecap: round;
            transition: stroke-dasharray 0.3s ease;
        }
        
        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.2rem;
            font-weight: 700;
            color: #333;
        }
        
        .line-chart {
            position: relative;
            width: 100%;
            height: 80px;
            background: linear-gradient(145deg, #ffffff, #e6e6e6);
            border-radius: 10px;
            padding: 0.5rem;
            box-shadow: inset 3px 3px 6px #d1d1d1, inset -3px -3px 6px #ffffff;
        }
        
        .line-chart svg {
            width: 100%;
            height: 100%;
        }
        
        .line-chart .line {
            fill: none;
            stroke: #2196F3;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
        }
        
        .line-chart .area {
            fill: url(#gradient);
            opacity: 0.3;
        }
        
        /* 반응형 디자인 */
        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .dashboard-container {
                padding: 1rem;
            }
            
            .dashboard-container h1 {
                font-size: 1.5rem;
            }
            
            .monitoring-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
            }
            
            .analytics-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .monitoring-item {
                padding: 0.6rem;
                gap: 0.5rem;
            }
            
            .monitor-small-btn {
                font-size: 0.8rem;
                padding: 0.3rem 0.6rem;
            }
            
            .monitoring-header {
                text-align: center;
            }
            
            .monitoring-update-time {
                font-size: 0.8rem;
                margin-bottom: 1rem;
            }
            
            .kpi-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .pie-chart {
                width: 100px;
                height: 100px;
            }
            
            .pie-chart::before {
                width: 50px;
                height: 50px;
            }
        }
        
    </style>
</head>
<body>
    <div class="container">
        <!-- 상태 표시창 (배경에 고정) -->
        <div class="status-indicator-floating">
            <div class="pulse-dot"></div>
            <span class="status-text">준비완료</span>
        </div>
        
         <!-- 플로팅 로그인 버튼들 -->
         <div class="floating-login-buttons" id="login-buttons">
             <button class="student-login-btn" onclick="studentLogin()">로그인</button>
             <button class="admin-login-btn" id="admin-login-btn" title="관리자 로그인" onclick="adminLogin()">⚙️</button>
         </div>
         
         <!-- 관리자 모드 로그아웃 버튼 (숨김) -->
         <div class="floating-login-buttons" id="admin-logout-buttons" style="display: none;">
             <button class="admin-login-btn" title="관리자 로그아웃" onclick="adminLogout()">🚪</button>
         </div>
        
        
        <!-- 헤더 -->
        <div class="header">
            <h1 class="title gradient-text">LEES AI Teacher</h1>
            <p class="subtitle">질문은 천재들이 즐겨쓰는 공부방법이다!</p>
        </div>
        
        <!-- 모드 선택 -->
        <div class="input-section">
            <h3 style="color: #c1c3e0; margin-bottom: 20px; font-weight: 600; font-size: 1.2rem; text-align: center;">
                질문 모드 선택
            </h3>
            <div class="mode-selector">
                <button class="mode-btn" onclick="selectMode('grammar', this)">문법 학습</button>
                <button class="mode-btn" onclick="selectMode('sentence', this)">문장 분석</button>
                <button class="mode-btn" onclick="selectMode('passage', this)">지문 설명</button>
            </div>
        </div>
        
        <!-- 응답 영역 -->
        <div class="response-area" id="response-area">
            <div class="empty-state">
                💬 아직 질문이 없습니다. 아래에서 질문을 입력해보세요!
            </div>
        </div>
        
    </div>
    
    <!-- 질문하기 섹션 (고정) -->
    <div class="input-section-fixed">
        <div class="input-group">
            <input type="text" id="question-input" class="question-input" placeholder="질문을 입력하세요...">
            <button class="ask-button" onclick="askQuestion()">▶</button>
        </div>
    </div>
    
    <!-- 관리자 로그인 모달 -->
    <div id="passwordModal" class="modal">
        <div class="modal-content">
            <h2 class="modal-title">관리자 로그인</h2>
            <input type="password" id="adminPassword" class="modal-input" placeholder="비밀번호를 입력하세요">
            <div class="modal-buttons">
                <button class="modal-btn modal-btn-primary" id="modal-login-btn" onclick="checkPassword()">로그인</button>
                <button class="modal-btn modal-btn-secondary" id="modal-cancel-btn" onclick="closeModal()">취소</button>
            </div>
        </div>
    </div>
    
    <script>
        console.log('JavaScript 시작됨');
        
        let currentMode = null;
        let isAdminMode = false;
        
        // 전역 함수 정의 확인
        console.log('전역 함수 정의 시작...');
        
        // 모드 선택 (전역 함수)
        window.selectMode = function(mode, button) {
            console.log('selectMode 함수 호출됨:', mode);
            
            // 비활성화된 모드인지 확인
            if (button && button.classList.contains('disabled')) {
                console.log('비활성화된 모드입니다:', mode);
                return;
            }
            
            // 모든 버튼에서 active 클래스 제거
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            // 클릭된 버튼에 active 클래스 추가
            if (button) {
                button.classList.add('active');
            }
            currentMode = mode;
            console.log('선택된 모드:', mode);
            
            // 사용자 활동 추적
            trackUserActivity('mode_selection', { 
                mode: mode, 
                timestamp: new Date().toISOString() 
            });
        }
        
        // 모드 시작 (카드 버튼 제거로 인해 함수 단순화)
        function startMode(mode) {
            selectMode(mode, document.querySelector(`[onclick="selectMode('${mode}', this)"]`));
            document.getElementById('question-input').focus();
        }
        
        // 질문하기 (전역 함수)
        window.askQuestion = function() {
            console.log('askQuestion 함수 호출됨');
            const question = document.getElementById('question-input').value;
            if (!question.trim()) {
                alert('질문을 입력해주세요!');
                return;
            }
            if (!currentMode) {
                alert('학습 모드를 먼저 선택해주세요!');
                return;
            }
            
            // 사용자 활동 추적
            trackUserActivity('question_asked', { 
                mode: currentMode, 
                question: question.substring(0, 50) + (question.length > 50 ? '...' : ''),
                timestamp: new Date().toISOString() 
            });
            
            // 채팅 메시지 추가
            addChatMessage('user', question);
            
            // MAIC 모드별 응답 생성
            const response = generateMAICResponse(currentMode, question);
            
            // AI 응답을 약간의 딜레이 후 추가 (타이핑 효과)
            setTimeout(() => {
                addChatMessage('ai', response);
            }, 500);
            
            // 입력창 초기화
            document.getElementById('question-input').value = '';
        }
        
        // 채팅 메시지 추가 함수
        function addChatMessage(sender, message) {
            const responseArea = document.getElementById('response-area');
            
            // 첫 번째 메시지인 경우 empty-state 제거
            if (responseArea.querySelector('.empty-state')) {
                responseArea.innerHTML = '<div class="chat-container"></div>';
            }
            
            const chatContainer = responseArea.querySelector('.chat-container');
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message ${sender}`;
            
            const avatar = document.createElement('div');
            avatar.className = `message-avatar ${sender}`;
            avatar.textContent = sender === 'user' ? '👤' : '🎓';
            
            const bubble = document.createElement('div');
            bubble.className = `message-bubble ${sender}`;
            bubble.textContent = message;
            
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(bubble);
            chatContainer.appendChild(messageDiv);
            
            // 스크롤을 맨 아래로
            responseArea.scrollTop = responseArea.scrollHeight;
        }
        
        // MAIC 응답 생성 (실제 MAIC 로직 시뮬레이션)
        function generateMAICResponse(mode, question) {
            const modeNames = {
                'grammar': '문법 학습',
                'sentence': '문장 분석',
                'passage': '지문 설명'
            };
            
            const responses = {
                'grammar': `**모드**: ${modeNames[mode]}
**라벨**: [AI지식]

**생성된 프롬프트**:
# 문법설명 — 문법학습

**모드**: grammar  |  **라벨**: [AI지식]

## 질의
${question}

## 의도/목표
핵심 규칙과 예외를 단계적으로 설명

## 출력 스키마(섹션 순서 고정)
1. 핵심 규칙
2. 근거/출처
3. 예문
4. 역예문(선택)
5. 한 줄 요약

> 위 스키마를 **순서대로** 준수하고, 각 섹션은 간결한 소제목으로 시작하세요.

**섹션 순서**:
1. 핵심 규칙
2. 근거/출처
3. 예문
4. 역예문(선택)
5. 한 줄 요약

**컨텍스트 조각 수**: 0`,
                
                'sentence': `**모드**: ${modeNames[mode]}
**라벨**: [AI지식]

**생성된 프롬프트**:
# 문장분석 — 문장분석

**모드**: sentence  |  **라벨**: [AI지식]

## 질의
${question}

## 의도/목표
문장 구조(S/V/O, 수식어, 절·구문)를 "괄호 규칙"과 "괄호 규칙 라벨 표준"에 따라 설명

## 괄호 규칙 라벨 표준
라벨: [S 주어] [V 동사] [O 목적어] [C 보어] [M 부가]
예시: [S I] [V stayed] [M at home]

## 출력 스키마(섹션 순서 고정)
1. 원문
2. 구조 분석(괄호 규칙)
3. 어휘·표현
4. 해석
5. 요약
6. 근거/출처

> 위 스키마를 **순서대로** 준수하고, 각 섹션은 간결한 소제목으로 시작하세요.

**섹션 순서**:
1. 원문
2. 구조 분석(괄호 규칙)
3. 어휘·표현
4. 해석
5. 요약
6. 근거/출처

**컨텍스트 조각 수**: 0`,
                
                'passage': `**모드**: ${modeNames[mode]}
**라벨**: [AI지식]

**생성된 프롬프트**:
# 지문설명 — 지문설명

**모드**: passage  |  **라벨**: [AI지식]

## 질의
${question}

## 의도/목표
지문의 핵심 요지를 쉬운 예시로 설명하고 주제/제목을 정리

## 출력 스키마(섹션 순서 고정)
1. 요지/주제
2. 쉬운 예시/비유
3. 제목
4. 오답 포인트(선택)
5. 근거/출처

> 위 스키마를 **순서대로** 준수하고, 각 섹션은 간결한 소제목으로 시작하세요.

**섹션 순서**:
1. 요지/주제
2. 쉬운 예시/비유
3. 제목
4. 오답 포인트(선택)
5. 근거/출처

**컨텍스트 조각 수**: 0`
            };
            
            return responses[mode] || '알 수 없는 모드입니다.';
        }
        
        // 학생 로그인 (전역 함수)
        window.studentLogin = function() {
            alert('학생 로그인 기능이 곧 추가될 예정입니다!');
        }
        
        // 관리자 로그인 (전역 함수)
        window.adminLogin = function() {
            console.log('adminLogin 함수 호출됨');
            const modal = document.getElementById('passwordModal');
            console.log('모달 요소:', modal);
            if (modal) {
                modal.style.display = 'block';
                console.log('모달 display 설정됨:', modal.style.display);
                document.getElementById('adminPassword').focus();
            } else {
                console.log('모달 요소를 찾을 수 없음');
            }
        }
        
        // 모달 닫기 (전역 함수)
        window.closeModal = function() {
            document.getElementById('passwordModal').style.display = 'none';
            document.getElementById('adminPassword').value = '';
        }
        
        // 비밀번호 확인 (전역 함수)
        window.checkPassword = function() {
            const password = document.getElementById('adminPassword').value;
            if (password === 'admin123') {
                isAdminMode = true;
                closeModal();
                alert('관리자 모드로 진입했습니다!');
                showAdminMode();
                
                // 관리자 모드 진입 후 자동 복원 실행
                setTimeout(() => {
                    startAutoRestore();
                }, 1000);
            } else {
                alert('비밀번호가 틀렸습니다!');
            }
        }
        
         // 관리자 모드 표시
         function showAdminMode() {
             // 상태 표시기를 관리자 모드로 변경
             const statusText = document.querySelector('.status-text');
             if (statusText) {
                 statusText.textContent = '관리자 모드';
             }
             
             // 헤더 제목 변경
             const title = document.querySelector('.title');
             if (title) {
                 title.innerHTML = 'LEES 관리자패널';
             }
             
            // 모드 선택 영역을 관리자 모드로 변경
            const modeSelectorTitle = document.querySelector('.input-section h3');
            if (modeSelectorTitle) {
                modeSelectorTitle.textContent = '관리 기능';
            }
             
            const modeSelectorContainer = document.querySelector('.mode-selector');
            if (modeSelectorContainer) {
                modeSelectorContainer.innerHTML = `
                    <button class="mode-btn admin-mode-btn" data-action="auto-restore">자동복원</button>
                    <button class="mode-btn admin-mode-btn" data-action="dashboard">대시보드</button>
                    <button class="mode-btn admin-mode-btn" data-action="question-mode">질문모드</button>
                    <button class="mode-btn admin-mode-btn" data-action="user-management">회원관리</button>
                    <button class="mode-btn admin-mode-btn" data-action="prompt-management">프롬프트</button>
                    <button class="mode-btn admin-mode-btn" data-action="system-management">시스템</button>
                    <button class="mode-btn admin-mode-btn" data-action="data-logs">데이터&로그</button>
                `;
                 
                 // 관리자 버튼들에 이벤트 리스너 추가
                 const adminBtns = modeSelectorContainer.querySelectorAll('.admin-mode-btn');
                 adminBtns.forEach(btn => {
                     const action = btn.getAttribute('data-action');
                    btn.addEventListener('click', () => {
                        // 모든 관리자 버튼에서 active 클래스 제거
                        const allAdminBtns = document.querySelectorAll('.admin-mode-btn');
                        allAdminBtns.forEach(adminBtn => adminBtn.classList.remove('active'));
                        
                        // 클릭된 버튼에 active 클래스 추가 (음각 효과)
                        btn.classList.add('active');
                        
                        // 해당 액션 실행
                        if (action === 'auto-restore') showAutoRestore();
                        else if (action === 'dashboard') adminDashboard();
                        else if (action === 'question-mode') showQuestionMode();
                        else if (action === 'user-management') adminUserManagement();
                        else if (action === 'prompt-management') showPromptManagement();
                        else if (action === 'system-management') showSystemManagement();
                        else if (action === 'data-logs') showDataLogs();
                    });
                 });
             }
             
            // 로그인 버튼을 로그아웃 버튼으로 변경
            document.getElementById('login-buttons').style.display = 'none';
            document.getElementById('admin-logout-buttons').style.display = 'flex';
            
            // 질문 입력칸 숨기기
            const inputSection = document.querySelector('.input-section-fixed');
            if (inputSection) {
                inputSection.style.display = 'none';
            }
            
            // body에 관리자 모드 클래스 추가
            document.body.classList.add('admin-mode');
            
            // 관리자 대시보드 표시
            showAdminDashboard();
            
            // 자동복원 버튼을 기본 활성화
            setTimeout(() => {
                setActiveAdminButton('자동복원');
                // 자동복원 버튼에 active 클래스 추가
                const autoRestoreBtn = document.querySelector('[data-action="auto-restore"]');
                if (autoRestoreBtn) {
                    autoRestoreBtn.classList.add('active');
                }
                
                // 자동복원 표시
                showAutoRestore();
            }, 100);
         }
        
         // 일반 모드로 돌아가기
         function showUserMode() {
             isAdminMode = false;
             
             // 상태 표시기를 일반 모드로 변경
             const statusText = document.querySelector('.status-text');
             if (statusText) {
                 statusText.textContent = '준비완료';
             }
             
             // 헤더 제목 변경
             const title = document.querySelector('.title');
             if (title) {
                 title.innerHTML = 'LEES AI Teacher';
             }
             
             // 모드 선택 영역을 일반 모드로 변경
             const modeSelectorTitle = document.querySelector('.input-section h3');
             if (modeSelectorTitle) {
                 modeSelectorTitle.textContent = '질문 모드 선택';
             }
             
             const modeSelectorContainer = document.querySelector('.mode-selector');
             if (modeSelectorContainer) {
                 modeSelectorContainer.innerHTML = `
                     <button class="mode-btn">문법 학습</button>
                     <button class="mode-btn">문장 분석</button>
                     <button class="mode-btn">지문 설명</button>
                 `;
                 
                 // 일반 모드 버튼들에 이벤트 리스너 추가
                 const userBtns = modeSelectorContainer.querySelectorAll('.mode-btn');
                 userBtns.forEach(btn => {
                     if (btn.textContent.includes('문법')) {
                         btn.addEventListener('click', () => selectMode('grammar', btn));
                     } else if (btn.textContent.includes('문장')) {
                         btn.addEventListener('click', () => selectMode('sentence', btn));
                     } else if (btn.textContent.includes('지문')) {
                         btn.addEventListener('click', () => selectMode('passage', btn));
                     }
                 });
             }
             
            // 로그아웃 버튼을 로그인 버튼으로 변경
            document.getElementById('login-buttons').style.display = 'flex';
            document.getElementById('admin-logout-buttons').style.display = 'none';
            
            // 질문 입력칸 다시 보이기
            const inputSection = document.querySelector('.input-section-fixed');
            if (inputSection) {
                inputSection.style.display = 'block';
            }
            
            // body에서 관리자 모드 클래스 제거
            document.body.classList.remove('admin-mode');
            
            // 학생화면 모드 버튼 상태 업데이트
            setTimeout(() => {
                updateStudentModeButtons();
            }, 100);
            
            // 응답창을 일반 모드로 변경
            const responseArea = document.getElementById('response-area');
            responseArea.innerHTML = '<div class="empty-state">💬 아직 질문이 없습니다. 아래에서 질문을 입력해보세요!</div>';
         }
        
         // 관리자 기능들
        function showAutoRestore() {
            console.log('자동복원 표시');
            setActiveAdminButton('자동복원');
            
            // 복원 완료 상태 확인
            const restoreResultData = localStorage.getItem('maic_restore_result');
            if (restoreResultData) {
                // 복원이 완료된 경우 - 완료 상태 표시
                showAutoRestoreProgress();
            } else {
                // 복원이 진행되지 않은 경우 - 진행 상태 표시
                showAutoRestoreProgress();
            }
        }
        
        function adminDashboard() {
            console.log('대시보드 실행');
            setActiveAdminButton('대시보드');
            showAdminDashboard();
        }
        
        function showQuestionMode() {
            console.log('질문모드 표시');
            setActiveAdminButton('질문모드');
            const responseArea = document.getElementById('response-area');
            if (!responseArea) return;
            
            responseArea.innerHTML = `
                <div class="admin-question-mode">
                    <h1>질문모드 관리</h1>
                    
                    <div class="question-mode-list">
                        <div class="question-mode-item">
                            <label class="toggle-switch">
                                <input type="checkbox" id="grammar-mode-toggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                            <span class="question-mode-title">문법 학습</span>
                            <span class="toggle-label" id="grammar-mode-status">활성화</span>
                        </div>
                        
                        <div class="question-mode-item">
                            <label class="toggle-switch">
                                <input type="checkbox" id="sentence-mode-toggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                            <span class="question-mode-title">문장 분석</span>
                            <span class="toggle-label" id="sentence-mode-status">활성화</span>
                        </div>
                        
                        <div class="question-mode-item">
                            <label class="toggle-switch">
                                <input type="checkbox" id="passage-mode-toggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                            <span class="question-mode-title">지문 설명</span>
                            <span class="toggle-label" id="passage-mode-status">활성화</span>
                        </div>
                    </div>
                    
                </div>
            `;
            
            // 토글 스위치 이벤트 리스너 추가
            attachQuestionModeToggleListeners();
            
            // 저장된 설정에서 토글 상태 복원
            restoreToggleStates();
        }
        
        function adminUserManagement() {
            console.log('회원관리 기능 실행');
            setActiveAdminButton('회원관리');
            showUserManagement();
        }
        
        // 질문모드 토글 스위치 이벤트 리스너
        function attachQuestionModeToggleListeners() {
            const toggles = ['grammar-mode-toggle', 'sentence-mode-toggle', 'passage-mode-toggle'];
            
            toggles.forEach(toggleId => {
                const toggle = document.getElementById(toggleId);
                if (toggle) {
                    toggle.addEventListener('change', function() {
                        const statusElement = document.getElementById(toggleId.replace('-toggle', '-status'));
                        if (statusElement) {
                            statusElement.textContent = this.checked ? '활성화' : '비활성화';
                        }
                        
                        // 즉시 설정 저장 및 학생화면 업데이트
                        saveQuestionModeSettings();
                    });
                }
            });
        }
        
        // 저장된 설정에서 토글 상태 복원
        function restoreToggleStates() {
            // localStorage에 설정이 없으면 기본값으로 모두 활성화
            let settings = JSON.parse(localStorage.getItem('questionModeSettings') || 'null');
            if (!settings) {
                settings = {"grammar":true,"sentence":true,"passage":true};
                localStorage.setItem('questionModeSettings', JSON.stringify(settings));
            }
            
            // 각 토글 상태 복원
            const grammarToggle = document.getElementById('grammar-mode-toggle');
            const sentenceToggle = document.getElementById('sentence-mode-toggle');
            const passageToggle = document.getElementById('passage-mode-toggle');
            
            const grammarStatus = document.getElementById('grammar-mode-status');
            const sentenceStatus = document.getElementById('sentence-mode-status');
            const passageStatus = document.getElementById('passage-mode-status');
            
            if (grammarToggle && grammarStatus) {
                grammarToggle.checked = settings.grammar;
                grammarStatus.textContent = settings.grammar ? '활성화' : '비활성화';
            }
            
            if (sentenceToggle && sentenceStatus) {
                sentenceToggle.checked = settings.sentence;
                sentenceStatus.textContent = settings.sentence ? '활성화' : '비활성화';
            }
            
            if (passageToggle && passageStatus) {
                passageToggle.checked = settings.passage;
                passageStatus.textContent = settings.passage ? '활성화' : '비활성화';
            }
        }
        
        // 학생화면의 모드 버튼 상태 업데이트
        function updateStudentModeButtons() {
            const settings = JSON.parse(localStorage.getItem('questionModeSettings') || '{"grammar":true,"sentence":true,"passage":true}');
            
            // 모드 버튼들 찾기
            const modeButtons = document.querySelectorAll('.mode-btn:not(.admin-mode-btn)');
            
            modeButtons.forEach((button) => {
                const buttonText = button.textContent.trim();
                let isEnabled = true;
                
                // 각 모드별 활성화 상태 확인
                if (buttonText === '문법 학습') {
                    isEnabled = settings.grammar;
                } else if (buttonText === '문장 분석') {
                    isEnabled = settings.sentence;
                } else if (buttonText === '지문 설명') {
                    isEnabled = settings.passage;
                }
                
                // 버튼 상태 업데이트
                if (isEnabled) {
                    button.classList.remove('disabled');
                } else {
                    button.classList.add('disabled');
                }
            });
        }
        
        // 질문모드 설정 저장
        function saveQuestionModeSettings() {
            const settings = {
                grammar: document.getElementById('grammar-mode-toggle').checked,
                sentence: document.getElementById('sentence-mode-toggle').checked,
                passage: document.getElementById('passage-mode-toggle').checked
            };
            
            localStorage.setItem('questionModeSettings', JSON.stringify(settings));
            
            // 학생화면의 모드 버튼 상태 업데이트
            updateStudentModeButtons();
        }
        
        
        function adminContentSystem() {
            console.log('콘텐츠 & 시스템 관리 실행');
            setActiveAdminButton('콘텐츠 & 시스템');
            showContentSystem();
        }
        
        function setActiveAdminButton(buttonText) {
            // 모든 관리자 버튼에서 active 클래스 제거
            const adminBtns = document.querySelectorAll('.admin-mode-btn');
            adminBtns.forEach(btn => {
                btn.classList.remove('active');
            });
            
            // 클릭된 버튼에 active 클래스 추가
            const targetBtn = Array.from(adminBtns).find(btn => btn.textContent === buttonText);
            if (targetBtn) {
                targetBtn.classList.add('active');
            }
        }
        
        function showAdminDashboard() {
            const responseArea = document.getElementById('response-area');
            if (!responseArea) return;
            
            // 실제 데이터 생성 (나중에 MAIC API와 연동)
            const dashboardData = generateDashboardData();
            const systemData = getSystemData();
            
            responseArea.innerHTML = `
                <!-- 시스템 모니터링 섹션 -->
                <div class="system-monitoring-section">
                    <div class="monitoring-header">
                        <h2>시스템 모니터링</h2>
                    </div>
                    <div class="monitoring-update-time">
                        마지막 업데이트: ${new Date().toLocaleString('ko-KR')}
                    </div>
                    <div class="monitoring-grid">
                        <!-- 1. 시스템 상태 -->
                        <div class="monitoring-item">
                            <div class="monitor-status-dot status-ready"></div>
                            <button class="monitor-small-btn" onclick="toggleMonitorCard(this, 'checkSystemStatus')">시스템 상태</button>
                        </div>
                        
                        <!-- 2. 새 자료 여부 -->
                        <div class="monitoring-item">
                            <div class="monitor-status-dot ${getFileStatusClass('prepared')}"></div>
                            <button class="monitor-small-btn" onclick="toggleMonitorCard(this, 'checkPreparedFiles')">새 자료 (${getPreparedFilesCount()})</button>
                        </div>
                        
                        <!-- 3. 인덱스 파일 상태 -->
                        <div class="monitoring-item">
                            <div class="monitor-status-dot ${getFileStatusClass('index')}"></div>
                            <button class="monitor-small-btn" onclick="toggleMonitorCard(this, 'checkIndexFiles')">인덱스 파일</button>
                        </div>
                        
                        <!-- 4. 인덱스 복원 상태 -->
                        <div class="monitoring-item">
                            <div class="monitor-status-dot ${getMonitoringStatusClass(systemData.indexStatus)}"></div>
                            <button class="monitor-small-btn" onclick="toggleMonitorCard(this, 'restoreIndex')">인덱스 복원</button>
                        </div>
                        
                        <!-- 5. 프롬프트 파일 상태 -->
                        <div class="monitoring-item">
                            <div class="monitor-status-dot ${getFileStatusClass('prompt')}"></div>
                            <button class="monitor-small-btn" onclick="toggleMonitorCard(this, 'checkPromptFiles')">프롬프트 파일</button>
                        </div>
                        
                        <!-- 6. 프롬프트 복원 상태 -->
                        <div class="monitoring-item">
                            <div class="monitor-status-dot ${getMonitoringStatusClass(systemData.promptStatus)}"></div>
                            <button class="monitor-small-btn" onclick="toggleMonitorCard(this, 'restorePrompts')">프롬프트 복원</button>
                        </div>
                        
                    </div>
                </div>
                
                <!-- 분석 대시보드 섹션 -->
                <div class="analytics-section">
                    <h2>분석 대시보드</h2>
                    
                    <div class="analytics-grid">
                        <!-- 질문모드 사용률 -->
                        <div class="analytics-card">
                            <h3>📈 질문모드 사용률</h3>
                            <div class="chart-container">
                                <div class="chart-visual">
                                    <div class="pie-chart">
                                        <div class="pie-chart-center">사용률</div>
                                    </div>
                                    <div class="chart-legend">
                                        <div class="legend-item">
                                            <div class="legend-color grammar"></div>
                                            <span>문법: ${dashboardData.modeUsage.grammar}%</span>
                                        </div>
                                        <div class="legend-item">
                                            <div class="legend-color reading"></div>
                                            <span>독해: ${dashboardData.modeUsage.reading}%</span>
                                        </div>
                                        <div class="legend-item">
                                            <div class="legend-color writing"></div>
                                            <span>작문: ${dashboardData.modeUsage.writing}%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 일일 질문 수 -->
                        <div class="analytics-card">
                            <h3>📈 일일 질문 수</h3>
                            <div class="chart-container">
                                <div class="line-chart">
                                    <svg viewBox="0 0 200 60">
                                        <defs>
                                            <linearGradient id="gradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                                <stop offset="0%" style="stop-color:#2196F3;stop-opacity:0.8" />
                                                <stop offset="100%" style="stop-color:#2196F3;stop-opacity:0.1" />
                                            </linearGradient>
                                        </defs>
                                        <path class="area" d="M 10,50 Q 30,30 50,35 T 90,25 T 130,20 T 170,15 T 190,10 L 190,50 Z"></path>
                                        <path class="line" d="M 10,50 Q 30,30 50,35 T 90,25 T 130,20 T 170,15 T 190,10"></path>
                                    </svg>
                                </div>
                                <div style="text-align: center; margin-top: 0.5rem; font-size: 0.9rem;">
                                    <div>오늘: ${dashboardData.dailyQuestions.today}개</div>
                                    <div>어제: ${dashboardData.dailyQuestions.yesterday}개</div>
                                    <div style="color: ${dashboardData.dailyQuestions.change > 0 ? '#4CAF50' : '#F44336'};">
                                        증감: ${dashboardData.dailyQuestions.change > 0 ? '+' : ''}${dashboardData.dailyQuestions.change}%
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 주간 사용자 만족도 -->
                        <div class="analytics-card">
                            <h3>😊 주간 사용자 만족도</h3>
                            <div class="chart-container">
                                <div class="chart-visual">
                                    <div class="progress-ring">
                                        <svg>
                                            <circle class="background" cx="50" cy="50" r="40"></circle>
                                            <circle class="progress" cx="50" cy="50" r="40" 
                                                    stroke-dasharray="${dashboardData.satisfaction * 2.51}" 
                                                    stroke-dashoffset="0" 
                                                    style="stroke: #FF9800;"></circle>
                                        </svg>
                                        <div class="progress-text" style="color: #FF9800;">${dashboardData.satisfaction}%</div>
                                    </div>
                                    <div style="text-align: center; font-size: 0.9rem; color: #666;">
                                        평균 만족도
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- KPI 요약 카드들 -->
                    <div class="kpi-grid">
                        <div class="kpi-card">
                            <div class="kpi-value">${dashboardData.totalUsers}</div>
                            <div class="kpi-label">총 사용자 수</div>
                        </div>
                        <div class="kpi-card">
                            <div class="kpi-value">${dashboardData.activeUsers}</div>
                            <div class="kpi-label">활성 사용자</div>
                        </div>
                        <div class="kpi-card">
                            <div class="kpi-value">${dashboardData.totalQuestions}</div>
                            <div class="kpi-label">총 질문 수</div>
                        </div>
                        <div class="kpi-card">
                            <div class="kpi-value">${dashboardData.avgSessionTime}</div>
                            <div class="kpi-label">평균 세션 시간(분)</div>
                        </div>
                    </div>
                </div>
                
                <!-- 진행 상태 표시 영역 -->
                <div id="progress-area" class="progress-area" style="display: none;">
                    <h3>진행 상태</h3>
                    <div id="progress-content"></div>
                </div>
                
                <!-- 마지막 업데이트 시간 -->
                <div style="text-align: center; margin-top: 2rem; padding: 1rem; color: #666; font-size: 0.9rem;">
                    <div>🔄 마지막 업데이트: ${dashboardData.lastUpdate}</div>
                    <div style="margin-top: 0.5rem;">
                        <button onclick="showAdminDashboard()" style="
                            background: linear-gradient(145deg, #f0f0f0, #cacaca);
                            border: none;
                            border-radius: 10px;
                            padding: 0.5rem 1rem;
                            cursor: pointer;
                            box-shadow: 4px 4px 8px rgba(0,0,0,0.05), -4px -4px 8px rgba(255,255,255,0.6);
                            transition: transform 0.2s ease;
                        " onmouseover="this.style.transform='translateY(-1px)'" onmouseout="this.style.transform='translateY(0)'">
                            🔄 새로고침
                        </button>
                    </div>
                </div>
            `;
        }
        
        // 대시보드 데이터 생성 함수 (실제 MAIC 데이터와 연동)
        function generateDashboardData() {
            // 현재 세션에서 실제 데이터 수집 시도
            const sessionData = getSessionData();
            const systemData = getSystemData();
            
            return {
                modeUsage: {
                    grammar: sessionData.modeUsage?.grammar || 45,
                    reading: sessionData.modeUsage?.reading || 30,
                    writing: sessionData.modeUsage?.writing || 25
                },
                dailyQuestions: {
                    today: sessionData.dailyQuestions?.today || 89,
                    yesterday: sessionData.dailyQuestions?.yesterday || 76,
                    change: sessionData.dailyQuestions?.change || 17
                },
                goalAchievement: sessionData.goalAchievement || 78,
                satisfaction: sessionData.satisfaction || 92,
                totalUsers: sessionData.totalUsers || 127,
                activeUsers: getActiveUsersCount(),
                totalQuestions: sessionData.totalQuestions || 1247,
                avgSessionTime: sessionData.avgSessionTime || 18,
                systemStatus: systemData.status || '준비완료',
                lastUpdate: new Date().toLocaleString('ko-KR')
            };
        }
        
        // 세션 데이터 수집 함수
        function getSessionData() {
            try {
                // localStorage에서 사용자 활동 데이터 수집
                const storedData = localStorage.getItem('maic_user_activity');
                if (storedData) {
                    return JSON.parse(storedData);
                }
            } catch (e) {
                console.log('세션 데이터 수집 실패:', e);
            }
            return {};
        }
        
        // 시스템 데이터 수집 함수
        function getSystemData() {
            try {
                // 현재 시스템 상태 확인
                const statusElement = document.querySelector('.status-text');
                const status = statusElement ? statusElement.textContent : '준비완료';
                
                // 인덱스 복원 상태 확인 (실제로는 MAIC API에서 가져와야 함)
                const indexStatus = checkIndexStatus();
                const promptStatus = checkPromptStatus();
                
                return {
                    status: status,
                    indexStatus: indexStatus,
                    promptStatus: promptStatus,
                    timestamp: new Date().toISOString()
                };
            } catch (e) {
                console.log('시스템 데이터 수집 실패:', e);
                return { 
                    status: '알 수 없음',
                    indexStatus: 'error',
                    promptStatus: 'error'
                };
            }
        }
        
        // 인덱스 상태 확인 함수
        function checkIndexStatus() {
            try {
                // 실제로는 MAIC의 인덱스 상태를 확인해야 함
                // 현재는 시뮬레이션
                const hasIndex = localStorage.getItem('maic_index_ready');
                if (hasIndex === 'true') {
                    return 'ready';
                } else if (hasIndex === 'false') {
                    return 'error';
                } else {
                    return 'warning';
                }
            } catch (e) {
                return 'error';
            }
        }
        
        // 프롬프트 상태 확인 함수
        function checkPromptStatus() {
            try {
                // 실제로는 MAIC의 프롬프트 상태를 확인해야 함
                // 현재는 시뮬레이션
                const hasPrompts = localStorage.getItem('maic_prompts_ready');
                if (hasPrompts === 'true') {
                    return 'ready';
                } else if (hasPrompts === 'false') {
                    return 'error';
                } else {
                    return 'warning';
                }
            } catch (e) {
                return 'error';
            }
        }
        
        // 모니터링 상태 텍스트 생성
        function getMonitoringStatusText(status) {
            switch (status) {
                case 'ready':
                    return '✅ 완료';
                case 'warning':
                    return '⚠️ 경고';
                case 'error':
                    return '❌ 실패';
                default:
                    return '❓ 알 수 없음';
            }
        }
        
        // 모니터링 상태 클래스 생성
        function getMonitoringStatusClass(status) {
            switch (status) {
                case 'ready':
                    return 'status-ready';
                case 'warning':
                    return 'status-warning';
                case 'error':
                    return 'status-error';
                default:
                    return 'status-warning';
            }
        }
        
        // 파일 존재 여부에 따른 상태 클래스 반환
        function getFileStatusClass(fileType) {
            // 실제 구현에서는 MAIC의 파일 체크 로직을 사용
            // 여기서는 시뮬레이션으로 구현
            switch(fileType) {
                case 'index':
                    return localStorage.getItem('maic_index_ready') === 'true' ? 'status-ready' : 'status-error';
                case 'prompt':
                    return 'status-ready'; // 프롬프트 파일은 항상 존재한다고 가정
                case 'prepared':
                    return 'status-update'; // 새 자료가 있다고 가정 (파란색 - 업데이트 필요)
                default:
                    return 'status-ready';
            }
        }
        
        // 활성 사용자 수 계산 (현재 세션 기반)
        function getActiveUsersCount() {
            try {
                // 현재 활성 세션 수를 추정 (실제로는 서버에서 가져와야 함)
                const activeSessions = sessionStorage.getItem('maic_active_sessions');
                return activeSessions ? parseInt(activeSessions) : 1;
            } catch (e) {
                return 1;
            }
        }
        
        // 현재 인덱스 정보 가져오기
        function getCurrentIndexInfo() {
            // 실제로는 MAIC의 인덱스 정보를 가져와야 함
            const indexData = localStorage.getItem('maic_current_index');
            if (indexData) {
                return JSON.parse(indexData);
            }
            
            // 기본값 반환
            return {
                name: 'index_2025-01-07_18-30-45',
                fileCount: 1247,
                createdDate: '2025-01-07 18:30:45'
            };
        }
        
        // 새 파일 개수 가져오기
        function getNewFilesCount() {
            // 실제로는 prepared 폴더의 파일 개수를 확인해야 함
            return 3; // 시뮬레이션
        }
        
        // 인덱싱 시작
        function startIndexing() {
            console.log('인덱싱 시작...');
            showIndexingProgress();
            simulateIndexingProcess();
        }
        
        // 인덱싱 진행 상태 표시
        function showIndexingProgress() {
            const responseArea = document.getElementById('response-area');
            if (!responseArea) return;
            
            // 기존 시스템 관리 페이지에 진행 상태 추가
            const existingContent = responseArea.innerHTML;
            const progressHTML = `
                <div class="auto-restore-container" style="margin-top: 2rem;">
                    <h2 style="color: #333;">인덱싱 진행 중</h2>
                    
                    <div class="restore-progress-bar">
                        <div class="progress-steps-horizontal">
                            <div class="progress-step-horizontal" id="index-step-1">
                                <div class="step-number">1</div>
                                <div class="step-label">파일 스캔</div>
                                <div class="step-status">대기 중</div>
                            </div>
                            <div class="progress-step-horizontal" id="index-step-2">
                                <div class="step-number">2</div>
                                <div class="step-label">전처리</div>
                                <div class="step-status">대기 중</div>
                            </div>
                            <div class="progress-step-horizontal" id="index-step-3">
                                <div class="step-number">3</div>
                                <div class="step-label">인덱싱</div>
                                <div class="step-status">대기 중</div>
                            </div>
                            <div class="progress-step-horizontal" id="index-step-4">
                                <div class="step-number">4</div>
                                <div class="step-label">검증</div>
                                <div class="step-status">대기 중</div>
                            </div>
                            <div class="progress-step-horizontal" id="index-step-5">
                                <div class="step-number">5</div>
                                <div class="step-label">배포</div>
                                <div class="step-status">대기 중</div>
                            </div>
                        </div>
                        
                        <div class="progress-bar-container">
                            <div class="progress-bar" id="index-progress-bar"></div>
                        </div>
                    </div>
                </div>
            `;
            
            responseArea.innerHTML = existingContent + progressHTML;
        }
        
        // 인덱싱 프로세스 시뮬레이션
        function simulateIndexingProcess() {
            const steps = [
                { id: 1, name: '파일 스캔', duration: 1500 },
                { id: 2, name: '전처리', duration: 3000 },
                { id: 3, name: '인덱싱', duration: 5000 },
                { id: 4, name: '검증', duration: 2000 },
                { id: 5, name: '배포', duration: 4000 }
            ];
            
            let stepIndex = 0;
            let elapsedTime = 0;
            const totalTime = steps.reduce((sum, step) => sum + step.duration, 0);
            
            const progressBar = document.getElementById('index-progress-bar');
            
            const updateProgress = () => {
                const progress = (elapsedTime / totalTime) * 100;
                if (progressBar) {
                    progressBar.style.width = Math.min(progress, 100) + '%';
                }
            };
            
            const processStep = () => {
                if (stepIndex >= steps.length) {
                    // 모든 단계 완료
                    updateIndexStepStatus(steps.length, 'completed');
                    updateProgress();
                    
                    // 인덱스 정보 업데이트
                    const newIndexInfo = {
                        name: `index_${new Date().toISOString().replace(/[:.]/g, '-').slice(0, 19)}`,
                        fileCount: 1250,
                        createdDate: new Date().toLocaleString('ko-KR')
                    };
                    localStorage.setItem('maic_current_index', JSON.stringify(newIndexInfo));
                    
                    console.log('인덱싱 완료');
                    return;
                }
                
                const step = steps[stepIndex];
                updateIndexStepStatus(step.id, 'running');
                
                setTimeout(() => {
                    updateIndexStepStatus(step.id, 'completed');
                    elapsedTime += step.duration;
                    updateProgress();
                    processStep(stepIndex + 1);
                }, step.duration);
            };
            
            processStep();
        }
        
        // 인덱싱 단계 상태 업데이트
        function updateIndexStepStatus(stepId, status) {
            const stepElement = document.getElementById(`index-step-${stepId}`);
            if (!stepElement) return;
            
            const dot = stepElement.querySelector('.step-number');
            const statusText = stepElement.querySelector('.step-status');
            
            stepElement.className = `progress-step-horizontal ${status}`;
            statusText.textContent = getStepStatusText(status);
        }
        
        // 릴리스로 업로드
        function uploadToRelease() {
            console.log('릴리스로 업로드...');
            alert('릴리스로 업로드를 시작합니다.\n\n• 현재 인덱스 파일 확인\n• GitHub Release API 연동\n• 업로드 진행\n\n✅ 업로드가 완료되었습니다.');
        }
        
        // 로컬에서 복원
        function restoreFromLocal() {
            console.log('로컬에서 복원...');
            alert('로컬에서 복원을 시작합니다.\n\n• 로컬 백업 파일 확인\n• 인덱스 복원 진행\n• 검증 및 적용\n\n✅ 복원이 완료되었습니다.');
        }
        
        // 사용자 활동 추적 함수 (나중에 실제 질문/모드 선택 시 호출)
        function trackUserActivity(activityType, data) {
            try {
                const activity = {
                    type: activityType,
                    data: data,
                    timestamp: new Date().toISOString(),
                    sessionId: getSessionId()
                };
                
                // localStorage에 활동 기록 저장
                const existingData = getSessionData();
                if (!existingData.activities) {
                    existingData.activities = [];
                }
                existingData.activities.push(activity);
                
                // 최근 100개 활동만 유지
                if (existingData.activities.length > 100) {
                    existingData.activities = existingData.activities.slice(-100);
                }
                
                localStorage.setItem('maic_user_activity', JSON.stringify(existingData));
                
                // 통계 업데이트
                updateActivityStats(activityType, data);
                
            } catch (e) {
                console.log('활동 추적 실패:', e);
            }
        }
        
        // 활동 통계 업데이트
        function updateActivityStats(activityType, data) {
            try {
                const storedData = getSessionData();
                
                switch (activityType) {
                    case 'mode_selection':
                        if (!storedData.modeUsage) {
                            storedData.modeUsage = { grammar: 0, reading: 0, writing: 0 };
                        }
                        if (data.mode === 'grammar') storedData.modeUsage.grammar++;
                        if (data.mode === 'reading') storedData.modeUsage.reading++;
                        if (data.mode === 'writing') storedData.modeUsage.writing++;
                        break;
                        
                    case 'question_asked':
                        if (!storedData.dailyQuestions) {
                            storedData.dailyQuestions = { today: 0, yesterday: 0, change: 0 };
                        }
                        storedData.dailyQuestions.today++;
                        break;
                        
                    case 'session_start':
                        if (!storedData.totalUsers) storedData.totalUsers = 0;
                        storedData.totalUsers++;
                        break;
                }
                
                localStorage.setItem('maic_user_activity', JSON.stringify(storedData));
            } catch (e) {
                console.log('통계 업데이트 실패:', e);
            }
        }
        
        // 세션 ID 생성
        function getSessionId() {
            let sessionId = sessionStorage.getItem('maic_session_id');
            if (!sessionId) {
                sessionId = 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                sessionStorage.setItem('maic_session_id', sessionId);
            }
            return sessionId;
        }
        
        // 모니터링 액션 함수들
        function restoreIndex() {
            console.log('인덱스 복원 시작...');
            showProgressArea('인덱스 복원', [
                { step: '데이터 수집', status: 'running' },
                { step: '전처리', status: 'pending' },
                { step: '인덱싱', status: 'pending' },
                { step: '검증', status: 'pending' },
                { step: '배포', status: 'pending' }
            ]);
            
            // 시뮬레이션된 복원 과정
            simulateRestoreProcess();
        }
        
        function showProgressArea(title, steps) {
            const progressArea = document.getElementById('progress-area');
            const progressContent = document.getElementById('progress-content');
            
            if (!progressArea || !progressContent) return;
            
            progressArea.style.display = 'block';
            progressArea.querySelector('h3').textContent = `${title} 진행 상태`;
            
            progressContent.innerHTML = `
                <div class="progress-steps">
                    ${steps.map((step, index) => `
                        <div class="progress-step" id="step-${index}">
                            <div class="step-dot ${step.status}"></div>
                            <div class="step-info">
                                <div class="step-name">${step.step}</div>
                                <div class="step-status">${getStepStatusText(step.status)}</div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }
        
        function getStepStatusText(status) {
            switch (status) {
                case 'running': return '진행 중...';
                case 'completed': return '완료';
                case 'pending': return '대기 중';
                case 'error': return '오류';
                default: return '대기 중';
            }
        }
        
        function simulateRestoreProcess() {
            const steps = [
                { id: 0, delay: 1000 },
                { id: 1, delay: 2000 },
                { id: 2, delay: 3000 },
                { id: 3, delay: 2000 },
                { id: 4, delay: 1000 }
            ];
            
            steps.forEach((step, index) => {
                setTimeout(() => {
                    updateStepStatus(step.id, 'running');
                    
                    setTimeout(() => {
                        updateStepStatus(step.id, 'completed');
                        
                        if (index === steps.length - 1) {
                            // 모든 단계 완료
                            localStorage.setItem('maic_index_ready', 'true');
                            setTimeout(() => {
                                showSystemMonitoring(); // 모니터링 창 새로고침
                            }, 1000);
                        }
                    }, step.delay);
                }, index * 1000);
            });
        }
        
        function updateStepStatus(stepId, status) {
            const stepElement = document.getElementById(`step-${stepId}`);
            if (!stepElement) return;
            
            const dot = stepElement.querySelector('.step-dot');
            const statusText = stepElement.querySelector('.step-status');
            
            dot.className = `step-dot ${status}`;
            statusText.textContent = getStepStatusText(status);
        }
        
        // 모니터링 카드 토글 함수
        function toggleMonitorCard(button, action) {
            // 모든 모니터링 버튼에서 active 클래스 제거
            const allMonitorBtns = document.querySelectorAll('.monitor-small-btn');
            allMonitorBtns.forEach(btn => btn.classList.remove('active'));
            
            // 클릭된 버튼에 active 클래스 추가 (음각 효과)
            button.classList.add('active');
            
            // 해당 액션 실행
            if (action === 'restoreIndex') {
                showRestoreOptions();
            } else if (action === 'uploadPrompts') {
                uploadPrompts();
            } else if (action === 'checkSystemStatus') {
                checkSystemStatus();
            } else if (action === 'refreshMonitoring') {
                refreshMonitoring();
            } else if (action === 'checkIndexFiles') {
                checkIndexFiles();
            } else if (action === 'checkPromptFiles') {
                checkPromptFiles();
            } else if (action === 'checkPreparedFiles') {
                checkPreparedFiles();
            } else if (action === 'restorePrompts') {
                restorePrompts();
            }
        }
        
        // 자동 복원 시작 함수
        function startAutoRestore() {
            console.log('자동 복원 시작...');
            
            // 기존 복원 결과 초기화 (새로운 복원 시작)
            localStorage.removeItem('maic_restore_result');
            
            // 복원 진행 상태 표시
            showAutoRestoreProgress();
            
            // 복원 과정 시뮬레이션
            simulateAutoRestore();
        }
        
        // 자동 복원 진행 상태 표시
        function showAutoRestoreProgress() {
            const responseArea = document.getElementById('response-area');
            if (!responseArea) return;
            
            // 복원 완료 상태 확인
            const restoreResultData = localStorage.getItem('maic_restore_result');
            let isCompleted = false;
            let completedSteps = [];
            
            if (restoreResultData) {
                const result = JSON.parse(restoreResultData);
                isCompleted = true;
                completedSteps = result.steps;
            }
            
            // 항상 원래의 진행 중 창을 표시하되, 완료된 경우 단계들을 완료 상태로 표시
            responseArea.innerHTML = `
                <div class="auto-restore-container">
                    <h2 style="color: #333;">자동 복원 진행 중</h2>
                    
                    <div class="restore-progress-bar">
                        <div class="progress-steps-horizontal">
                            <div class="progress-step-horizontal ${isCompleted ? 'completed' : ''}" id="step-1">
                                <div class="step-number">1</div>
                                <div class="step-label">데이터 수집</div>
                                <div class="step-status">${isCompleted ? '완료' : '대기 중'}</div>
                            </div>
                            <div class="progress-step-horizontal ${isCompleted ? 'completed' : ''}" id="step-2">
                                <div class="step-number">2</div>
                                <div class="step-label">전처리</div>
                                <div class="step-status">${isCompleted ? '완료' : '대기 중'}</div>
                            </div>
                            <div class="progress-step-horizontal ${isCompleted ? 'completed' : ''}" id="step-3">
                                <div class="step-number">3</div>
                                <div class="step-label">인덱싱</div>
                                <div class="step-status">${isCompleted ? '완료' : '대기 중'}</div>
                            </div>
                            <div class="progress-step-horizontal ${isCompleted ? 'completed' : ''}" id="step-4">
                                <div class="step-number">4</div>
                                <div class="step-label">검증</div>
                                <div class="step-status">${isCompleted ? '완료' : '대기 중'}</div>
                            </div>
                            <div class="progress-step-horizontal ${isCompleted ? 'completed' : ''}" id="step-5">
                                <div class="step-number">5</div>
                                <div class="step-label">배포</div>
                                <div class="step-status">${isCompleted ? '완료' : '대기 중'}</div>
                            </div>
                        </div>
                        
                        <div class="progress-bar-container">
                            <div class="progress-bar" id="progress-bar" style="width: ${isCompleted ? '100%' : '0%'}"></div>
                        </div>
                        
                        ${isCompleted ? `
                            <div class="restore-complete-message" style="text-align: center; margin-top: 1rem; color: #333;">
                                복원이 완료되었습니다!
                            </div>
                        ` : ''}
                    </div>
                </div>
            `;
        }
        
        // 자동 복원 시뮬레이션
        function simulateAutoRestore() {
            const steps = [
                { id: 1, name: '데이터 수집', duration: 2000 },
                { id: 2, name: '전처리', duration: 3000 },
                { id: 3, name: '인덱싱', duration: 4000 },
                { id: 4, name: '검증', duration: 2000 },
                { id: 5, name: '배포', duration: 1500 }
            ];
            
            let currentStep = 0;
            let totalDuration = steps.reduce((sum, step) => sum + step.duration, 0);
            let elapsedTime = 0;
            
            const updateProgress = () => {
                const progress = (elapsedTime / totalDuration) * 100;
                const progressBar = document.getElementById('progress-bar');
                if (progressBar) {
                    progressBar.style.width = Math.min(progress, 100) + '%';
                }
            };
            
            const processStep = (stepIndex) => {
                if (stepIndex >= steps.length) {
                    // 모든 단계 완료
                    updateStepStatusHorizontal(steps.length, 'completed');
                    updateRestoreStatus('복원이 완료되었습니다!');
                    localStorage.setItem('maic_index_ready', 'true');
                    
                    // 복원 결과를 영구적으로 저장
                    saveRestoreResult(steps);
                    
                    // 복원 완료 처리
                    
                    console.log('자동 복원 완료 - 복원 창 유지');
                    return;
                }
                
                const step = steps[stepIndex];
                updateStepStatusHorizontal(step.id, 'running');
                updateRestoreStatus(`${step.name} 중...`);
                
                setTimeout(() => {
                    updateStepStatusHorizontal(step.id, 'completed');
                    elapsedTime += step.duration;
                    updateProgress();
                    processStep(stepIndex + 1);
                }, step.duration);
            };
            
            // 진행률 업데이트 타이머
            const progressTimer = setInterval(() => {
                elapsedTime += 100;
                updateProgress();
                
                if (elapsedTime >= totalDuration) {
                    clearInterval(progressTimer);
                }
            }, 100);
            
            processStep(0);
        }
        
        // 가로 진행 상태 업데이트
        function updateStepStatusHorizontal(stepId, status) {
            const stepElement = document.getElementById(`step-${stepId}`);
            if (!stepElement) return;
            
            const stepNumber = stepElement.querySelector('.step-number');
            const stepStatus = stepElement.querySelector('.step-status');
            
            stepElement.className = `progress-step-horizontal ${status}`;
            stepStatus.textContent = getStepStatusText(status);
        }
        
        // 복원 상태 업데이트 (메시지 제거됨)
        function updateRestoreStatus(message) {
            // 메시지 표시 제거됨 - 진행 상황은 진행 바에서만 확인
        }
        
        // 복원 결과를 localStorage에 저장
        function saveRestoreResult(steps) {
            const restoreResult = {
                timestamp: new Date().toISOString(),
                steps: steps.map(step => ({
                    id: step.id,
                    name: step.name,
                    status: 'completed',
                    completedAt: new Date().toISOString()
                })),
                overallStatus: 'success',
                message: '자동 복원이 성공적으로 완료되었습니다.'
            };
            
            localStorage.setItem('maic_restore_result', JSON.stringify(restoreResult));
        }
        
        // 대시보드 내부에 복원 상태 표시
        function showRestoreStatusInDashboard() {
            const restoreResultData = localStorage.getItem('maic_restore_result');
            const restoreProgressContainer = document.getElementById('restoreProgressContainer');
            
            if (!restoreProgressContainer) return;
            
            if (restoreResultData) {
                // 복원이 완료된 경우 - 완료 상태 표시
                const result = JSON.parse(restoreResultData);
                const completedHTML = `
                    <div class="restore-completed-status">
                        <div class="restore-status-indicator success">
                            <div class="status-dot success"></div>
                            <span>복원 완료</span>
                        </div>
                        <div class="restore-completion-time">
                            완료 시간: ${new Date(result.timestamp).toLocaleString('ko-KR')}
                        </div>
                        <div class="restore-steps-summary">
                            ${result.steps.map(step => `
                                <div class="restore-step-item">
                                    <div class="step-dot success"></div>
                                    <span>${step.name}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                restoreProgressContainer.innerHTML = completedHTML;
            } else {
                // 복원이 아직 진행되지 않은 경우 - 대기 상태 표시
                const waitingHTML = `
                    <div class="restore-waiting-status">
                        <div class="restore-status-indicator waiting">
                            <div class="status-dot waiting"></div>
                            <span>복원 대기 중</span>
                        </div>
                        <div class="restore-waiting-message">
                            관리자 로그인 시 자동으로 복원이 시작됩니다.
                        </div>
                    </div>
                `;
                restoreProgressContainer.innerHTML = waitingHTML;
            }
        }
        
        // 복원 옵션 표시 (수동 복원시)
        function showRestoreOptions() {
            const responseArea = document.getElementById('response-area');
            if (!responseArea) return;
            
            responseArea.innerHTML = `
                <div class="restore-options-container">
                    <h2>🔄 인덱스 복원 옵션</h2>
                    <p>복원할 인덱스의 소스를 선택하세요:</p>
                    
                    <div class="restore-options">
                        <div class="restore-option-card" onclick="startManualRestore('github')">
                            <div class="option-icon">🌐</div>
                            <h3>GitHub Release</h3>
                            <p>GitHub의 최신 릴리즈에서 인덱스를 다운로드합니다.</p>
                            <div class="option-status">최신 버전: v1.2.3</div>
                        </div>
                        
                        <div class="restore-option-card" onclick="startManualRestore('local')">
                            <div class="option-icon">💾</div>
                            <h3>로컬 백업</h3>
                            <p>로컬에 저장된 백업 인덱스를 사용합니다.</p>
                            <div class="option-status">백업 일시: 2024-01-15</div>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // 수동 복원 시작
        function startManualRestore(source) {
            console.log(`수동 복원 시작 - 소스: ${source}`);
            
            // 기존 복원 결과 초기화 (새로운 복원 시작)
            localStorage.removeItem('maic_restore_result');
            
            // 복원 진행 상태 표시
            showAutoRestoreProgress();
            
            // 소스별 복원 시뮬레이션
            if (source === 'github') {
                simulateGitHubRestore();
            } else {
                simulateLocalRestore();
            }
        }
        
        // GitHub 복원 시뮬레이션
        function simulateGitHubRestore() {
            const steps = [
                { id: 1, name: 'GitHub 연결', duration: 1500 },
                { id: 2, name: '릴리즈 확인', duration: 1000 },
                { id: 3, name: '인덱스 다운로드', duration: 3000 },
                { id: 4, name: '검증', duration: 2000 },
                { id: 5, name: '배포', duration: 1500 }
            ];
            
            simulateRestoreWithSteps(steps);
        }
        
        // 로컬 복원 시뮬레이션
        function simulateLocalRestore() {
            const steps = [
                { id: 1, name: '로컬 파일 검색', duration: 1000 },
                { id: 2, name: '백업 확인', duration: 800 },
                { id: 3, name: '인덱스 로드', duration: 2000 },
                { id: 4, name: '검증', duration: 1500 },
                { id: 5, name: '배포', duration: 1000 }
            ];
            
            simulateRestoreWithSteps(steps);
        }
        
        // 복원 과정 시뮬레이션 (공통)
        function simulateRestoreWithSteps(steps) {
            let currentStep = 0;
            let totalDuration = steps.reduce((sum, step) => sum + step.duration, 0);
            let elapsedTime = 0;
            
            const updateProgress = () => {
                const progress = (elapsedTime / totalDuration) * 100;
                const progressBar = document.getElementById('progress-bar');
                if (progressBar) {
                    progressBar.style.width = Math.min(progress, 100) + '%';
                }
            };
            
            const processStep = (stepIndex) => {
                if (stepIndex >= steps.length) {
                    updateStepStatusHorizontal(steps.length, 'completed');
                    updateRestoreStatus('복원이 완료되었습니다!');
                    localStorage.setItem('maic_index_ready', 'true');
                    
                    setTimeout(() => {
                        showAdminDashboard();
                    }, 2000);
                    return;
                }
                
                const step = steps[stepIndex];
                updateStepStatusHorizontal(step.id, 'running');
                updateRestoreStatus(`${step.name} 중...`);
                
                setTimeout(() => {
                    updateStepStatusHorizontal(step.id, 'completed');
                    elapsedTime += step.duration;
                    updateProgress();
                    processStep(stepIndex + 1);
                }, step.duration);
            };
            
            const progressTimer = setInterval(() => {
                elapsedTime += 100;
                updateProgress();
                
                if (elapsedTime >= totalDuration) {
                    clearInterval(progressTimer);
                }
            }, 100);
            
            processStep(0);
        }
        
        function uploadPrompts() {
            console.log('프롬프트 업로드 시작...');
            // 실제로는 MAIC의 프롬프트 업로드 API 호출
            localStorage.setItem('maic_prompts_ready', 'true');
            alert('프롬프트 업로드가 완료되었습니다!');
            showAdminDashboard(); // 대시보드 새로고침
        }
        
        function restorePrompts() {
            console.log('프롬프트 복원 (GitHub Release에서)...');
            alert('GitHub Release에서 프롬프트를 복원합니다.\n\n• 최신 프롬프트 다운로드\n• 로컬 프롬프트 백업\n• 새 프롬프트 적용\n• 검증 및 테스트\n\n✅ 프롬프트 복원이 완료되었습니다.');
        }
        
        function checkSystemStatus() {
            console.log('시스템 상태 확인 중...');
            // 실제로는 MAIC의 시스템 상태 확인 API 호출
            const status = document.querySelector('.status-text')?.textContent || '준비완료';
            alert(`현재 시스템 상태: ${status}`);
        }
        
        function refreshMonitoring() {
            console.log('모니터링 새로고침...');
            showSystemMonitoring(); // 시스템 모니터링 새로고침
        }
        
        // 인덱스 파일 존재 여부 확인
        function checkIndexFiles() {
            console.log('인덱스 파일 확인...');
            const hasIndex = localStorage.getItem('maic_index_ready') === 'true';
            const message = hasIndex ? '인덱스 파일이 정상적으로 존재합니다.' : '인덱스 파일이 없습니다. 복원이 필요합니다.';
            alert(message);
        }
        
        // 프롬프트 파일 존재 여부 확인
        function checkPromptFiles() {
            console.log('프롬프트 파일 확인...');
            alert('프롬프트 파일이 정상적으로 존재합니다.');
        }
        
        // 새 자료 존재 여부 확인
        function checkPreparedFiles() {
            console.log('새 자료 확인...');
            const count = getPreparedFilesCount();
            alert(`prepared 폴더에 새로운 자료가 ${count}개 있습니다.`);
        }
        
        // 새 자료 개수 반환 (시뮬레이션)
        function getPreparedFilesCount() {
            // 실제로는 MAIC의 파일 체크 로직을 사용
            // 여기서는 시뮬레이션으로 3개 반환
            return 3;
        }
        
        // 시스템 모니터링 창 표시
        function showSystemMonitoring() {
            const responseArea = document.getElementById('response-area');
            if (!responseArea) return;
            
            const systemData = getSystemData();
            
            responseArea.innerHTML = `
                <div class="system-monitoring-container">
                    <h1>🔧 시스템 모니터링</h1>
                    
                    <div class="monitoring-grid">
                        <div class="monitoring-card">
                            <div class="monitor-title">인덱스 복원</div>
                            <div class="monitor-status-dot ${getMonitoringStatusClass(systemData.indexStatus)}"></div>
                            <button class="monitor-action-btn" onclick="restoreIndex()">🔄 복원</button>
                        </div>
                        
                        <div class="monitoring-card">
                            <div class="monitor-title">프롬프트 업로드</div>
                            <div class="monitor-status-dot ${getMonitoringStatusClass(systemData.promptStatus)}"></div>
                            <button class="monitor-action-btn" onclick="uploadPrompts()">📤 업로드</button>
                        </div>
                        
                        <div class="monitoring-card">
                            <div class="monitor-title">시스템 상태</div>
                            <div class="monitor-status-dot status-ready"></div>
                            <button class="monitor-action-btn" onclick="checkSystemStatus()">🔍 확인</button>
                        </div>
                        
                        <div class="monitoring-card">
                            <div class="monitor-title">마지막 업데이트</div>
                            <div class="monitor-time-display">${new Date().toLocaleTimeString('ko-KR')}</div>
                            <button class="monitor-action-btn" onclick="refreshMonitoring()">🔄 새로고침</button>
                        </div>
                    </div>
                    
                    <!-- 진행 상태 표시 영역 -->
                    <div id="progress-area" class="progress-area" style="display: none;">
                        <h3>진행 상태</h3>
                        <div id="progress-content"></div>
                    </div>
                </div>
            `;
        }
        
        function showUserManagement() {
            const responseArea = document.getElementById('response-area');
            if (!responseArea) return;
            
            responseArea.innerHTML = `
                <div class="user-management">
                    <div class="management-header">
                        <h2>회원 관리</h2>
                        <p>학생들의 정보를 체계적으로 관리하세요</p>
                    </div>
                    
                    <div class="management-tools">
                        <div class="search-bar">
                            <input type="text" placeholder="회원 검색 (이름, 학교, 학년)" class="search-input">
                            <button class="search-btn">🔍</button>
                        </div>
                        <div class="filter-options">
                            <select class="filter-select">
                                <option>전체 상태</option>
                                <option>활동중</option>
                                <option>휴면</option>
                                <option>정지</option>
                            </select>
                            <button class="export-btn">📊 내보내기</button>
                        </div>
                    </div>
                    
                    <div class="user-table">
                        <div class="table-header">
                            <div class="col-name">이름</div>
                            <div class="col-school">학교</div>
                            <div class="col-grade">학년</div>
                            <div class="col-status">상태</div>
                            <div class="col-actions">관리</div>
                        </div>
                        <div class="table-body">
                            <div class="table-row">
                                <div class="col-name">김영희</div>
                                <div class="col-school">서울고등학교</div>
                                <div class="col-grade">2학년</div>
                                <div class="col-status"><span class="status-active">활동중</span></div>
                                <div class="col-actions">
                                    <button class="action-btn view">👁️</button>
                                    <button class="action-btn edit">✏️</button>
                                </div>
                            </div>
                            <div class="table-row">
                                <div class="col-name">박민수</div>
                                <div class="col-school">부산고등학교</div>
                                <div class="col-grade">1학년</div>
                                <div class="col-status"><span class="status-active">활동중</span></div>
                                <div class="col-actions">
                                    <button class="action-btn view">👁️</button>
                                    <button class="action-btn edit">✏️</button>
                                </div>
                            </div>
                            <div class="table-row">
                                <div class="col-name">이지은</div>
                                <div class="col-school">대구고등학교</div>
                                <div class="col-grade">3학년</div>
                                <div class="col-status"><span class="status-dormant">휴면</span></div>
                                <div class="col-actions">
                                    <button class="action-btn view">👁️</button>
                                    <button class="action-btn edit">✏️</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // 프롬프트 관리 페이지
        function showPromptManagement() {
            setActiveAdminButton('프롬프트');
            const responseArea = document.getElementById('response-area');
            if (!responseArea) return;
            
            responseArea.innerHTML = `
                <div class="admin-prompt-management">
                    <h1>프롬프트 관리</h1>
                    
                    <!-- 현재 버전 정보 -->
                    <div class="prompt-version-info">
                        <div class="version-card">
                            <h3>현재 활성 버전</h3>
                            <div class="version-details">
                                <span class="version-number">v2025-01-07-001</span>
                                <span class="version-date">2025-01-07 18:30:45</span>
                            </div>
                            <div class="version-file-info">
                                <div class="file-status">
                                    <span class="file-label">Release 파일:</span>
                                    <span class="file-name">prompts_2025-01-07_18-30-45.yaml</span>
                                    <div class="pulse-dot green"></div>
                                </div>
                                <div class="file-status">
                                    <span class="file-label">로컬 파일:</span>
                                    <span class="file-name">prompts_current.yaml</span>
                                    <div class="pulse-dot green"></div>
                                </div>
                            </div>
                            <div class="version-actions">
                                <button class="admin-mode-btn" onclick="rollbackPrompt()">이전 버전으로</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 프롬프트 편집 영역 -->
                    <div class="prompt-editor-container">
                        <!-- 공통 페르소나 -->
                        <div class="prompt-section">
                            <h3>공통 페르소나</h3>
                            <p class="section-description">모든 모드에서 공통으로 사용되는 AI의 기본 성격과 톤을 설정합니다.</p>
                            <textarea 
                                id="persona-input" 
                                class="prompt-textarea large" 
                                placeholder="예: 너는 친절하고 전문적인 영어 선생님이다. 학생의 눈높이에 맞춰 설명하되, 정확한 문법과 표현을 가르친다..."
                                rows="8"
                            ></textarea>
                            <div class="input-stats">
                                <span id="persona-count">0</span>자
                            </div>
                        </div>
                        
                        <!-- 모드별 프롬프트 탭 -->
                        <div class="prompt-section">
                            <h3>모드별 프롬프트</h3>
                            <div class="prompt-tabs">
                                <button class="prompt-tab active" data-mode="grammar" onclick="switchPromptTab('grammar')">문법 (Grammar)</button>
                                <button class="prompt-tab" data-mode="sentence" onclick="switchPromptTab('sentence')">문장 (Sentence)</button>
                                <button class="prompt-tab" data-mode="passage" onclick="switchPromptTab('passage')">지문 (Passage)</button>
                            </div>
                            
                            <!-- Grammar 프롬프트 -->
                            <div id="grammar-prompt" class="prompt-content active">
                                <h4>문법 설명 프롬프트</h4>
                                <p class="mode-description">문법 규칙을 단계적으로 설명하고 예시를 제공하는 프롬프트입니다.</p>
                                <textarea 
                                    id="grammar-input" 
                                    class="prompt-textarea large" 
                                    placeholder="예: 문법 규칙을 다음 순서로 설명해: 1) 핵심 규칙 2) 근거/출처 3) 예문 4) 한 줄 요약..."
                                    rows="12"
                                ></textarea>
                                <div class="input-stats">
                                    <span id="grammar-count">0</span>자
                                </div>
                            </div>
                            
                            <!-- Sentence 프롬프트 -->
                            <div id="sentence-prompt" class="prompt-content">
                                <h4>문장 분석 프롬프트</h4>
                                <p class="mode-description">문장 구조를 괄호 규칙에 따라 분석하고 해석하는 프롬프트입니다.</p>
                                <textarea 
                                    id="sentence-input" 
                                    class="prompt-textarea large" 
                                    placeholder="예: 문장을 다음 순서로 분석해: 1) 토큰화 2) 구문(괄호 규칙 라벨 표준) 3) 어감/의미 분석..."
                                    rows="12"
                                ></textarea>
                                <div class="input-stats">
                                    <span id="sentence-count">0</span>자
                                </div>
                            </div>
                            
                            <!-- Passage 프롬프트 -->
                            <div id="passage-prompt" class="prompt-content">
                                <h4>지문 설명 프롬프트</h4>
                                <p class="mode-description">지문의 핵심 요지를 쉬운 예시로 설명하고 주제를 정리하는 프롬프트입니다.</p>
                                <textarea 
                                    id="passage-input" 
                                    class="prompt-textarea large" 
                                    placeholder="예: 지문을 다음 순서로 설명해: 1) 핵심 요지 2) 쉬운 예시/비유 3) 주제 4) 제목..."
                                    rows="12"
                                ></textarea>
                                <div class="input-stats">
                                    <span id="passage-count">0</span>자
                                </div>
                            </div>
                        </div>
                        
                        <!-- 실시간 미리보기 -->
                        <div class="prompt-section">
                            <h3>실시간 미리보기</h3>
                            <div class="preview-container">
                                <div class="preview-header">
                                    <span class="preview-label">AI 응답 예시</span>
                                    <button class="admin-mode-btn" onclick="generatePreview()">미리보기 생성</button>
                                </div>
                                <div id="preview-content" class="preview-content">
                                    <p class="preview-placeholder">프롬프트를 입력하고 '미리보기 생성' 버튼을 클릭하세요.</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 저장 & 배포 -->
                        <div class="prompt-section">
                            <div class="section-header-with-status">
                                <h3>저장 & 배포</h3>
                                <div id="save-status" class="save-status-inline">
                                    <div class="status-indicator">
                                        <div class="status-dot"></div>
                                        <span class="status-text">대기 중</span>
                                    </div>
                                </div>
                            </div>
                            <div class="save-deploy-container">
                            <div class="save-actions">
                                <button class="admin-mode-btn" onclick="normalizePrompts()" id="normalize-btn">
                                    프롬프트 정규화
                                </button>
                                <button class="admin-mode-btn primary" onclick="saveAndDeployPrompts()">
                                    저장 & 배포
                                </button>
                                <button class="admin-mode-btn" onclick="resetPrompts()">
                                    초기화
                                </button>
                            </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // 초기 데이터 로드
            loadCurrentPrompts();
            attachPromptEventListeners();
            attachAdminButtonListeners();
        }
        
        // 프롬프트 관리 관련 함수들
        function loadCurrentPrompts() {
            // 현재 활성화된 프롬프트 로드 (시뮬레이션)
            const currentPrompts = {
                persona: "너는 친절하고 전문적인 영어 선생님이다. 학생의 눈높이에 맞춰 설명하되, 정확한 문법과 표현을 가르친다. 모든 답변은 한국어로 제공하며, 핵심만 간결하게 전달한다.",
                grammar: "문법 규칙을 다음 순서로 설명해: 1) 핵심 규칙 2) 근거/출처 3) 예문 4) 한 줄 요약. 용어는 풀어서 설명하고, 규칙→예시→반례→요약 순서를 지켜라.",
                sentence: "문장을 다음 순서로 분석해: 1) 토큰화 2) 구문(괄호 규칙 라벨 표준에 따른 구조) 3) 어감/의미 분석. S/V/O/C/M 라벨링을 정확히 하고 근거·출처를 요약해라.",
                passage: "지문을 다음 순서로 설명해: 1) 핵심 요지 2) 쉬운 예시/비유 3) 주제 4) 제목. 요지→예시→주제→제목 순서를 지키고 핵심을 누락하지 마라."
            };
            
            // 입력 필드에 현재 프롬프트 설정
            document.getElementById('persona-input').value = currentPrompts.persona;
            document.getElementById('grammar-input').value = currentPrompts.grammar;
            document.getElementById('sentence-input').value = currentPrompts.sentence;
            document.getElementById('passage-input').value = currentPrompts.passage;
            
            // 글자 수 업데이트
            updateCharacterCounts();
        }
        
        function attachPromptEventListeners() {
            // 텍스트 입력 시 글자 수 업데이트 및 자동 높이 조절
            const textareas = ['persona-input', 'grammar-input', 'sentence-input', 'passage-input'];
            textareas.forEach(id => {
                const textarea = document.getElementById(id);
                if (textarea) {
                    textarea.addEventListener('input', function() {
                        updateCharacterCounts();
                        autoResizeTextarea(this);
                    });
                    // 초기 로드 시에도 높이 조절
                    autoResizeTextarea(textarea);
                }
            });
        }
        
        function autoResizeTextarea(textarea) {
            // 높이를 초기화하여 정확한 스크롤 높이 계산
            textarea.style.height = 'auto';
            
            // 스크롤 높이를 기반으로 새로운 높이 설정
            const scrollHeight = textarea.scrollHeight;
            const minHeight = textarea.classList.contains('large') ? 200 : 100;
            const maxHeight = 600; // 최대 높이 제한
            
            // 최소/최대 높이 범위 내에서 설정
            const newHeight = Math.max(minHeight, Math.min(scrollHeight, maxHeight));
            textarea.style.height = newHeight + 'px';
            
            // 최대 높이에 도달하면 스크롤 표시
            if (scrollHeight > maxHeight) {
                textarea.style.overflowY = 'auto';
            } else {
                textarea.style.overflowY = 'hidden';
            }
        }
        
        function updateCharacterCounts() {
            const counts = {
                'persona-input': 'persona-count',
                'grammar-input': 'grammar-count',
                'sentence-input': 'sentence-count',
                'passage-input': 'passage-count'
            };
            
            Object.entries(counts).forEach(([inputId, countId]) => {
                const input = document.getElementById(inputId);
                const count = document.getElementById(countId);
                if (input && count) {
                    const length = input.value.length;
                    count.textContent = length;
                    
                    // 글자 수 제한에 따른 색상 변경
                    const maxLength = inputId === 'persona-input' ? 500 : 1000;
                    if (length > maxLength * 0.9) {
                        count.style.color = '#ff6b6b';
                    } else if (length > maxLength * 0.7) {
                        count.style.color = '#ffa726';
                    } else {
                        count.style.color = '#4caf50';
                    }
                }
            });
        }
        
        function switchPromptTab(mode) {
            // 탭 버튼 활성화
            document.querySelectorAll('.prompt-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[data-mode="${mode}"]`).classList.add('active');
            
            // 콘텐츠 영역 활성화
            document.querySelectorAll('.prompt-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`${mode}-prompt`).classList.add('active');
        }
        
        function generatePreview() {
            const persona = document.getElementById('persona-input').value;
            const grammar = document.getElementById('grammar-input').value;
            const sentence = document.getElementById('sentence-input').value;
            const passage = document.getElementById('passage-input').value;
            
            if (!persona.trim()) {
                alert('공통 페르소나를 먼저 입력해주세요.');
                return;
            }
            
            // 미리보기 생성 (시뮬레이션)
            const previewContent = document.getElementById('preview-content');
            previewContent.innerHTML = `
                <div class="preview-loading">
                    <div class="loading-spinner"></div>
                    <p>AI 응답을 생성하고 있습니다...</p>
                </div>
            `;
            
            // 2초 후 미리보기 결과 표시
            setTimeout(() => {
                const sampleResponse = generateSampleResponse(persona, grammar, sentence, passage);
                previewContent.innerHTML = `
                    <div class="preview-result">
                        <div class="preview-question">
                            <strong>질문:</strong> "a/an 규칙을 설명해줘"
                        </div>
                        <div class="preview-answer">
                            <strong>AI 응답:</strong>
                            <div class="answer-content">${sampleResponse}</div>
                        </div>
                    </div>
                `;
            }, 2000);
        }
        
        function generateSampleResponse(persona, grammar, sentence, passage) {
            // 현재 활성 탭에 따른 샘플 응답 생성
            const activeTab = document.querySelector('.prompt-tab.active');
            const mode = activeTab ? activeTab.dataset.mode : 'grammar';
            
            const responses = {
                grammar: `
                    <strong>핵심 규칙:</strong> a/an은 다음 단어의 첫 소리에 따라 결정됩니다.<br>
                    <strong>근거/출처:</strong> [이유문법] - 모음 소리로 시작하면 an, 자음 소리로 시작하면 a<br>
                    <strong>예문:</strong> a book, an apple, a university, an hour<br>
                    <strong>한 줄 요약:</strong> 다음 단어의 첫 소리가 모음이면 an, 자음이면 a를 사용합니다.
                `,
                sentence: `
                    <strong>원문:</strong> "I stayed at home yesterday."<br>
                    <strong>구조 분석:</strong> [S I] [V stayed] [M at home] [M yesterday]<br>
                    <strong>어휘·표현:</strong> stay at home (집에 머물다)<br>
                    <strong>해석:</strong> 나는 어제 집에 머물렀다.<br>
                    <strong>요약:</strong> 주어(I) + 동사(stayed) + 장소부사구(at home) + 시간부사(yesterday)
                `,
                passage: `
                    <strong>핵심 요지:</strong> 환경 보호의 중요성과 개인의 역할<br>
                    <strong>쉬운 예시:</strong> 집 청소처럼, 지구도 우리가 돌봐야 합니다<br>
                    <strong>주제:</strong> 환경 보호와 지속 가능한 생활<br>
                    <strong>제목:</strong> "작은 실천이 만드는 큰 변화"
                `
            };
            
            return responses[mode] || responses.grammar;
        }
        
        function normalizePrompts() {
            const normalizeBtn = document.getElementById('normalize-btn');
            const originalText = normalizeBtn.textContent;
            
            // 정규화 시작 - 펄스 효과
            normalizeBtn.textContent = '정규화 중...';
            normalizeBtn.classList.add('validating');
            normalizeBtn.disabled = true;
            
            const persona = document.getElementById('persona-input').value.trim();
            const grammar = document.getElementById('grammar-input').value.trim();
            const sentence = document.getElementById('sentence-input').value.trim();
            const passage = document.getElementById('passage-input').value.trim();
            
            const errors = [];
            
            if (!persona) errors.push('공통 페르소나를 입력해주세요.');
            if (!grammar) errors.push('문법 프롬프트를 입력해주세요.');
            if (!sentence) errors.push('문장 프롬프트를 입력해주세요.');
            if (!passage) errors.push('지문 프롬프트를 입력해주세요.');
            
            // 2초 후 정규화 결과 표시
            setTimeout(() => {
                normalizeBtn.classList.remove('validating');
                normalizeBtn.disabled = false;
                
                if (errors.length > 0) {
                    normalizeBtn.textContent = '정규화 실패';
                    normalizeBtn.style.background = 'linear-gradient(145deg, #f44336, #d32f2f)';
                    alert('정규화 오류:\n' + errors.join('\n'));
                    
                    // 2초 후 원래 상태로 복원
                    setTimeout(() => {
                        normalizeBtn.textContent = originalText;
                        normalizeBtn.style.background = '';
                    }, 2000);
                    return false;
                } else {
                    // AI가 읽기 쉬운 형태로 정규화 시뮬레이션
                    normalizePromptsContent();
                    
                    normalizeBtn.textContent = '정규화 완료';
                    normalizeBtn.style.background = 'linear-gradient(145deg, #4CAF50, #45a049)';
                    alert('✅ 프롬프트가 AI가 읽기 쉬운 형태로 정규화되었습니다!');
                    
                    // 2초 후 원래 상태로 복원
                    setTimeout(() => {
                        normalizeBtn.textContent = originalText;
                        normalizeBtn.style.background = '';
                    }, 2000);
                    return true;
                }
            }, 2000);
        }
        
        function normalizePromptsContent() {
            // 자연어를 AI가 읽기 쉬운 구조화된 형태로 변환
            const persona = document.getElementById('persona-input').value;
            const grammar = document.getElementById('grammar-input').value;
            const sentence = document.getElementById('sentence-input').value;
            const passage = document.getElementById('passage-input').value;
            
            // 정규화된 형태로 변환 (실제로는 AI API 호출)
            const normalizedPersona = normalizeText(persona, 'persona');
            const normalizedGrammar = normalizeText(grammar, 'grammar');
            const normalizedSentence = normalizeText(sentence, 'sentence');
            const normalizedPassage = normalizeText(passage, 'passage');
            
            // 정규화된 내용으로 업데이트
            document.getElementById('persona-input').value = normalizedPersona;
            document.getElementById('grammar-input').value = normalizedGrammar;
            document.getElementById('sentence-input').value = normalizedSentence;
            document.getElementById('passage-input').value = normalizedPassage;
            
            // 글자 수 업데이트
            updateCharacterCounts();
        }
        
        function normalizeText(text, type) {
            // 실제로는 AI API를 호출하여 정규화하지만, 여기서는 시뮬레이션
            let normalized = text;
            
            switch(type) {
                case 'persona':
                    // 페르소나 정규화: 명확한 역할 정의와 행동 지침으로 구조화
                    normalized = text
                        .replace(/너는/g, 'AI는')
                        .replace(/학생/g, '사용자')
                        .replace(/가르친다/g, '가르친다.')
                        .replace(/제공한다/g, '제공한다.')
                        .replace(/설명한다/g, '설명한다.')
                        + '\n\n[행동 지침]\n- 모든 응답은 한국어로 제공\n- 핵심만 간결하게 전달\n- 예시와 비유 적절히 사용\n- 단계별 설명 제공';
                    break;
                    
                case 'grammar':
                    // 문법 프롬프트 정규화: 단계별 구조화
                    normalized = text
                        .replace(/1\)/g, '[1단계]')
                        .replace(/2\)/g, '[2단계]')
                        .replace(/3\)/g, '[3단계]')
                        .replace(/4\)/g, '[4단계]')
                        + '\n\n[응답 형식]\n- 각 단계별로 명확한 구분\n- 구체적인 예시 제공\n- 반례와 예외사항 포함\n- 한 줄 요약으로 마무리';
                    break;
                    
                case 'sentence':
                    // 문장 분석 정규화: 분석 단계 구조화
                    normalized = text
                        .replace(/1\)/g, '[1단계]')
                        .replace(/2\)/g, '[2단계]')
                        .replace(/3\)/g, '[3단계]')
                        + '\n\n[분석 형식]\n- 토큰화: 단어별 분리\n- 구문 분석: 괄호 규칙 적용\n- 의미 분석: 어감과 뉘앙스 설명';
                    break;
                    
                case 'passage':
                    // 지문 설명 정규화: 설명 구조화
                    normalized = text
                        .replace(/1\)/g, '[1단계]')
                        .replace(/2\)/g, '[2단계]')
                        .replace(/3\)/g, '[3단계]')
                        .replace(/4\)/g, '[4단계]')
                        + '\n\n[설명 형식]\n- 핵심 요지 파악\n- 쉬운 예시와 비유\n- 주제 정리\n- 제목 제안';
                    break;
            }
            
            return normalized;
        }
        
        function saveAndDeployPrompts() {
            // 정규화는 별도로 수행하므로 여기서는 바로 저장 진행
            
            const saveStatus = document.getElementById('save-status');
            const statusDot = saveStatus.querySelector('.status-dot');
            const statusText = saveStatus.querySelector('.status-text');
            
            // 저장 시작
            statusText.textContent = '저장 중...';
            statusDot.className = 'status-dot saving';
            
            // 시뮬레이션: 저장 및 배포 과정
            setTimeout(() => {
                statusText.textContent = 'GitHub에 업로드 중...';
                statusDot.className = 'status-dot uploading';
                
                setTimeout(() => {
                    statusText.textContent = '로컬에 저장 중...';
                    statusDot.className = 'status-dot saving';
                    
                    setTimeout(() => {
                        statusText.textContent = '저장 & 배포 완료!';
                        statusDot.className = 'status-dot completed';
                        
                        // 버전 정보 업데이트
                        const now = new Date();
                        const versionNumber = `v${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')}-${String(now.getHours()).padStart(2, '0')}${String(now.getMinutes()).padStart(2, '0')}`;
                        const versionDate = now.toLocaleString('ko-KR');
                        
                        document.querySelector('.version-number').textContent = versionNumber;
                        document.querySelector('.version-date').textContent = versionDate;
                        
                        // 3초 후 초기 상태로 복원
                        setTimeout(() => {
                            statusText.textContent = '대기 중';
                            statusDot.className = 'status-dot';
                        }, 3000);
                    }, 1000);
                }, 1500);
            }, 1000);
        }
        
        function resetPrompts() {
            if (confirm('모든 프롬프트를 초기화하시겠습니까?')) {
                document.getElementById('persona-input').value = '';
                document.getElementById('grammar-input').value = '';
                document.getElementById('sentence-input').value = '';
                document.getElementById('passage-input').value = '';
                updateCharacterCounts();
                
                document.getElementById('preview-content').innerHTML = 
                    '<p class="preview-placeholder">프롬프트를 입력하고 \'미리보기 생성\' 버튼을 클릭하세요.</p>';
            }
        }
        
        function showPromptHistory() {
            alert('프롬프트 변경 이력 기능은 향후 구현 예정입니다.');
        }
        
        function rollbackPrompt() {
            alert('이전 버전으로 되돌리기 기능은 향후 구현 예정입니다.');
        }
        
        // 시스템 관리 페이지
        function showSystemManagement() {
            setActiveAdminButton('시스템');
            const responseArea = document.getElementById('response-area');
            if (!responseArea) return;
            
            responseArea.innerHTML = `
                <div class="admin-system-management">
                    <h1>시스템 관리</h1>
                    
                    <div class="system-management-grid">
                        <div class="system-card">
                            <h2>인덱스 관리</h2>
                            <div class="index-status-info">
                                <div class="status-row">
                                    <span class="status-label">prepared 폴더:</span>
                                    <span class="status-value" id="prepared-total-files">총 15개 파일</span>
                                </div>
                                <div class="status-row">
                                    <span class="status-label">새 파일:</span>
                                    <span class="status-value" id="prepared-new-files">3개 파일</span>
                                </div>
                                <div class="status-row">
                                    <span class="status-label">현재 인덱스:</span>
                                    <span class="status-value" id="current-index-name">index_2025-01-07_18-30-45</span>
                                </div>
                                <div class="status-row">
                                    <span class="status-label">인덱싱된 파일:</span>
                                    <span class="status-value" id="indexed-files-count">1,247개 파일</span>
                                </div>
                            </div>
                            <div class="index-control-buttons">
                                <button class="admin-mode-btn" data-action="start-indexing">인덱싱 시작</button>
                                <button class="admin-mode-btn" data-action="upload-to-release">릴리스로 업로드</button>
                                <button class="admin-mode-btn" data-action="restore-from-local">로컬에서 복원</button>
                            </div>
                        </div>
                        
                        
                        <div class="system-card">
                            <h2>시스템 설정</h2>
                            <div class="system-settings-grid">
                                <div class="settings-section">
                                    <h3>환경 변수 관리</h3>
                                    <p>API 키, 경로 설정</p>
                                    <button class="admin-mode-btn" data-action="env-settings">환경 설정</button>
                                </div>
                                <div class="settings-section">
                                    <h3>보안 설정</h3>
                                    <p>로그인 보안, 입력 검증</p>
                                    <button class="admin-mode-btn" data-action="security-settings">보안 설정</button>
                                </div>
                                <div class="settings-section">
                                    <h3>성능 관리</h3>
                                    <p>모니터링, 최적화</p>
                                    <button class="admin-mode-btn" data-action="performance-settings">성능 관리</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // 인덱스 상태 정보 업데이트
            updateIndexStatusInfo();
            
            attachAdminButtonListeners();
        }
        
        // 인덱스 상태 정보 업데이트 함수
        function updateIndexStatusInfo() {
            const preparedTotalElement = document.getElementById('prepared-total-files');
            const preparedNewElement = document.getElementById('prepared-new-files');
            const currentIndexElement = document.getElementById('current-index-name');
            const indexedFilesElement = document.getElementById('indexed-files-count');
            
            if (preparedTotalElement) {
                const totalFilesCount = getTotalPreparedFilesCount();
                preparedTotalElement.textContent = `총 ${totalFilesCount}개 파일`;
            }
            
            if (preparedNewElement) {
                const newFilesCount = getNewFilesCount();
                preparedNewElement.textContent = `${newFilesCount}개 파일`;
            }
            
            if (currentIndexElement) {
                const currentIndexInfo = getCurrentIndexInfo();
                currentIndexElement.textContent = currentIndexInfo.name;
            }
            
            if (indexedFilesElement) {
                const currentIndexInfo = getCurrentIndexInfo();
                indexedFilesElement.textContent = `${currentIndexInfo.fileCount.toLocaleString()}개 파일`;
            }
        }
        
        // prepared 폴더 총 파일 수 가져오기
        function getTotalPreparedFilesCount() {
            // 실제로는 prepared 폴더의 총 파일 개수를 확인해야 함
            return 15; // 시뮬레이션
        }
        
        // 환경 변수 관리 페이지
        function showEnvironmentSettings() {
            setActiveAdminButton('환경 설정');
            const responseArea = document.getElementById('response-area');
            if (!responseArea) return;
            
            responseArea.innerHTML = `
                <div class="admin-environment-settings">
                    <button class="back-button" onclick="showSystemManagement()">←</button>
                    <h1>환경 변수 관리</h1>
                    
                    <div class="env-settings-container">
                        <!-- API 키 설정 -->
                        <div class="env-section">
                            <h2>🔑 API 키 설정</h2>
                            <div class="env-grid">
                                <div class="env-item">
                                    <label>OpenAI API Key</label>
                                    <div class="env-input-group">
                                        <input type="password" id="openai-key" placeholder="sk-..." class="env-input">
                                        <span class="env-status" id="openai-status">미설정</span>
                                    </div>
                                </div>
                                <div class="env-item">
                                    <label>Gemini API Key</label>
                                    <div class="env-input-group">
                                        <input type="password" id="gemini-key" placeholder="AI..." class="env-input">
                                        <span class="env-status" id="gemini-status">미설정</span>
                                    </div>
                                </div>
                                <div class="env-item">
                                    <label>GitHub Token</label>
                                    <div class="env-input-group">
                                        <input type="password" id="github-token" placeholder="ghp_..." class="env-input">
                                        <span class="env-status" id="github-status">미설정</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 경로 설정 -->
                        <div class="env-section">
                            <h2>📁 경로 설정</h2>
                            <div class="env-grid">
                                <div class="env-item">
                                    <label>Persist Directory</label>
                                    <div class="env-input-group">
                                        <input type="text" id="persist-dir" value="~/.maic/persist" class="env-input">
                                        <button class="env-btn" onclick="browseDirectory('persist-dir')">찾아보기</button>
                                    </div>
                                </div>
                                <div class="env-item">
                                    <label>App Data Directory</label>
                                    <div class="env-input-group">
                                        <input type="text" id="app-data-dir" value="~/.local/share/my_ai_teacher" class="env-input">
                                        <button class="env-btn" onclick="browseDirectory('app-data-dir')">찾아보기</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Google Drive 설정 -->
                        <div class="env-section">
                            <h2>☁️ Google Drive 설정</h2>
                            <div class="env-grid">
                                <div class="env-item">
                                    <label>Prepared Folder ID</label>
                                    <div class="env-input-group">
                                        <input type="text" id="gdrive-prepared-id" placeholder="1ABC..." class="env-input">
                                        <span class="env-status" id="gdrive-prepared-status">미설정</span>
                                    </div>
                                </div>
                                <div class="env-item">
                                    <label>Backup Folder ID</label>
                                    <div class="env-input-group">
                                        <input type="text" id="gdrive-backup-id" placeholder="1XYZ..." class="env-input">
                                        <span class="env-status" id="gdrive-backup-status">미설정</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 앱 모드 설정 -->
                        <div class="env-section">
                            <h2>⚙️ 앱 모드 설정</h2>
                            <div class="env-grid">
                                <div class="env-item">
                                    <label>자동 시작 모드</label>
                                    <div class="env-toggle-group">
                                        <label class="env-toggle">
                                            <input type="checkbox" id="auto-start-mode" checked>
                                            <span class="env-toggle-slider"></span>
                                        </label>
                                        <span class="env-toggle-label">활성화</span>
                                    </div>
                                </div>
                                <div class="env-item">
                                    <label>학생용 모드 잠금</label>
                                    <div class="env-toggle-group">
                                        <label class="env-toggle">
                                            <input type="checkbox" id="lock-mode-students">
                                            <span class="env-toggle-slider"></span>
                                        </label>
                                        <span class="env-toggle-label">비활성화</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 액션 버튼 -->
                        <div class="env-actions">
                            <button class="admin-mode-btn primary" onclick="saveEnvironmentSettings()">설정 저장</button>
                            <button class="admin-mode-btn secondary" onclick="resetEnvironmentSettings()">기본값 복원</button>
                            <button class="admin-mode-btn secondary" onclick="exportEnvironmentSettings()">내보내기</button>
                            <button class="admin-mode-btn secondary" onclick="importEnvironmentSettings()">가져오기</button>
                        </div>
                    </div>
                </div>
            `;
            
            // 현재 설정값 로드
            loadEnvironmentSettings();
        }
        
        // 환경 변수 설정 로드
        function loadEnvironmentSettings() {
            // 시뮬레이션된 현재 설정값들
            const settings = {
                openaiKey: 'sk-...',
                geminiKey: '',
                githubToken: 'ghp_...',
                persistDir: '~/.maic/persist',
                appDataDir: '~/.local/share/my_ai_teacher',
                gdrivePreparedId: '1ABC...',
                gdriveBackupId: '',
                autoStartMode: true,
                lockModeStudents: false
            };
            
            // 입력 필드에 값 설정
            document.getElementById('openai-key').value = settings.openaiKey;
            document.getElementById('gemini-key').value = settings.geminiKey;
            document.getElementById('github-token').value = settings.githubToken;
            document.getElementById('persist-dir').value = settings.persistDir;
            document.getElementById('app-data-dir').value = settings.appDataDir;
            document.getElementById('gdrive-prepared-id').value = settings.gdrivePreparedId;
            document.getElementById('gdrive-backup-id').value = settings.gdriveBackupId;
            document.getElementById('auto-start-mode').checked = settings.autoStartMode;
            document.getElementById('lock-mode-students').checked = settings.lockModeStudents;
            
            // 상태 업데이트
            updateEnvironmentStatus();
        }
        
        // 환경 변수 상태 업데이트
        function updateEnvironmentStatus() {
            const statusElements = {
                'openai-status': document.getElementById('openai-key').value,
                'gemini-status': document.getElementById('gemini-key').value,
                'github-status': document.getElementById('github-token').value,
                'gdrive-prepared-status': document.getElementById('gdrive-prepared-id').value,
                'gdrive-backup-status': document.getElementById('gdrive-backup-id').value
            };
            
            Object.entries(statusElements).forEach(([statusId, value]) => {
                const statusElement = document.getElementById(statusId);
                if (statusElement) {
                    if (value && value.trim() !== '') {
                        statusElement.textContent = '설정됨';
                        statusElement.style.background = 'linear-gradient(145deg, #4CAF50, #2E7D32)';
                        statusElement.style.color = 'white';
                    } else {
                        statusElement.textContent = '미설정';
                        statusElement.style.background = 'linear-gradient(145deg, #FFC107, #FF9800)';
                        statusElement.style.color = 'white';
                    }
                }
            });
        }
        
        // 환경 변수 설정 저장
        function saveEnvironmentSettings() {
            const settings = {
                openaiKey: document.getElementById('openai-key').value,
                geminiKey: document.getElementById('gemini-key').value,
                githubToken: document.getElementById('github-token').value,
                persistDir: document.getElementById('persist-dir').value,
                appDataDir: document.getElementById('app-data-dir').value,
                gdrivePreparedId: document.getElementById('gdrive-prepared-id').value,
                gdriveBackupId: document.getElementById('gdrive-backup-id').value,
                autoStartMode: document.getElementById('auto-start-mode').checked,
                lockModeStudents: document.getElementById('lock-mode-students').checked
            };
            
            // localStorage에 저장 (실제로는 서버에 저장해야 함)
            localStorage.setItem('maic_environment_settings', JSON.stringify(settings));
            
            alert('환경 변수 설정이 저장되었습니다.\n\n• API 키 설정 완료\n• 경로 설정 완료\n• Google Drive 설정 완료\n• 앱 모드 설정 완료\n\n✅ 모든 설정이 적용되었습니다.');
        }
        
        // 환경 변수 설정 초기화
        function resetEnvironmentSettings() {
            if (confirm('모든 환경 변수 설정을 기본값으로 초기화하시겠습니까?')) {
                // 기본값으로 초기화
                document.getElementById('openai-key').value = '';
                document.getElementById('gemini-key').value = '';
                document.getElementById('github-token').value = '';
                document.getElementById('persist-dir').value = '~/.maic/persist';
                document.getElementById('app-data-dir').value = '~/.local/share/my_ai_teacher';
                document.getElementById('gdrive-prepared-id').value = '';
                document.getElementById('gdrive-backup-id').value = '';
                document.getElementById('auto-start-mode').checked = true;
                document.getElementById('lock-mode-students').checked = false;
                
                updateEnvironmentStatus();
                alert('환경 변수 설정이 기본값으로 초기화되었습니다.');
            }
        }
        
        // 환경 변수 설정 내보내기
        function exportEnvironmentSettings() {
            const settings = {
                openaiKey: document.getElementById('openai-key').value,
                geminiKey: document.getElementById('gemini-key').value,
                githubToken: document.getElementById('github-token').value,
                persistDir: document.getElementById('persist-dir').value,
                appDataDir: document.getElementById('app-data-dir').value,
                gdrivePreparedId: document.getElementById('gdrive-prepared-id').value,
                gdriveBackupId: document.getElementById('gdrive-backup-id').value,
                autoStartMode: document.getElementById('auto-start-mode').checked,
                lockModeStudents: document.getElementById('lock-mode-students').checked
            };
            
            const dataStr = JSON.stringify(settings, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'maic_environment_settings.json';
            link.click();
            URL.revokeObjectURL(url);
            
            alert('환경 변수 설정이 maic_environment_settings.json 파일로 내보내졌습니다.');
        }
        
        // 환경 변수 설정 가져오기
        function importEnvironmentSettings() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = function(event) {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        try {
                            const settings = JSON.parse(e.target.result);
                            
                            // 입력 필드에 값 설정
                            document.getElementById('openai-key').value = settings.openaiKey || '';
                            document.getElementById('gemini-key').value = settings.geminiKey || '';
                            document.getElementById('github-token').value = settings.githubToken || '';
                            document.getElementById('persist-dir').value = settings.persistDir || '~/.maic/persist';
                            document.getElementById('app-data-dir').value = settings.appDataDir || '~/.local/share/my_ai_teacher';
                            document.getElementById('gdrive-prepared-id').value = settings.gdrivePreparedId || '';
                            document.getElementById('gdrive-backup-id').value = settings.gdriveBackupId || '';
                            document.getElementById('auto-start-mode').checked = settings.autoStartMode !== false;
                            document.getElementById('lock-mode-students').checked = settings.lockModeStudents === true;
                            
                            updateEnvironmentStatus();
                            alert('환경 변수 설정이 성공적으로 가져와졌습니다.');
                        } catch (error) {
                            alert('파일 형식이 올바르지 않습니다. JSON 파일을 선택해주세요.');
                        }
                    };
                    reader.readAsText(file);
                }
            };
            input.click();
        }
        
        // 디렉토리 찾아보기
        function browseDirectory(inputId) {
            // 실제로는 파일 시스템 API를 사용해야 함
            alert('디렉토리 찾아보기 기능은 브라우저 환경에서 제한됩니다.\n직접 경로를 입력해주세요.');
        }
        
        // 보안 설정 페이지
        function showSecuritySettings() {
            setActiveAdminButton('보안 설정');
            const responseArea = document.getElementById('response-area');
            if (!responseArea) return;
            
            responseArea.innerHTML = `
                <div class="admin-security-settings">
                    <button class="back-button" onclick="showSystemManagement()">←</button>
                    <h1>보안 설정</h1>
                    
                    <div class="security-settings-container">
                        <!-- 로그인 보안 -->
                        <div class="security-section">
                            <h2>🔐 로그인 보안</h2>
                            <div class="security-grid">
                                <div class="security-item">
                                    <label>관리자 비밀번호</label>
                                    <div class="security-input-group">
                                        <input type="password" id="admin-password" placeholder="새 비밀번호" class="security-input">
                                        <button class="security-btn" onclick="changeAdminPassword()">변경</button>
                                    </div>
                                </div>
                                <div class="security-item">
                                    <label>로그인 시도 제한</label>
                                    <div class="security-toggle-group">
                                        <label class="security-toggle">
                                            <input type="checkbox" id="login-limit-enabled" checked>
                                            <span class="security-toggle-slider"></span>
                                        </label>
                                        <span class="security-toggle-label">활성화</span>
                                    </div>
                                </div>
                                <div class="security-item">
                                    <label>최대 로그인 시도</label>
                                    <div class="security-input-group">
                                        <input type="number" id="max-login-attempts" value="5" min="3" max="10" class="security-input">
                                        <span class="security-unit">회</span>
                                    </div>
                                </div>
                                <div class="security-item">
                                    <label>계정 잠금 시간</label>
                                    <div class="security-input-group">
                                        <input type="number" id="lockout-duration" value="15" min="5" max="60" class="security-input">
                                        <span class="security-unit">분</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 입력 검증 -->
                        <div class="security-section">
                            <h2>🛡️ 입력 검증</h2>
                            <div class="security-grid">
                                <div class="security-item">
                                    <label>SQL 인젝션 방지</label>
                                    <div class="security-toggle-group">
                                        <label class="security-toggle">
                                            <input type="checkbox" id="sql-injection-protection" checked>
                                            <span class="security-toggle-slider"></span>
                                        </label>
                                        <span class="security-toggle-label">활성화</span>
                                    </div>
                                </div>
                                <div class="security-item">
                                    <label>XSS 방지</label>
                                    <div class="security-toggle-group">
                                        <label class="security-toggle">
                                            <input type="checkbox" id="xss-protection" checked>
                                            <span class="security-toggle-slider"></span>
                                        </label>
                                        <span class="security-toggle-label">활성화</span>
                                    </div>
                                </div>
                                <div class="security-item">
                                    <label>파일 업로드 검증</label>
                                    <div class="security-toggle-group">
                                        <label class="security-toggle">
                                            <input type="checkbox" id="file-upload-validation" checked>
                                            <span class="security-toggle-slider"></span>
                                        </label>
                                        <span class="security-toggle-label">활성화</span>
                                    </div>
                                </div>
                                <div class="security-item">
                                    <label>최대 파일 크기</label>
                                    <div class="security-input-group">
                                        <input type="number" id="max-file-size" value="10" min="1" max="100" class="security-input">
                                        <span class="security-unit">MB</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 세션 관리 -->
                        <div class="security-section">
                            <h2>⏰ 세션 관리</h2>
                            <div class="security-grid">
                                <div class="security-item">
                                    <label>세션 타임아웃</label>
                                    <div class="security-input-group">
                                        <input type="number" id="session-timeout" value="30" min="5" max="120" class="security-input">
                                        <span class="security-unit">분</span>
                                    </div>
                                </div>
                                <div class="security-item">
                                    <label>자동 로그아웃</label>
                                    <div class="security-toggle-group">
                                        <label class="security-toggle">
                                            <input type="checkbox" id="auto-logout" checked>
                                            <span class="security-toggle-slider"></span>
                                        </label>
                                        <span class="security-toggle-label">활성화</span>
                                    </div>
                                </div>
                                <div class="security-item">
                                    <label>동시 세션 제한</label>
                                    <div class="security-input-group">
                                        <input type="number" id="max-concurrent-sessions" value="3" min="1" max="10" class="security-input">
                                        <span class="security-unit">개</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 보안 로그 -->
                        <div class="security-section">
                            <h2>📋 보안 로그</h2>
                            <div class="security-grid">
                                <div class="security-item">
                                    <label>로그인 시도 기록</label>
                                    <div class="security-toggle-group">
                                        <label class="security-toggle">
                                            <input type="checkbox" id="login-attempt-logging" checked>
                                            <span class="security-toggle-slider"></span>
                                        </label>
                                        <span class="security-toggle-label">활성화</span>
                                    </div>
                                </div>
                                <div class="security-item">
                                    <label>보안 이벤트 기록</label>
                                    <div class="security-toggle-group">
                                        <label class="security-toggle">
                                            <input type="checkbox" id="security-event-logging" checked>
                                            <span class="security-toggle-slider"></span>
                                        </label>
                                        <span class="security-toggle-label">활성화</span>
                                    </div>
                                </div>
                                <div class="security-item">
                                    <label>로그 보관 기간</label>
                                    <div class="security-input-group">
                                        <input type="number" id="log-retention-days" value="30" min="7" max="365" class="security-input">
                                        <span class="security-unit">일</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 액션 버튼 -->
                        <div class="security-actions">
                            <button class="admin-mode-btn primary" onclick="saveSecuritySettings()">보안 설정 저장</button>
                            <button class="admin-mode-btn secondary" onclick="resetSecuritySettings()">기본값 복원</button>
                            <button class="admin-mode-btn secondary" onclick="viewSecurityLogs()">보안 로그 보기</button>
                            <button class="admin-mode-btn secondary" onclick="testSecuritySettings()">보안 테스트</button>
                        </div>
                    </div>
                </div>
            `;
            
            // 현재 보안 설정값 로드
            loadSecuritySettings();
        }
        
        // 보안 설정 로드
        function loadSecuritySettings() {
            // 시뮬레이션된 현재 보안 설정값들
            const settings = {
                loginLimitEnabled: true,
                maxLoginAttempts: 5,
                lockoutDuration: 15,
                sqlInjectionProtection: true,
                xssProtection: true,
                fileUploadValidation: true,
                maxFileSize: 10,
                sessionTimeout: 30,
                autoLogout: true,
                maxConcurrentSessions: 3,
                loginAttemptLogging: true,
                securityEventLogging: true,
                logRetentionDays: 30
            };
            
            // 입력 필드에 값 설정
            document.getElementById('login-limit-enabled').checked = settings.loginLimitEnabled;
            document.getElementById('max-login-attempts').value = settings.maxLoginAttempts;
            document.getElementById('lockout-duration').value = settings.lockoutDuration;
            document.getElementById('sql-injection-protection').checked = settings.sqlInjectionProtection;
            document.getElementById('xss-protection').checked = settings.xssProtection;
            document.getElementById('file-upload-validation').checked = settings.fileUploadValidation;
            document.getElementById('max-file-size').value = settings.maxFileSize;
            document.getElementById('session-timeout').value = settings.sessionTimeout;
            document.getElementById('auto-logout').checked = settings.autoLogout;
            document.getElementById('max-concurrent-sessions').value = settings.maxConcurrentSessions;
            document.getElementById('login-attempt-logging').checked = settings.loginAttemptLogging;
            document.getElementById('security-event-logging').checked = settings.securityEventLogging;
            document.getElementById('log-retention-days').value = settings.logRetentionDays;
        }
        
        // 관리자 비밀번호 변경
        function changeAdminPassword() {
            const newPassword = document.getElementById('admin-password').value;
            if (!newPassword || newPassword.length < 6) {
                alert('비밀번호는 최소 6자 이상이어야 합니다.');
                return;
            }
            
            if (confirm('관리자 비밀번호를 변경하시겠습니까?')) {
                // 실제로는 서버에 비밀번호 변경 요청을 보내야 함
                localStorage.setItem('maic_admin_password', newPassword);
                document.getElementById('admin-password').value = '';
                alert('관리자 비밀번호가 성공적으로 변경되었습니다.');
            }
        }
        
        // 보안 설정 저장
        function saveSecuritySettings() {
            const settings = {
                loginLimitEnabled: document.getElementById('login-limit-enabled').checked,
                maxLoginAttempts: parseInt(document.getElementById('max-login-attempts').value),
                lockoutDuration: parseInt(document.getElementById('lockout-duration').value),
                sqlInjectionProtection: document.getElementById('sql-injection-protection').checked,
                xssProtection: document.getElementById('xss-protection').checked,
                fileUploadValidation: document.getElementById('file-upload-validation').checked,
                maxFileSize: parseInt(document.getElementById('max-file-size').value),
                sessionTimeout: parseInt(document.getElementById('session-timeout').value),
                autoLogout: document.getElementById('auto-logout').checked,
                maxConcurrentSessions: parseInt(document.getElementById('max-concurrent-sessions').value),
                loginAttemptLogging: document.getElementById('login-attempt-logging').checked,
                securityEventLogging: document.getElementById('security-event-logging').checked,
                logRetentionDays: parseInt(document.getElementById('log-retention-days').value)
            };
            
            // localStorage에 저장 (실제로는 서버에 저장해야 함)
            localStorage.setItem('maic_security_settings', JSON.stringify(settings));
            
            alert('보안 설정이 저장되었습니다.\n\n• 로그인 보안 설정 완료\n• 입력 검증 설정 완료\n• 세션 관리 설정 완료\n• 보안 로그 설정 완료\n\n✅ 모든 보안 설정이 적용되었습니다.');
        }
        
        // 보안 설정 초기화
        function resetSecuritySettings() {
            if (confirm('모든 보안 설정을 기본값으로 초기화하시겠습니까?')) {
                // 기본값으로 초기화
                document.getElementById('login-limit-enabled').checked = true;
                document.getElementById('max-login-attempts').value = 5;
                document.getElementById('lockout-duration').value = 15;
                document.getElementById('sql-injection-protection').checked = true;
                document.getElementById('xss-protection').checked = true;
                document.getElementById('file-upload-validation').checked = true;
                document.getElementById('max-file-size').value = 10;
                document.getElementById('session-timeout').value = 30;
                document.getElementById('auto-logout').checked = true;
                document.getElementById('max-concurrent-sessions').value = 3;
                document.getElementById('login-attempt-logging').checked = true;
                document.getElementById('security-event-logging').checked = true;
                document.getElementById('log-retention-days').value = 30;
                
                alert('보안 설정이 기본값으로 초기화되었습니다.');
            }
        }
        
        // 보안 로그 보기
        function viewSecurityLogs() {
            alert('보안 로그 보기 기능\n\n• 최근 로그인 시도: 3건\n• 보안 이벤트: 1건\n• 차단된 요청: 0건\n• 의심스러운 활동: 0건\n\n상세 로그는 별도 창에서 확인할 수 있습니다.');
        }
        
        // 보안 테스트
        function testSecuritySettings() {
            alert('보안 테스트 실행\n\n• SQL 인젝션 방지: ✅ 통과\n• XSS 방지: ✅ 통과\n• 파일 업로드 검증: ✅ 통과\n• 세션 보안: ✅ 통과\n• 입력 검증: ✅ 통과\n\n모든 보안 테스트가 통과했습니다.');
        }
        
        // 성능 관리 페이지
        function showPerformanceSettings() {
            setActiveAdminButton('성능 관리');
            const responseArea = document.getElementById('response-area');
            if (!responseArea) return;
            
            responseArea.innerHTML = `
                <div class="admin-performance-settings">
                    <button class="back-button" onclick="showSystemManagement()">←</button>
                    <h1>성능 관리</h1>
                    
                    <div class="performance-settings-container">
                        <!-- 실시간 모니터링 -->
                        <div class="performance-section">
                            <h2>📊 실시간 모니터링</h2>
                            <div class="performance-monitoring-grid">
                                <div class="monitoring-card">
                                    <div class="monitoring-header">
                                        <h3>CPU 사용률</h3>
                                        <span class="monitoring-value" id="cpu-usage">45%</span>
                                    </div>
                                    <div class="monitoring-bar">
                                        <div class="monitoring-progress" id="cpu-progress" style="width: 45%"></div>
                                    </div>
                                </div>
                                <div class="monitoring-card">
                                    <div class="monitoring-header">
                                        <h3>메모리 사용률</h3>
                                        <span class="monitoring-value" id="memory-usage">62%</span>
                                    </div>
                                    <div class="monitoring-bar">
                                        <div class="monitoring-progress" id="memory-progress" style="width: 62%"></div>
                                    </div>
                                </div>
                                <div class="monitoring-card">
                                    <div class="monitoring-header">
                                        <h3>디스크 사용률</h3>
                                        <span class="monitoring-value" id="disk-usage">38%</span>
                                    </div>
                                    <div class="monitoring-bar">
                                        <div class="monitoring-progress" id="disk-progress" style="width: 38%"></div>
                                    </div>
                                </div>
                                <div class="monitoring-card">
                                    <div class="monitoring-header">
                                        <h3>네트워크 사용률</h3>
                                        <span class="monitoring-value" id="network-usage">23%</span>
                                    </div>
                                    <div class="monitoring-bar">
                                        <div class="monitoring-progress" id="network-progress" style="width: 23%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 성능 최적화 -->
                        <div class="performance-section">
                            <h2>⚡ 성능 최적화</h2>
                            <div class="performance-grid">
                                <div class="performance-item">
                                    <label>스트리밍 청크 크기</label>
                                    <div class="performance-input-group">
                                        <input type="number" id="streaming-chunk-size" value="1024" min="512" max="4096" class="performance-input">
                                        <span class="performance-unit">바이트</span>
                                    </div>
                                </div>
                                <div class="performance-item">
                                    <label>캐시 크기</label>
                                    <div class="performance-input-group">
                                        <input type="number" id="cache-size" value="100" min="50" max="500" class="performance-input">
                                        <span class="performance-unit">MB</span>
                                    </div>
                                </div>
                                <div class="performance-item">
                                    <label>동시 요청 제한</label>
                                    <div class="performance-input-group">
                                        <input type="number" id="max-concurrent-requests" value="10" min="5" max="50" class="performance-input">
                                        <span class="performance-unit">개</span>
                                    </div>
                                </div>
                                <div class="performance-item">
                                    <label>응답 타임아웃</label>
                                    <div class="performance-input-group">
                                        <input type="number" id="response-timeout" value="30" min="10" max="120" class="performance-input">
                                        <span class="performance-unit">초</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 메모리 관리 -->
                        <div class="performance-section">
                            <h2>🧠 메모리 관리</h2>
                            <div class="performance-grid">
                                <div class="performance-item">
                                    <label>메모리 사용량 제한</label>
                                    <div class="performance-input-group">
                                        <input type="number" id="memory-limit" value="512" min="256" max="2048" class="performance-input">
                                        <span class="performance-unit">MB</span>
                                    </div>
                                </div>
                                <div class="performance-item">
                                    <label>자동 메모리 정리</label>
                                    <div class="performance-toggle-group">
                                        <label class="performance-toggle">
                                            <input type="checkbox" id="auto-memory-cleanup" checked>
                                            <span class="performance-toggle-slider"></span>
                                        </label>
                                        <span class="performance-toggle-label">활성화</span>
                                    </div>
                                </div>
                                <div class="performance-item">
                                    <label>가비지 컬렉션 주기</label>
                                    <div class="performance-input-group">
                                        <input type="number" id="gc-interval" value="300" min="60" max="1800" class="performance-input">
                                        <span class="performance-unit">초</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 액션 버튼 -->
                        <div class="performance-actions">
                            <button class="admin-mode-btn primary" onclick="savePerformanceSettings()">성능 설정 저장</button>
                            <button class="admin-mode-btn secondary" onclick="resetPerformanceSettings()">기본값 복원</button>
                            <button class="admin-mode-btn secondary" onclick="startPerformanceTest()">성능 테스트</button>
                            <button class="admin-mode-btn secondary" onclick="clearCache()">캐시 정리</button>
                        </div>
                    </div>
                </div>
            `;
            
            // 현재 성능 설정값 로드
            loadPerformanceSettings();
            
            // 실시간 모니터링 시작
            startPerformanceMonitoring();
        }
        
        // 성능 설정 로드
        function loadPerformanceSettings() {
            // 시뮬레이션된 현재 성능 설정값들
            const settings = {
                streamingChunkSize: 1024,
                cacheSize: 100,
                maxConcurrentRequests: 10,
                responseTimeout: 30,
                memoryLimit: 512,
                autoMemoryCleanup: true,
                gcInterval: 300
            };
            
            // 입력 필드에 값 설정
            document.getElementById('streaming-chunk-size').value = settings.streamingChunkSize;
            document.getElementById('cache-size').value = settings.cacheSize;
            document.getElementById('max-concurrent-requests').value = settings.maxConcurrentRequests;
            document.getElementById('response-timeout').value = settings.responseTimeout;
            document.getElementById('memory-limit').value = settings.memoryLimit;
            document.getElementById('auto-memory-cleanup').checked = settings.autoMemoryCleanup;
            document.getElementById('gc-interval').value = settings.gcInterval;
        }
        
        // 실시간 성능 모니터링 시작
        function startPerformanceMonitoring() {
            // 시뮬레이션된 성능 데이터 업데이트
            setInterval(() => {
                updatePerformanceMetrics();
            }, 2000);
        }
        
        // 성능 지표 업데이트
        function updatePerformanceMetrics() {
            // 시뮬레이션된 성능 데이터
            const metrics = {
                cpu: Math.floor(Math.random() * 30) + 30, // 30-60%
                memory: Math.floor(Math.random() * 20) + 50, // 50-70%
                disk: Math.floor(Math.random() * 15) + 30, // 30-45%
                network: Math.floor(Math.random() * 25) + 15 // 15-40%
            };
            
            // CPU 사용률 업데이트
            const cpuUsage = document.getElementById('cpu-usage');
            const cpuProgress = document.getElementById('cpu-progress');
            if (cpuUsage && cpuProgress) {
                cpuUsage.textContent = metrics.cpu + '%';
                cpuProgress.style.width = metrics.cpu + '%';
                cpuProgress.style.background = metrics.cpu > 80 ? 
                    'linear-gradient(90deg, #f44336, #d32f2f)' : 
                    'linear-gradient(90deg, #4CAF50, #2E7D32)';
            }
            
            // 메모리 사용률 업데이트
            const memoryUsage = document.getElementById('memory-usage');
            const memoryProgress = document.getElementById('memory-progress');
            if (memoryUsage && memoryProgress) {
                memoryUsage.textContent = metrics.memory + '%';
                memoryProgress.style.width = metrics.memory + '%';
                memoryProgress.style.background = metrics.memory > 80 ? 
                    'linear-gradient(90deg, #f44336, #d32f2f)' : 
                    'linear-gradient(90deg, #4CAF50, #2E7D32)';
            }
            
            // 디스크 사용률 업데이트
            const diskUsage = document.getElementById('disk-usage');
            const diskProgress = document.getElementById('disk-progress');
            if (diskUsage && diskProgress) {
                diskUsage.textContent = metrics.disk + '%';
                diskProgress.style.width = metrics.disk + '%';
                diskProgress.style.background = metrics.disk > 80 ? 
                    'linear-gradient(90deg, #f44336, #d32f2f)' : 
                    'linear-gradient(90deg, #4CAF50, #2E7D32)';
            }
            
            // 네트워크 사용률 업데이트
            const networkUsage = document.getElementById('network-usage');
            const networkProgress = document.getElementById('network-progress');
            if (networkUsage && networkProgress) {
                networkUsage.textContent = metrics.network + '%';
                networkProgress.style.width = metrics.network + '%';
                networkProgress.style.background = metrics.network > 80 ? 
                    'linear-gradient(90deg, #f44336, #d32f2f)' : 
                    'linear-gradient(90deg, #4CAF50, #2E7D32)';
            }
        }
        
        // 성능 설정 저장
        function savePerformanceSettings() {
            const settings = {
                streamingChunkSize: parseInt(document.getElementById('streaming-chunk-size').value),
                cacheSize: parseInt(document.getElementById('cache-size').value),
                maxConcurrentRequests: parseInt(document.getElementById('max-concurrent-requests').value),
                responseTimeout: parseInt(document.getElementById('response-timeout').value),
                memoryLimit: parseInt(document.getElementById('memory-limit').value),
                autoMemoryCleanup: document.getElementById('auto-memory-cleanup').checked,
                gcInterval: parseInt(document.getElementById('gc-interval').value)
            };
            
            // localStorage에 저장 (실제로는 서버에 저장해야 함)
            localStorage.setItem('maic_performance_settings', JSON.stringify(settings));
            
            alert('성능 설정이 저장되었습니다.\n\n• 스트리밍 최적화 설정 완료\n• 캐시 관리 설정 완료\n• 메모리 관리 설정 완료\n• 실시간 모니터링 활성화\n\n✅ 모든 성능 설정이 적용되었습니다.');
        }
        
        // 성능 설정 초기화
        function resetPerformanceSettings() {
            if (confirm('모든 성능 설정을 기본값으로 초기화하시겠습니까?')) {
                // 기본값으로 초기화
                document.getElementById('streaming-chunk-size').value = 1024;
                document.getElementById('cache-size').value = 100;
                document.getElementById('max-concurrent-requests').value = 10;
                document.getElementById('response-timeout').value = 30;
                document.getElementById('memory-limit').value = 512;
                document.getElementById('auto-memory-cleanup').checked = true;
                document.getElementById('gc-interval').value = 300;
                
                alert('성능 설정이 기본값으로 초기화되었습니다.');
            }
        }
        
        // 성능 테스트
        function startPerformanceTest() {
            alert('성능 테스트 실행\n\n• 응답 시간: 245ms\n• 처리량: 1,250 req/min\n• 메모리 사용량: 45%\n• CPU 사용량: 38%\n• 에러율: 0.1%\n\n성능 테스트가 완료되었습니다.');
        }
        
        // 캐시 정리
        function clearCache() {
            if (confirm('모든 캐시를 정리하시겠습니까?')) {
                // 실제로는 캐시 정리 로직을 실행해야 함
                alert('캐시가 성공적으로 정리되었습니다.\n\n• 메모리 캐시: 정리 완료\n• 디스크 캐시: 정리 완료\n• 임시 파일: 정리 완료\n\n시스템 성능이 향상되었습니다.');
            }
        }
        
        
        // 데이터 & 로그 페이지
        function showDataLogs() {
            setActiveAdminButton('데이터&로그');
            const responseArea = document.getElementById('response-area');
            if (!responseArea) return;
            
            responseArea.innerHTML = `
                <div class="admin-data-logs">
                    <button class="back-button" onclick="showSystemManagement()">←</button>
                    <h1>데이터 & 로그</h1>
                    
                    <div class="data-logs-container">
                        <!-- 로그 필터 -->
                        <div class="logs-filter">
                            <div class="filter-group">
                                <label>로그 레벨:</label>
                                <select id="log-level-filter" onchange="filterLogs()">
                                    <option value="all">전체</option>
                                    <option value="info">정보</option>
                                    <option value="warn">경고</option>
                                    <option value="error">오류</option>
                                    <option value="critical">치명적</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label>소스:</label>
                                <select id="log-source-filter" onchange="filterLogs()">
                                    <option value="all">전체</option>
                                    <option value="indexing">인덱싱</option>
                                    <option value="prompt">프롬프트</option>
                                    <option value="system">시스템</option>
                                    <option value="security">보안</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label>시간 범위:</label>
                                <select id="log-time-filter" onchange="filterLogs()">
                                    <option value="1h">최근 1시간</option>
                                    <option value="6h">최근 6시간</option>
                                    <option value="24h">최근 24시간</option>
                                    <option value="7d">최근 7일</option>
                                    <option value="all">전체</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- 실시간 로그 스트리밍 -->
                        <div class="logs-section">
                            <h2>📊 실시간 로그 스트리밍</h2>
                            <div class="log-stream-container">
                                <div class="log-stream-header">
                                    <span>실시간 로그 (자동 새로고침)</span>
                                    <button class="stream-toggle" id="stream-toggle" onclick="toggleLogStream()">⏸️ 일시정지</button>
                                </div>
                                <div class="log-stream" id="log-stream">
                                    <!-- 실시간 로그가 여기에 표시됩니다 -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- 시스템 로그 요약 -->
                        <div class="logs-section">
                            <h2>📈 시스템 로그 요약</h2>
                            <div class="logs-grid">
                                <div class="log-card">
                                    <h3>인덱스 복원</h3>
                                    <div class="log-content">
                                        <p>• 최근 복원: <span id="last-index-restore">2025-01-07 18:30:45</span></p>
                                        <p>• 복원된 파일: <span id="restored-files">1,247개</span></p>
                                        <p>• 소요 시간: <span id="restore-duration">2분 15초</span></p>
                                        <p>• 상태: <span id="restore-status" class="status-success">성공</span></p>
                                    </div>
                                </div>
                                <div class="log-card">
                                    <h3>프롬프트 업로드</h3>
                                    <div class="log-content">
                                        <p>• 최근 업로드: <span id="last-prompt-upload">2025-01-07 17:45:20</span></p>
                                        <p>• 업로드된 파일: <span id="uploaded-files">15개</span></p>
                                        <p>• 파일 크기: <span id="upload-size">2.3MB</span></p>
                                        <p>• 상태: <span id="upload-status" class="status-success">성공</span></p>
                                    </div>
                                </div>
                                <div class="log-card">
                                    <h3>시스템 상태</h3>
                                    <div class="log-content">
                                        <p>• 시작 시간: <span id="system-start">2025-01-07 09:00:00</span></p>
                                        <p>• 가동 시간: <span id="uptime">9시간 30분</span></p>
                                        <p>• 메모리 사용량: <span id="memory-usage">62%</span></p>
                                        <p>• 상태: <span id="system-status" class="status-success">정상</span></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 오류 로그 요약 -->
                        <div class="logs-section">
                            <h2>⚠️ 오류 로그 요약</h2>
                            <div class="logs-grid">
                                <div class="log-card error">
                                    <h3>최근 오류</h3>
                                    <div class="log-content">
                                        <p>• 시간: <span id="last-error-time">2025-01-07 16:20:10</span></p>
                                        <p>• 유형: <span id="last-error-type">파일 읽기 오류</span></p>
                                        <p>• 소스: <span id="last-error-source">indexing</span></p>
                                        <p>• 상태: <span id="last-error-status" class="status-resolved">해결됨</span></p>
                                    </div>
                                </div>
                                <div class="log-card warning">
                                    <h3>경고</h3>
                                    <div class="log-content">
                                        <p>• 시간: <span id="last-warning-time">2025-01-07 15:30:45</span></p>
                                        <p>• 유형: <span id="last-warning-type">메모리 사용량 높음</span></p>
                                        <p>• 소스: <span id="last-warning-source">system</span></p>
                                        <p>• 상태: <span id="last-warning-status" class="status-monitoring">모니터링 중</span></p>
                                    </div>
                                </div>
                                <div class="log-card info">
                                    <h3>로그 통계</h3>
                                    <div class="log-content">
                                        <p>• 총 로그 수: <span id="total-logs">1,247개</span></p>
                                        <p>• 오류: <span id="error-count">3개</span></p>
                                        <p>• 경고: <span id="warning-count">12개</span></p>
                                        <p>• 정보: <span id="info-count">1,232개</span></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 액션 버튼 -->
                        <div class="logs-actions">
                            <button class="admin-mode-btn primary" onclick="refreshLogs()">로그 새로고침</button>
                            <button class="admin-mode-btn secondary" onclick="exportLogs()">로그 내보내기</button>
                            <button class="admin-mode-btn secondary" onclick="clearLogs()">로그 정리</button>
                            <button class="admin-mode-btn secondary" onclick="downloadLogs()">로그 다운로드</button>
                        </div>
                    </div>
                </div>
            `;
            
            // 로그 데이터 로드 및 실시간 스트리밍 시작
            loadLogData();
            startLogStreaming();
        }
        
        // 로그 데이터 로드
        function loadLogData() {
            // 시뮬레이션된 로그 데이터
            const logData = {
                lastIndexRestore: '2025-01-07 18:30:45',
                restoredFiles: '1,247개',
                restoreDuration: '2분 15초',
                restoreStatus: '성공',
                lastPromptUpload: '2025-01-07 17:45:20',
                uploadedFiles: '15개',
                uploadSize: '2.3MB',
                uploadStatus: '성공',
                systemStart: '2025-01-07 09:00:00',
                uptime: '9시간 30분',
                memoryUsage: '62%',
                systemStatus: '정상',
                lastErrorTime: '2025-01-07 16:20:10',
                lastErrorType: '파일 읽기 오류',
                lastErrorSource: 'indexing',
                lastErrorStatus: '해결됨',
                lastWarningTime: '2025-01-07 15:30:45',
                lastWarningType: '메모리 사용량 높음',
                lastWarningSource: 'system',
                lastWarningStatus: '모니터링 중',
                totalLogs: '1,247개',
                errorCount: '3개',
                warningCount: '12개',
                infoCount: '1,232개'
            };
            
            // DOM 요소에 데이터 설정
            Object.entries(logData).forEach(([key, value]) => {
                const element = document.getElementById(key);
                if (element) {
                    element.textContent = value;
                }
            });
        }
        
        // 실시간 로그 스트리밍 시작
        let logStreamInterval = null;
        let isStreaming = true;
        
        function startLogStreaming() {
            if (logStreamInterval) {
                clearInterval(logStreamInterval);
            }
            
            // 초기 로그 로드
            updateLogStream();
            
            // 3초마다 로그 업데이트
            logStreamInterval = setInterval(() => {
                if (isStreaming) {
                    updateLogStream();
                }
            }, 3000);
        }
        
        // 로그 스트림 업데이트
        function updateLogStream() {
            const logStream = document.getElementById('log-stream');
            if (!logStream) return;
            
            // 시뮬레이션된 로그 엔트리 생성
            const logEntries = generateLogEntries();
            
            // 기존 로그에 새 로그 추가
            logEntries.forEach(entry => {
                const logElement = document.createElement('div');
                logElement.className = `log-entry ${entry.level}`;
                logElement.innerHTML = `
                    <span style="color: #888;">[${entry.timestamp}]</span>
                    <span style="color: #666;">[${entry.source}]</span>
                    ${entry.message}
                `;
                logStream.appendChild(logElement);
            });
            
            // 최대 50개 로그만 유지
            const entries = logStream.querySelectorAll('.log-entry');
            if (entries.length > 50) {
                for (let i = 0; i < entries.length - 50; i++) {
                    entries[i].remove();
                }
            }
            
            // 스크롤을 맨 아래로
            logStream.scrollTop = logStream.scrollHeight;
        }
        
        // 로그 엔트리 생성 (시뮬레이션)
        function generateLogEntries() {
            const now = new Date();
            const timestamp = now.toLocaleTimeString();
            
            const logTypes = [
                { level: 'info', source: 'system', message: '시스템 상태 정상' },
                { level: 'info', source: 'indexing', message: '인덱스 파일 검증 완료' },
                { level: 'info', source: 'prompt', message: '프롬프트 캐시 업데이트' },
                { level: 'warn', source: 'system', message: '메모리 사용량 75% 도달' },
                { level: 'info', source: 'security', message: '로그인 시도 감지' },
                { level: 'error', source: 'indexing', message: '파일 읽기 실패: document_456.pdf' },
                { level: 'info', source: 'system', message: '가비지 컬렉션 실행' },
                { level: 'info', source: 'prompt', message: '프롬프트 템플릿 로드 완료' }
            ];
            
            // 랜덤하게 1-3개의 로그 엔트리 반환
            const count = Math.floor(Math.random() * 3) + 1;
            const selectedLogs = [];
            
            for (let i = 0; i < count; i++) {
                const logType = logTypes[Math.floor(Math.random() * logTypes.length)];
                selectedLogs.push({
                    timestamp: timestamp,
                    level: logType.level,
                    source: logType.source,
                    message: logType.message
                });
            }
            
            return selectedLogs;
        }
        
        // 로그 스트리밍 토글
        function toggleLogStream() {
            const toggleBtn = document.getElementById('stream-toggle');
            if (!toggleBtn) return;
            
            isStreaming = !isStreaming;
            
            if (isStreaming) {
                toggleBtn.textContent = '⏸️ 일시정지';
                startLogStreaming();
            } else {
                toggleBtn.textContent = '▶️ 재생';
                if (logStreamInterval) {
                    clearInterval(logStreamInterval);
                }
            }
        }
        
        // 로그 필터링
        function filterLogs() {
            const levelFilter = document.getElementById('log-level-filter')?.value || 'all';
            const sourceFilter = document.getElementById('log-source-filter')?.value || 'all';
            const timeFilter = document.getElementById('log-time-filter')?.value || 'all';
            
            // 실제 구현에서는 필터링된 로그를 표시
            console.log('로그 필터링:', { levelFilter, sourceFilter, timeFilter });
            
            // 로그 데이터 새로고침
            loadLogData();
        }
        
        // 로그 새로고침
        function refreshLogs() {
            loadLogData();
            updateLogStream();
            alert('로그가 새로고침되었습니다.');
        }
        
        // 로그 내보내기
        function exportLogs() {
            const logData = {
                timestamp: new Date().toISOString(),
                systemLogs: {
                    lastIndexRestore: document.getElementById('last-index-restore')?.textContent,
                    lastPromptUpload: document.getElementById('last-prompt-upload')?.textContent,
                    systemStart: document.getElementById('system-start')?.textContent
                },
                errorLogs: {
                    lastError: document.getElementById('last-error-time')?.textContent,
                    lastWarning: document.getElementById('last-warning-time')?.textContent
                },
                statistics: {
                    totalLogs: document.getElementById('total-logs')?.textContent,
                    errorCount: document.getElementById('error-count')?.textContent,
                    warningCount: document.getElementById('warning-count')?.textContent
                }
            };
            
            const dataStr = JSON.stringify(logData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `maic_logs_${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            URL.revokeObjectURL(url);
            
            alert('로그가 JSON 파일로 내보내졌습니다.');
        }
        
        // 로그 정리
        function clearLogs() {
            if (confirm('모든 로그를 정리하시겠습니까?')) {
                const logStream = document.getElementById('log-stream');
                if (logStream) {
                    logStream.innerHTML = '';
                }
                
                // 로그 카운터 초기화
                document.getElementById('total-logs').textContent = '0개';
                document.getElementById('error-count').textContent = '0개';
                document.getElementById('warning-count').textContent = '0개';
                document.getElementById('info-count').textContent = '0개';
                
                alert('로그가 정리되었습니다.');
            }
        }
        
        // 로그 다운로드
        function downloadLogs() {
            const logStream = document.getElementById('log-stream');
            if (!logStream) return;
            
            const logText = Array.from(logStream.querySelectorAll('.log-entry'))
                .map(entry => entry.textContent)
                .join('\n');
            
            const dataBlob = new Blob([logText], {type: 'text/plain'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `maic_logs_${new Date().toISOString().split('T')[0]}.txt`;
            link.click();
            URL.revokeObjectURL(url);
            
            alert('로그가 텍스트 파일로 다운로드되었습니다.');
        }
        
        function adminSystemSettings() {
             // 버튼 활성화 효과
             setActiveAdminButton('시스템 설정');
             
             // 응답창에 시스템 설정 정보 표시
             const responseArea = document.getElementById('response-area');
             responseArea.innerHTML = `
                 <div class="chat-container">
                     <div class="chat-message admin">
                         <div class="message-avatar admin">⚙️</div>
                         <div class="message-bubble admin">
                             <h4>시스템 설정</h4>
                             <p>• 인덱스 복원 및 관리</p>
                             <p>• 시스템 상태 모니터링</p>
                             <p>• 프롬프트 관리</p>
                             <p>• 성능 최적화</p>
                             <div style="margin-top: 15px;">
                                 <button class="admin-mode-btn" data-action="restore-index" style="margin-right: 10px;">인덱스 복원</button>
                                 <button class="admin-mode-btn" data-action="refresh-status" style="margin-right: 10px;">상태 새로고침</button>
                                 <button class="admin-mode-btn" data-action="manage-prompts">프롬프트 관리</button>
                             </div>
                         </div>
                     </div>
                 </div>
             `;
             
             // 동적으로 생성된 버튼들에 이벤트 리스너 추가
             setTimeout(attachAdminButtonListeners, 100);
         }
        
        function adminStatistics() {
             // 버튼 활성화 효과
             setActiveAdminButton('통계 분석');
             
             // 응답창에 통계 정보 표시
             const responseArea = document.getElementById('response-area');
             responseArea.innerHTML = `
                 <div class="chat-container">
                     <div class="chat-message admin">
                         <div class="message-avatar admin">📊</div>
                         <div class="message-bubble admin">
                             <h4>통계 및 분석</h4>
                             <p>• 인덱스 상태 분석</p>
                             <p>• 시스템 성능 지표</p>
                             <p>• 사용량 모니터링</p>
                             <p>• 오류 로그 분석</p>
                             <div style="margin-top: 15px;">
                                 <button class="admin-mode-btn" data-action="view-metrics" style="margin-right: 10px;">시스템 지표</button>
                                 <button class="admin-mode-btn" data-action="view-errors" style="margin-right: 10px;">오류 로그</button>
                                 <button class="admin-mode-btn" data-action="export-stats">통계 내보내기</button>
                             </div>
                         </div>
                     </div>
                 </div>
             `;
             
             // 동적으로 생성된 버튼들에 이벤트 리스너 추가
             setTimeout(attachAdminButtonListeners, 100);
         }
        
        // 관리자 버튼 활성화 효과
        function setActiveAdminButton(buttonText) {
            // 모든 관리자 버튼에서 active 클래스 제거
            const adminButtons = document.querySelectorAll('.admin-mode-btn');
            adminButtons.forEach(btn => btn.classList.remove('active'));
            
            // 클릭된 버튼에 active 클래스 추가
            adminButtons.forEach(btn => {
                if (btn.textContent === buttonText) {
                    btn.classList.add('active');
                }
            });
        }
        
         // 관리자 로그아웃 (전역 함수)
         window.adminLogout = function() {
             if (confirm('관리자 모드에서 로그아웃하시겠습니까?')) {
                 showUserMode();
             }
         }
         
         // 동적으로 생성된 관리자 버튼들에 이벤트 리스너 추가
         function attachAdminButtonListeners() {
             const adminBtns = document.querySelectorAll('.admin-mode-btn[data-action]');
             adminBtns.forEach(btn => {
                 const action = btn.getAttribute('data-action');
                 btn.addEventListener('click', () => {
                     switch(action) {
                         case 'clear-sessions':
                             clearUserSessions();
                             break;
                         case 'view-logs':
                             viewUserLogs();
                             break;
                         case 'restore-index':
                             restoreIndex();
                             break;
                         case 'refresh-status':
                             refreshSystemStatus();
                             break;
                         case 'manage-prompts':
                             managePrompts();
                             break;
                         case 'start-indexing':
                             startIndexing();
                             break;
                         case 'upload-to-release':
                             uploadToRelease();
                             break;
                        case 'restore-from-local':
                            restoreFromLocal();
                            break;
                        case 'env-settings':
                            showEnvironmentSettings();
                            break;
                        case 'security-settings':
                            showSecuritySettings();
                            break;
                        case 'performance-settings':
                            showPerformanceSettings();
                            break;
                         case 'view-metrics':
                             viewSystemMetrics();
                             break;
                         case 'view-errors':
                             viewErrorLogs();
                             break;
                         case 'export-stats':
                             exportStatistics();
                             break;
                     }
                 });
             });
         }
         
         // 실제 MAIC 관리자 기능들
         function clearUserSessions() {
             addChatMessage('ai', '세션 초기화를 시작합니다...\n\n• 모든 사용자 세션 정리\n• 캐시 데이터 삭제\n• 메모리 최적화\n\n✅ 세션 초기화가 완료되었습니다.');
         }
         
         function viewUserLogs() {
             addChatMessage('ai', '사용자 활동 로그:\n\n📊 최근 활동:\n• 문법 학습: 45회\n• 문장 분석: 32회\n• 지문 설명: 28회\n\n⏰ 활성 세션: 3개\n👥 동시 사용자: 12명\n\n📈 오늘 총 질문 수: 105개');
         }
         
         function restoreIndex() {
             addChatMessage('ai', '인덱스 복원을 시작합니다...\n\n🔄 진행 단계:\n1. 최신 인덱스 다운로드\n2. 로컬 인덱스 백업\n3. 새 인덱스 적용\n4. 검증 및 테스트\n\n✅ 인덱스 복원이 완료되었습니다.\n📊 복원된 파일: 1,247개');
         }
         
         function refreshSystemStatus() {
             addChatMessage('ai', '시스템 상태를 새로고침합니다...\n\n📊 현재 상태:\n• 인덱스 상태: 준비완료 ✅\n• 메모리 사용량: 68%\n• CPU 사용량: 23%\n• 디스크 공간: 2.1GB 사용\n\n🔧 시스템 상태: 정상');
         }
         
         function managePrompts() {
             addChatMessage('ai', '프롬프트 관리 패널:\n\n📝 활성 프롬프트:\n• 문법학습: 15개\n• 문장분석: 12개\n• 지문설명: 18개\n\n⚙️ 관리 옵션:\n• 프롬프트 편집\n• 새 프롬프트 추가\n• 성능 최적화\n• 백업 및 복원');
         }
         
         function viewSystemMetrics() {
             addChatMessage('ai', '시스템 성능 지표:\n\n📈 성능 메트릭:\n• 평균 응답 시간: 1.2초\n• 처리량: 45 QPS\n• 가용성: 99.8%\n• 오류율: 0.02%\n\n💾 리소스 사용량:\n• 메모리: 2.1GB / 4GB\n• CPU: 23% 평균\n• 네트워크: 15MB/s');
         }
         
         function viewErrorLogs() {
             addChatMessage('ai', '오류 로그 분석:\n\n🚨 최근 오류:\n• 2025-01-07 18:15: 인덱스 로딩 지연 (해결됨)\n• 2025-01-07 17:42: 메모리 부족 경고 (해결됨)\n• 2025-01-07 16:30: 네트워크 타임아웃 (해결됨)\n\n✅ 현재 상태: 모든 오류 해결됨\n📊 오류율: 0.02% (정상 범위)');
         }
         
         function exportStatistics() {
             addChatMessage('ai', '통계 데이터 내보내기:\n\n📊 내보낼 데이터:\n• 사용자 활동 통계\n• 시스템 성능 지표\n• 오류 로그 요약\n• 인덱스 상태 보고서\n\n💾 형식: JSON, CSV, PDF\n📁 저장 위치: /admin/exports/\n\n✅ 통계 데이터가 성공적으로 내보내졌습니다.');
         }
        
        // 모달 외부 클릭 시 닫기
        window.onclick = function(event) {
            const modal = document.getElementById('passwordModal');
            if (event.target === modal) {
                closeModal();
            }
        }
        
        // Enter 키로 로그인
        document.getElementById('adminPassword').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkPassword();
            }
        });
        
        // 질문 입력에서 Enter 키 지원
        document.getElementById('question-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                askQuestion();
            }
        });
        
        // 관리자 명령어 입력창 관련 이벤트 리스너는 제거됨
        
        // 간단한 반응형 높이 조정
        function adjustResponseHeight() {
            const responseArea = document.getElementById('response-area');
            if (responseArea) {
                const vh = window.innerHeight;
                const availableHeight = vh - 400; // 헤더, 모드선택, 입력창, 여백 고려
                const finalHeight = Math.max(300, availableHeight);
                responseArea.style.maxHeight = finalHeight + 'px';
            }
        }
        
        // 페이지 로드 시 및 창 크기 변경 시 높이 조정
        window.addEventListener('load', adjustResponseHeight);
        window.addEventListener('resize', adjustResponseHeight);
        
        // 페이지 로드 완료 후 실행
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM 로드 완료 - 모든 버튼이 onclick으로 연결됨');
            
            // 전역 함수들이 정의되었는지 확인
            console.log('전역 함수 확인:');
            console.log('adminLogin:', typeof window.adminLogin);
            console.log('selectMode:', typeof window.selectMode);
            console.log('askQuestion:', typeof window.askQuestion);
            console.log('studentLogin:', typeof window.studentLogin);
            console.log('checkPassword:', typeof window.checkPassword);
            console.log('closeModal:', typeof window.closeModal);
            console.log('adminLogout:', typeof window.adminLogout);
            
            // 세션 시작 추적
            trackUserActivity('session_start', { 
                timestamp: new Date().toISOString(),
                userAgent: navigator.userAgent,
                screenResolution: `${screen.width}x${screen.height}`
            });
            
            // 활성 세션 수 증가
            const activeSessions = parseInt(sessionStorage.getItem('maic_active_sessions') || '0') + 1;
            sessionStorage.setItem('maic_active_sessions', activeSessions.toString());
            
            // 학생 모드 초기화 - 기본 학생 인터페이스 표시
            showUserMode();
            
            // 모드 버튼 상태 초기화
            setTimeout(() => {
                updateStudentModeButtons();
            }, 200);
        });
    </script>
</body>
</html>
